<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>04. Regular Layout • pivottabler</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="04. Regular Layout">
<meta property="og:description" content="pivottabler">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-64707587-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-64707587-2');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pivottabler</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/cbailiss/pivottabler/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="v04-regularlayout_files/htmlwidgets-1.5.1/htmlwidgets.js"></script><script src="v04-regularlayout_files/pivottabler-binding-1.4.0/pivottabler.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>04. Regular Layout</h1>
                        <h4 class="author">Chris Bailiss</h4>
            
            <h4 class="date">2020-05-12</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/cbailiss/pivottabler/blob/master/vignettes/v04-regularlayout.Rmd"><code>vignettes/v04-regularlayout.Rmd</code></a></small>
      <div class="hidden name"><code>v04-regularlayout.Rmd</code></div>

    </div>

    
    
<div id="in-this-vignette" class="section level2">
<h2 class="hasAnchor">
<a href="#in-this-vignette" class="anchor"></a>In This Vignette</h2>
<ul>
<li>Introduction</li>
<li>What is Regular Layout?</li>
<li>Types of Regular Layout</li>
<li>Tabular Layout</li>
<li>Outline Layout</li>
<li>Outline Layout Settings</li>
<li>Setting default outline settings</li>
<li>Combined Outline Layout Example</li>
<li>Multiple Level Outline Layout Example</li>
<li>Outline Calculation Example</li>
<li>Irregular Layout</li>
<li>Further Reading</li>
</ul>
</div>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>This page defines “regular layout” then describes the two main types of regular layout that are supported by the <code>pivottabler</code> package. Most of this page is spent discussing the more advanced “outline” layout.</p>
</div>
<div id="what-is-regular-layout" class="section level2">
<h2 class="hasAnchor">
<a href="#what-is-regular-layout" class="anchor"></a>What is Regular Layout?</h2>
<p>Consider the following example pivot table:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"PowerType"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">renderPivot</span>()</pre></body></html></div>
<div id="htmlwidget-6c92269b03f910d10d88" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-6c92269b03f910d10d88">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\" colspan=\"4\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\" colspan=\"3\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"ColumnHeader\">DMU<\/th>\n    <th class=\"ColumnHeader\">EMU<\/th>\n    <th class=\"ColumnHeader\">HST<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n    <th class=\"ColumnHeader\">DMU<\/th>\n    <th class=\"ColumnHeader\">EMU<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n    <th class=\"ColumnHeader\">&nbsp;<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Arriva Trains Wales<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">3079<\/td>\n    <td class=\"Cell\">830<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">CrossCountry<\/th>\n    <td class=\"Cell\">22133<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\">732<\/td>\n    <td class=\"Total\">22865<\/td>\n    <td class=\"Cell\">63<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">63<\/td>\n    <td class=\"Total\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">London Midland<\/th>\n    <td class=\"Cell\">5638<\/td>\n    <td class=\"Cell\">8849<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">14487<\/td>\n    <td class=\"Cell\">5591<\/td>\n    <td class=\"Cell\">28201<\/td>\n    <td class=\"Total\">33792<\/td>\n    <td class=\"Total\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Virgin Trains<\/th>\n    <td class=\"Cell\">2137<\/td>\n    <td class=\"Cell\">6457<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">8594<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\"><\/td>\n    <td class=\"Total\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">32987<\/td>\n    <td class=\"Total\">15306<\/td>\n    <td class=\"Total\">732<\/td>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">6484<\/td>\n    <td class=\"Total\">28201<\/td>\n    <td class=\"Total\">34685<\/td>\n    <td class=\"Total\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script><p>This is a regular pivot table because each level of row and column headings is related to a single variable only, i.e.</p>
<ul>
<li>The first level of column headings (“Express Passenger”, “Ordinary Passenger”, etc.) are all related to the “TrainCategory” variable.</li>
<li>The second level of column headings (“DMU”, “EMU”, etc.) are all related to the “PowerType” variable.</li>
<li>The first level of row headings (“Arriva Trains Wales”, “CrossCountry”, etc.) are all related to the “TOC” (Train Operating Company) variable.</li>
</ul>
</div>
<div id="types-of-regular-layout" class="section level2">
<h2 class="hasAnchor">
<a href="#types-of-regular-layout" class="anchor"></a>Types of Regular Layout</h2>
<p>The <code>pivottabler</code> package supports broadly two types of regular layout:</p>
<ul>
<li>Tabular Layout</li>
<li>Outline Layout</li>
</ul>
<p>These layout types can be mixed in a pivot table.</p>
</div>
<div id="tabular-layout" class="section level2">
<h2 class="hasAnchor">
<a href="#tabular-layout" class="anchor"></a>Tabular Layout</h2>
<p>Tabular layout is the simplest pivot table layout. Where there are multiple levels of row or column data groups, then the child groups are rendered “under” the parent group. For column data groups, that is directly under the parent. For row data groups, that is to the right of the parent.</p>
<p>There are no additional settings for tabular layout.</p>
<p>The pivot table shown above is an example of a pivot table using a tabular layout. Another example of a pivot table using tabular layout is shown below.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"PowerType"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">renderPivot</span>()</pre></body></html></div>
<div id="htmlwidget-b381026652357399a106" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-b381026652357399a106">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" colspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">Arriva Trains Wales<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">3079<\/td>\n    <td class=\"Total\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">CrossCountry<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">22133<\/td>\n    <td class=\"Cell\">63<\/td>\n    <td class=\"Total\">22196<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">HST<\/th>\n    <td class=\"Cell\">732<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">732<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">22865<\/td>\n    <td class=\"Total\">63<\/td>\n    <td class=\"Total\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">London Midland<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">5638<\/td>\n    <td class=\"Cell\">5591<\/td>\n    <td class=\"Total\">11229<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">8849<\/td>\n    <td class=\"Cell\">28201<\/td>\n    <td class=\"Total\">37050<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">14487<\/td>\n    <td class=\"Total\">33792<\/td>\n    <td class=\"Total\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">Virgin Trains<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">2137<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">2137<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">6457<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">6457<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">8594<\/td>\n    <td class=\"Total\"><\/td>\n    <td class=\"Total\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">34685<\/td>\n    <td class=\"Total\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="outline-layout" class="section level2">
<h2 class="hasAnchor">
<a href="#outline-layout" class="anchor"></a>Outline Layout</h2>
<p>Outline layout is an alternative way of rendering row data groups. Parent row data groups are rendered as headers just above the child data groups (i.e. vertically above). The last level of row data groups is not specified to use outline layout and remains using tabular layout.</p>
<p>Outline layout is useful when the row data group captions are longer since the text can flow to the right. Outlined row data groups act as separators in the pivot table, which can sometimes make the pivot table easier to read.</p>
<p>Outline layout does not apply to the column data groups - since the text for column data groups already naturally flows to the right.</p>
<p>Outline layout usually makes pivot tables narrower (i.e. reduced width) and longer (i.e. taller vertically).</p>
<p>The simplest way to enable outline layout is to specify <code>outlineBefore=TRUE</code> as an argument when adding the parent row data groups.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>, <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fl">TRUE</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"PowerType"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">renderPivot</span>()</pre></body></html></div>
<div id="htmlwidget-4aa9914ac5c098e3133b" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-4aa9914ac5c098e3133b">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" colspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">Arriva Trains Wales<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">3079<\/td>\n    <td class=\"Total\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">CrossCountry<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">22133<\/td>\n    <td class=\"Cell\">63<\/td>\n    <td class=\"Total\">22196<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">HST<\/th>\n    <td class=\"Cell\">732<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">732<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">22865<\/td>\n    <td class=\"Total\">63<\/td>\n    <td class=\"Total\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">London Midland<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">5638<\/td>\n    <td class=\"Cell\">5591<\/td>\n    <td class=\"Total\">11229<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">8849<\/td>\n    <td class=\"Cell\">28201<\/td>\n    <td class=\"Total\">37050<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">14487<\/td>\n    <td class=\"Total\">33792<\/td>\n    <td class=\"Total\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">Virgin Trains<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">2137<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">2137<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">6457<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">6457<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">8594<\/td>\n    <td class=\"Total\"><\/td>\n    <td class=\"Total\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">34685<\/td>\n    <td class=\"Total\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script><p>Comparing one row data group (comprised of two levels, “TOC” and “Power Type”):</p>
<div class="figure">
<img src="layout1.png" alt="Row Data Group in Tabular Layout"><p class="caption">Row Data Group in Tabular Layout</p>
</div>
<p><br></p>
<div class="figure">
<img src="layout2.png" alt="Row Data Group in Outline Layout"><p class="caption">Row Data Group in Outline Layout</p>
</div>
<p><br></p>
<p>Outline layout creates a new row for TOC “CrossCountry” and makes the caption of the normal “CrossCountry” group blank.</p>
<div class="figure">
<img src="layout3.png" alt="Row Data Group in Outline Layout"><p class="caption">Row Data Group in Outline Layout</p>
</div>
<p><br></p>
<p>Even though the caption is blank, this row is still applying the “TOC=CrossCountry” filtering, i.e. the numbers are the same in both the tabular layout and outline layout.</p>
<p>The example pivot table above uses <code>outlineBefore=TRUE</code>, which adds a header row above each row data group. By default, the caption of this data group is the data group value.</p>
<p>It is also possible to specify <code>outlineAfter=TRUE</code>. This adds a footer row below each rowdata group. By default, the caption of this data group is blank.</p>
<div class="figure">
<img src="layout4.png" alt="Full set of rows in Outline Layout"><p class="caption">Full set of rows in Outline Layout</p>
</div>
<p><br></p>
<p>When additional variables are added to the row groups, the new rows for the outline groups are never broken down by the newly added variable, e.g. when “PowerType” was added to the example above, the two new rows were not broken down into “DMU”, “HST”, etc.</p>
<p>An example of a pivot table showing the outline rows before and after:</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>, <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fl">TRUE</span>, <span class="kw">outlineAfter</span><span class="kw">=</span><span class="fl">TRUE</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"PowerType"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">renderPivot</span>()</pre></body></html></div>
<div id="htmlwidget-60dbed234252e48110c6" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-60dbed234252e48110c6">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" colspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">Arriva Trains Wales<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">3079<\/td>\n    <td class=\"Total\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">&nbsp;<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">CrossCountry<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">22133<\/td>\n    <td class=\"Cell\">63<\/td>\n    <td class=\"Total\">22196<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">HST<\/th>\n    <td class=\"Cell\">732<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">732<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">22865<\/td>\n    <td class=\"Total\">63<\/td>\n    <td class=\"Total\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">&nbsp;<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">London Midland<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">5638<\/td>\n    <td class=\"Cell\">5591<\/td>\n    <td class=\"Total\">11229<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">8849<\/td>\n    <td class=\"Cell\">28201<\/td>\n    <td class=\"Total\">37050<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">14487<\/td>\n    <td class=\"Total\">33792<\/td>\n    <td class=\"Total\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">&nbsp;<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">Virgin Trains<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">2137<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">2137<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">6457<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">6457<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">8594<\/td>\n    <td class=\"Total\"><\/td>\n    <td class=\"Total\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">&nbsp;<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">34685<\/td>\n    <td class=\"Total\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="outline-layout-settings" class="section level2">
<h2 class="hasAnchor">
<a href="#outline-layout-settings" class="anchor"></a>Outline Layout Settings</h2>
<p>Some aspects of the outline layout can be specifically controlled. This is done by specifying a list of settings for the <code>outlineBefore</code>, <code>outlineAfter</code> and/or <code>outlineTotal</code> arguments.</p>
<div id="the-mergespace-setting" class="section level3">
<h3 class="hasAnchor">
<a href="#the-mergespace-setting" class="anchor"></a>The <code>mergeSpace</code> Setting</h3>
<p><code>mergeSpace</code> controls how the empty space to the right of the outline row is merged.</p>
<div id="donotmerge" class="section level4">
<h4 class="hasAnchor">
<a href="#donotmerge" class="anchor"></a>doNotMerge</h4>
<p>This specifies that nothing should be merged.</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>, <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">mergeSpace</span><span class="kw">=</span><span class="st">"doNotMerge"</span>))
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"PowerType"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">renderPivot</span>()</pre></body></html></div>
<div id="htmlwidget-00306a6289c433c976fe" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-00306a6289c433c976fe">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" colspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\">Arriva Trains Wales<\/th>\n    <th class=\"OutlineRowHeader\">&nbsp;<\/th>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\"><\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">3079<\/td>\n    <td class=\"Total\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\">CrossCountry<\/th>\n    <th class=\"OutlineRowHeader\">&nbsp;<\/th>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\"><\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">22133<\/td>\n    <td class=\"Cell\">63<\/td>\n    <td class=\"Total\">22196<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">HST<\/th>\n    <td class=\"Cell\">732<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">732<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">22865<\/td>\n    <td class=\"Total\">63<\/td>\n    <td class=\"Total\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\">London Midland<\/th>\n    <th class=\"OutlineRowHeader\">&nbsp;<\/th>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\"><\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">5638<\/td>\n    <td class=\"Cell\">5591<\/td>\n    <td class=\"Total\">11229<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">8849<\/td>\n    <td class=\"Cell\">28201<\/td>\n    <td class=\"Total\">37050<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">14487<\/td>\n    <td class=\"Total\">33792<\/td>\n    <td class=\"Total\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\">Virgin Trains<\/th>\n    <th class=\"OutlineRowHeader\">&nbsp;<\/th>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\"><\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">2137<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">2137<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">6457<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">6457<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">8594<\/td>\n    <td class=\"Total\"><\/td>\n    <td class=\"Total\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">34685<\/td>\n    <td class=\"Total\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="datagroupsonly" class="section level4">
<h4 class="hasAnchor">
<a href="#datagroupsonly" class="anchor"></a>dataGroupsOnly</h4>
<p>This specifies that only the row headings should be merged.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>, <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">mergeSpace</span><span class="kw">=</span><span class="st">"dataGroupsOnly"</span>))
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"PowerType"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">renderPivot</span>()</pre></body></html></div>
<div id="htmlwidget-5260cddcb20b6297cff9" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-5260cddcb20b6297cff9">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" colspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">Arriva Trains Wales<\/th>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\"><\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">3079<\/td>\n    <td class=\"Total\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">CrossCountry<\/th>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\"><\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">22133<\/td>\n    <td class=\"Cell\">63<\/td>\n    <td class=\"Total\">22196<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">HST<\/th>\n    <td class=\"Cell\">732<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">732<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">22865<\/td>\n    <td class=\"Total\">63<\/td>\n    <td class=\"Total\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">London Midland<\/th>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\"><\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">5638<\/td>\n    <td class=\"Cell\">5591<\/td>\n    <td class=\"Total\">11229<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">8849<\/td>\n    <td class=\"Cell\">28201<\/td>\n    <td class=\"Total\">37050<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">14487<\/td>\n    <td class=\"Total\">33792<\/td>\n    <td class=\"Total\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">Virgin Trains<\/th>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\"><\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">2137<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">2137<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">6457<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">6457<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">8594<\/td>\n    <td class=\"Total\"><\/td>\n    <td class=\"Total\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">34685<\/td>\n    <td class=\"Total\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cellsonly" class="section level4">
<h4 class="hasAnchor">
<a href="#cellsonly" class="anchor"></a>cellsOnly</h4>
<p>This specifies that only the cells should be merged.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>, <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">mergeSpace</span><span class="kw">=</span><span class="st">"cellsOnly"</span>))
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"PowerType"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">renderPivot</span>()</pre></body></html></div>
<div id="htmlwidget-6f269240b20bf0f6f1f4" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-6f269240b20bf0f6f1f4">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" colspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\">Arriva Trains Wales<\/th>\n    <th class=\"OutlineRowHeader\">&nbsp;<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">3079<\/td>\n    <td class=\"Total\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\">CrossCountry<\/th>\n    <th class=\"OutlineRowHeader\">&nbsp;<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">22133<\/td>\n    <td class=\"Cell\">63<\/td>\n    <td class=\"Total\">22196<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">HST<\/th>\n    <td class=\"Cell\">732<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">732<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">22865<\/td>\n    <td class=\"Total\">63<\/td>\n    <td class=\"Total\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\">London Midland<\/th>\n    <th class=\"OutlineRowHeader\">&nbsp;<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">5638<\/td>\n    <td class=\"Cell\">5591<\/td>\n    <td class=\"Total\">11229<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">8849<\/td>\n    <td class=\"Cell\">28201<\/td>\n    <td class=\"Total\">37050<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">14487<\/td>\n    <td class=\"Total\">33792<\/td>\n    <td class=\"Total\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\">Virgin Trains<\/th>\n    <th class=\"OutlineRowHeader\">&nbsp;<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">2137<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">2137<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">6457<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">6457<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">8594<\/td>\n    <td class=\"Total\"><\/td>\n    <td class=\"Total\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">34685<\/td>\n    <td class=\"Total\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="datagroupsandcellsas2" class="section level4">
<h4 class="hasAnchor">
<a href="#datagroupsandcellsas2" class="anchor"></a>dataGroupsAndCellsAs2</h4>
<p>This specifies that the row headings should be merged into one combined row heading and that the cells should be merged into one cell. This is the default used when <code>outlineBefore=TRUE</code> is specified.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>, <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">mergeSpace</span><span class="kw">=</span><span class="st">"dataGroupsAndCellsAs2"</span>))
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"PowerType"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">renderPivot</span>()</pre></body></html></div>
<div id="htmlwidget-cef221b2681a06a57456" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-cef221b2681a06a57456">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" colspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">Arriva Trains Wales<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">3079<\/td>\n    <td class=\"Total\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">CrossCountry<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">22133<\/td>\n    <td class=\"Cell\">63<\/td>\n    <td class=\"Total\">22196<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">HST<\/th>\n    <td class=\"Cell\">732<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">732<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">22865<\/td>\n    <td class=\"Total\">63<\/td>\n    <td class=\"Total\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">London Midland<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">5638<\/td>\n    <td class=\"Cell\">5591<\/td>\n    <td class=\"Total\">11229<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">8849<\/td>\n    <td class=\"Cell\">28201<\/td>\n    <td class=\"Total\">37050<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">14487<\/td>\n    <td class=\"Total\">33792<\/td>\n    <td class=\"Total\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">Virgin Trains<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">2137<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">2137<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">6457<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">6457<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">8594<\/td>\n    <td class=\"Total\"><\/td>\n    <td class=\"Total\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">34685<\/td>\n    <td class=\"Total\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="datagroupsandcellsas1" class="section level4">
<h4 class="hasAnchor">
<a href="#datagroupsandcellsas1" class="anchor"></a>dataGroupsAndCellsAs1</h4>
<p>This specifies that the row headings and cells should all be merged into one.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>, <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">mergeSpace</span><span class="kw">=</span><span class="st">"dataGroupsAndCellsAs1"</span>))
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"PowerType"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">renderPivot</span>()</pre></body></html></div>
<div id="htmlwidget-07bdb6f0eecac7ae0cc7" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-07bdb6f0eecac7ae0cc7">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" colspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"5\">Arriva Trains Wales<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">3079<\/td>\n    <td class=\"Total\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"5\">CrossCountry<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">22133<\/td>\n    <td class=\"Cell\">63<\/td>\n    <td class=\"Total\">22196<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">HST<\/th>\n    <td class=\"Cell\">732<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">732<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">22865<\/td>\n    <td class=\"Total\">63<\/td>\n    <td class=\"Total\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"5\">London Midland<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">5638<\/td>\n    <td class=\"Cell\">5591<\/td>\n    <td class=\"Total\">11229<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">8849<\/td>\n    <td class=\"Cell\">28201<\/td>\n    <td class=\"Total\">37050<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">14487<\/td>\n    <td class=\"Total\">33792<\/td>\n    <td class=\"Total\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"5\">Virgin Trains<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">2137<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">2137<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">6457<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">6457<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">8594<\/td>\n    <td class=\"Total\"><\/td>\n    <td class=\"Total\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">34685<\/td>\n    <td class=\"Total\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="the-isempty-setting" class="section level3">
<h3 class="hasAnchor">
<a href="#the-isempty-setting" class="anchor"></a>The <code>isEmpty</code> Setting</h3>
<p>Normally the outline row data groups have no values in the corresponding cells in those rows in the pivot table.</p>
<p>Specifying <code>isEmpty=FALSE</code> will instead show the corresponding calculation values in the cells of the outline rows. This corresponds to the total of the values from the child groups. Typically, when <code>isEmpty=FALSE</code> is specified for the parent row data group, then the total rows are switched off for the child data groups by specifying <code>addTotal=FALSE</code>.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>,
                    <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">isEmpty</span><span class="kw">=</span><span class="fl">FALSE</span>, <span class="kw">mergeSpace</span><span class="kw">=</span><span class="st">"dataGroupsOnly"</span>))
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"PowerType"</span>, <span class="kw">addTotal</span><span class="kw">=</span><span class="fl">FALSE</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">renderPivot</span>()</pre></body></html></div>
<div id="htmlwidget-6b075a5627e9b187b857" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-6b075a5627e9b187b857">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" colspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">Arriva Trains Wales<\/th>\n    <td class=\"OutlineCell\">3079<\/td>\n    <td class=\"OutlineCell\">830<\/td>\n    <td class=\"OutlineCell\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">CrossCountry<\/th>\n    <td class=\"OutlineCell\">22865<\/td>\n    <td class=\"OutlineCell\">63<\/td>\n    <td class=\"OutlineCell\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">22133<\/td>\n    <td class=\"Cell\">63<\/td>\n    <td class=\"Total\">22196<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">HST<\/th>\n    <td class=\"Cell\">732<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">732<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">London Midland<\/th>\n    <td class=\"OutlineCell\">14487<\/td>\n    <td class=\"OutlineCell\">33792<\/td>\n    <td class=\"OutlineCell\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">5638<\/td>\n    <td class=\"Cell\">5591<\/td>\n    <td class=\"Total\">11229<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">8849<\/td>\n    <td class=\"Cell\">28201<\/td>\n    <td class=\"Total\">37050<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">Virgin Trains<\/th>\n    <td class=\"OutlineCell\">8594<\/td>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">2137<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">2137<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">6457<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">6457<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">34685<\/td>\n    <td class=\"Total\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script><p><code>outlineTotal=TRUE</code> is then typically specified for the parent row data group, so that the heading in the grand total row is rendered in a consistent way to the rest of the outline rows (i.e. as a merged cell, instead of separate cells).</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>,
                    <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">isEmpty</span><span class="kw">=</span><span class="fl">FALSE</span>, <span class="kw">mergeSpace</span><span class="kw">=</span><span class="st">"dataGroupsOnly"</span>),
                    <span class="kw">outlineTotal</span><span class="kw">=</span><span class="fl">TRUE</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"PowerType"</span>, <span class="kw">addTotal</span><span class="kw">=</span><span class="fl">FALSE</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">renderPivot</span>()</pre></body></html></div>
<div id="htmlwidget-16f53f72dca52a4e08cf" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-16f53f72dca52a4e08cf">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" colspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">Arriva Trains Wales<\/th>\n    <td class=\"OutlineCell\">3079<\/td>\n    <td class=\"OutlineCell\">830<\/td>\n    <td class=\"OutlineCell\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">CrossCountry<\/th>\n    <td class=\"OutlineCell\">22865<\/td>\n    <td class=\"OutlineCell\">63<\/td>\n    <td class=\"OutlineCell\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">22133<\/td>\n    <td class=\"Cell\">63<\/td>\n    <td class=\"Total\">22196<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">HST<\/th>\n    <td class=\"Cell\">732<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">732<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">London Midland<\/th>\n    <td class=\"OutlineCell\">14487<\/td>\n    <td class=\"OutlineCell\">33792<\/td>\n    <td class=\"OutlineCell\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">5638<\/td>\n    <td class=\"Cell\">5591<\/td>\n    <td class=\"Total\">11229<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">8849<\/td>\n    <td class=\"Cell\">28201<\/td>\n    <td class=\"Total\">37050<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">Virgin Trains<\/th>\n    <td class=\"OutlineCell\">8594<\/td>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">2137<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">2137<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">6457<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">6457<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">Total<\/th>\n    <td class=\"OutlineCell\">49025<\/td>\n    <td class=\"OutlineCell\">34685<\/td>\n    <td class=\"OutlineCell\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="the-caption-setting" class="section level3">
<h3 class="hasAnchor">
<a href="#the-caption-setting" class="anchor"></a>The <code>caption</code> Setting</h3>
<p>The caption setting controls the caption shown in the outline data group. By default the value of the caption setting is <code>"{value}"</code>. Changing the caption allows additional text to be shown.</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>,
                    <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">caption</span><span class="kw">=</span><span class="st">"TOC:  {value}"</span>))
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"PowerType"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">renderPivot</span>()</pre></body></html></div>
<div id="htmlwidget-3c5c7857a9da9e0c81ff" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-3c5c7857a9da9e0c81ff">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" colspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">TOC:  Arriva Trains Wales<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">3079<\/td>\n    <td class=\"Total\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">TOC:  CrossCountry<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">22133<\/td>\n    <td class=\"Cell\">63<\/td>\n    <td class=\"Total\">22196<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">HST<\/th>\n    <td class=\"Cell\">732<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">732<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">22865<\/td>\n    <td class=\"Total\">63<\/td>\n    <td class=\"Total\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">TOC:  London Midland<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">5638<\/td>\n    <td class=\"Cell\">5591<\/td>\n    <td class=\"Total\">11229<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">8849<\/td>\n    <td class=\"Cell\">28201<\/td>\n    <td class=\"Total\">37050<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">14487<\/td>\n    <td class=\"Total\">33792<\/td>\n    <td class=\"Total\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">TOC:  Virgin Trains<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">2137<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">2137<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">6457<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">6457<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">8594<\/td>\n    <td class=\"Total\"><\/td>\n    <td class=\"Total\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">34685<\/td>\n    <td class=\"Total\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="the-groupstylename-and-groupstyledeclarations-settings" class="section level3">
<h3 class="hasAnchor">
<a href="#the-groupstylename-and-groupstyledeclarations-settings" class="anchor"></a>The <code>groupStyleName</code> and <code>groupStyleDeclarations</code> Settings</h3>
<p>The <code>groupStyleName</code> setting allows a new base style to be specified for the outline groups. This will completely replace the built-in style. A style with the corresponding name must exist in the current pivot table theme. See the <a href="v07-styling.html">Styling</a> vignette for more details.</p>
<p>In most cases specifying additional styling using the <code>groupStyleDeclarations</code> setting is better since this allows additional style declarations to be overlaid onto the base/built-in style.</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>,
                    <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">groupStyleDeclarations</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">color</span><span class="kw">=</span><span class="st">"blue"</span>)))
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"PowerType"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">renderPivot</span>()</pre></body></html></div>
<div id="htmlwidget-c3db4002d3e7478e19ab" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-c3db4002d3e7478e19ab">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" colspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"2\">Arriva Trains Wales<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">3079<\/td>\n    <td class=\"Total\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"2\">CrossCountry<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">22133<\/td>\n    <td class=\"Cell\">63<\/td>\n    <td class=\"Total\">22196<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">HST<\/th>\n    <td class=\"Cell\">732<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">732<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">22865<\/td>\n    <td class=\"Total\">63<\/td>\n    <td class=\"Total\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"2\">London Midland<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">5638<\/td>\n    <td class=\"Cell\">5591<\/td>\n    <td class=\"Total\">11229<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">8849<\/td>\n    <td class=\"Cell\">28201<\/td>\n    <td class=\"Total\">37050<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">14487<\/td>\n    <td class=\"Total\">33792<\/td>\n    <td class=\"Total\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"2\">Virgin Trains<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">2137<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">2137<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">6457<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">6457<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">8594<\/td>\n    <td class=\"Total\"><\/td>\n    <td class=\"Total\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">34685<\/td>\n    <td class=\"Total\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="the-cellstylename-and-cellstyledeclarations-settings" class="section level3">
<h3 class="hasAnchor">
<a href="#the-cellstylename-and-cellstyledeclarations-settings" class="anchor"></a>The <code>cellStyleName</code> and <code>cellStyleDeclarations</code> Settings</h3>
<p>The <code>cellStyleName</code> setting allows a new base style to be specified for the cells in the outline rows. This will completely replace the built-in style. A style with the corresponding name must exist in the current pivot table theme. See the <a href="v07-styling.html">Styling</a> vignette for more details.</p>
<p>In most cases specifying additional styling using the <code>cellStyleDeclarations</code> setting is better since this allows additional style declarations to be overlaid onto the base/built-in style.</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>,
                    <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">mergeSpace</span><span class="kw">=</span><span class="st">"doNotMerge"</span>,
                                       <span class="kw">cellStyleDeclarations</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"background-color"</span><span class="kw">=</span><span class="st">"lightskyblue"</span>)))
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"PowerType"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">renderPivot</span>()</pre></body></html></div>
<div id="htmlwidget-91d3af5b58336a784da1" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-91d3af5b58336a784da1">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" colspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\">Arriva Trains Wales<\/th>\n    <th class=\"OutlineRowHeader\">&nbsp;<\/th>\n    <td class=\"OutlineCell\" style=\"background-color: lightskyblue; \"><\/td>\n    <td class=\"OutlineCell\" style=\"background-color: lightskyblue; \"><\/td>\n    <td class=\"OutlineCell\" style=\"background-color: lightskyblue; \"><\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">3079<\/td>\n    <td class=\"Total\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\">CrossCountry<\/th>\n    <th class=\"OutlineRowHeader\">&nbsp;<\/th>\n    <td class=\"OutlineCell\" style=\"background-color: lightskyblue; \"><\/td>\n    <td class=\"OutlineCell\" style=\"background-color: lightskyblue; \"><\/td>\n    <td class=\"OutlineCell\" style=\"background-color: lightskyblue; \"><\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">22133<\/td>\n    <td class=\"Cell\">63<\/td>\n    <td class=\"Total\">22196<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">HST<\/th>\n    <td class=\"Cell\">732<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">732<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">22865<\/td>\n    <td class=\"Total\">63<\/td>\n    <td class=\"Total\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\">London Midland<\/th>\n    <th class=\"OutlineRowHeader\">&nbsp;<\/th>\n    <td class=\"OutlineCell\" style=\"background-color: lightskyblue; \"><\/td>\n    <td class=\"OutlineCell\" style=\"background-color: lightskyblue; \"><\/td>\n    <td class=\"OutlineCell\" style=\"background-color: lightskyblue; \"><\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">5638<\/td>\n    <td class=\"Cell\">5591<\/td>\n    <td class=\"Total\">11229<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">8849<\/td>\n    <td class=\"Cell\">28201<\/td>\n    <td class=\"Total\">37050<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">14487<\/td>\n    <td class=\"Total\">33792<\/td>\n    <td class=\"Total\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\">Virgin Trains<\/th>\n    <th class=\"OutlineRowHeader\">&nbsp;<\/th>\n    <td class=\"OutlineCell\" style=\"background-color: lightskyblue; \"><\/td>\n    <td class=\"OutlineCell\" style=\"background-color: lightskyblue; \"><\/td>\n    <td class=\"OutlineCell\" style=\"background-color: lightskyblue; \"><\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">2137<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">2137<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">6457<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">6457<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">8594<\/td>\n    <td class=\"Total\"><\/td>\n    <td class=\"Total\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">34685<\/td>\n    <td class=\"Total\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="setting-default-outline-settings" class="section level2">
<h2 class="hasAnchor">
<a href="#setting-default-outline-settings" class="anchor"></a>Setting default outline settings</h2>
<p>Default values for the <code>outlineBefore</code>, <code>outlineAfter</code> and <code>outlineTotal</code> parameters can be set using <code>pt$setDefault()</code>. See <a href="vA1-appendix.html">Appendix: Details</a> for details.</p>
</div>
<div id="combined-outline-layout-example" class="section level2">
<h2 class="hasAnchor">
<a href="#combined-outline-layout-example" class="anchor"></a>Combined Outline Layout Example</h2>
<p>The example pivot table below combines several of the outline settings described above.</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>,
                    <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">groupStyleDeclarations</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">color</span><span class="kw">=</span><span class="st">"blue"</span>)),
                    <span class="kw">outlineAfter</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">isEmpty</span><span class="kw">=</span><span class="fl">FALSE</span>,
                                      <span class="kw">mergeSpace</span><span class="kw">=</span><span class="st">"dataGroupsOnly"</span>,
                                      <span class="kw">caption</span><span class="kw">=</span><span class="st">"Total ({value})"</span>,
                                      <span class="kw">groupStyleDeclarations</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"font-style"</span><span class="kw">=</span><span class="st">"italic"</span>)),
                    <span class="kw">outlineTotal</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">groupStyleDeclarations</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">color</span><span class="kw">=</span><span class="st">"blue"</span>),
                                      <span class="kw">cellStyleDeclarations</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"color"</span><span class="kw">=</span><span class="st">"blue"</span>)))
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"PowerType"</span>, <span class="kw">addTotal</span><span class="kw">=</span><span class="fl">FALSE</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">renderPivot</span>()</pre></body></html></div>
<div id="htmlwidget-1dca322108932184b5fc" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-1dca322108932184b5fc">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" colspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"2\">Arriva Trains Wales<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"font-style: italic; \" colspan=\"2\">Total (Arriva Trains Wales)<\/th>\n    <td class=\"OutlineCell\">3079<\/td>\n    <td class=\"OutlineCell\">830<\/td>\n    <td class=\"OutlineCell\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"2\">CrossCountry<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">22133<\/td>\n    <td class=\"Cell\">63<\/td>\n    <td class=\"Total\">22196<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">HST<\/th>\n    <td class=\"Cell\">732<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">732<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"font-style: italic; \" colspan=\"2\">Total (CrossCountry)<\/th>\n    <td class=\"OutlineCell\">22865<\/td>\n    <td class=\"OutlineCell\">63<\/td>\n    <td class=\"OutlineCell\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"2\">London Midland<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">5638<\/td>\n    <td class=\"Cell\">5591<\/td>\n    <td class=\"Total\">11229<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">8849<\/td>\n    <td class=\"Cell\">28201<\/td>\n    <td class=\"Total\">37050<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"font-style: italic; \" colspan=\"2\">Total (London Midland)<\/th>\n    <td class=\"OutlineCell\">14487<\/td>\n    <td class=\"OutlineCell\">33792<\/td>\n    <td class=\"OutlineCell\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"2\">Virgin Trains<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">2137<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">2137<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">6457<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">6457<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"font-style: italic; \" colspan=\"2\">Total (Virgin Trains)<\/th>\n    <td class=\"OutlineCell\">8594<\/td>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"2\">Total<\/th>\n    <td class=\"OutlineCell\" style=\"color: blue; \">49025<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">34685<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="multiple-level-outline-layout-examples" class="section level2">
<h2 class="hasAnchor">
<a href="#multiple-level-outline-layout-examples" class="anchor"></a>Multiple Level Outline Layout Examples</h2>
<p>The example pivot table below adds a third level on the row groups, where both the first and second levels are outlined, leaving the third level in tabular layout.</p>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>,
                    <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">isEmpty</span><span class="kw">=</span><span class="fl">FALSE</span>,
                                       <span class="kw">mergeSpace</span><span class="kw">=</span><span class="st">"dataGroupsOnly"</span>,
                                       <span class="kw">groupStyleDeclarations</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">color</span><span class="kw">=</span><span class="st">"blue"</span>),
                                       <span class="kw">cellStyleDeclarations</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">color</span><span class="kw">=</span><span class="st">"blue"</span>)),
                    <span class="kw">outlineTotal</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">groupStyleDeclarations</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">color</span><span class="kw">=</span><span class="st">"blue"</span>),
                                      <span class="kw">cellStyleDeclarations</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">color</span><span class="kw">=</span><span class="st">"blue"</span>)))
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"PowerType"</span>,
                    <span class="kw">addTotal</span><span class="kw">=</span><span class="fl">FALSE</span>,
                    <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">isEmpty</span><span class="kw">=</span><span class="fl">FALSE</span>, <span class="kw">mergeSpace</span><span class="kw">=</span><span class="st">"dataGroupsOnly"</span>))
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"Status"</span>, <span class="kw">addTotal</span><span class="kw">=</span><span class="fl">FALSE</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">renderPivot</span>()</pre></body></html></div>
<div id="htmlwidget-e446712667d77f51c8a0" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-e446712667d77f51c8a0">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" colspan=\"3\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"3\">Arriva Trains Wales<\/th>\n    <td class=\"OutlineCell\" style=\"color: blue; \">3079<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">830<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"4\">&nbsp;<\/th>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">DMU<\/th>\n    <td class=\"OutlineCell\">3079<\/td>\n    <td class=\"OutlineCell\">830<\/td>\n    <td class=\"OutlineCell\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">A<\/th>\n    <td class=\"Cell\">3018<\/td>\n    <td class=\"Cell\">815<\/td>\n    <td class=\"Total\">3833<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">C<\/th>\n    <td class=\"Cell\">59<\/td>\n    <td class=\"Cell\">15<\/td>\n    <td class=\"Total\">74<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">R<\/th>\n    <td class=\"Cell\">2<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">2<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"3\">CrossCountry<\/th>\n    <td class=\"OutlineCell\" style=\"color: blue; \">22865<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">63<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"7\">&nbsp;<\/th>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">DMU<\/th>\n    <td class=\"OutlineCell\">22133<\/td>\n    <td class=\"OutlineCell\">63<\/td>\n    <td class=\"OutlineCell\">22196<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">A<\/th>\n    <td class=\"Cell\">21561<\/td>\n    <td class=\"Cell\">60<\/td>\n    <td class=\"Total\">21621<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">C<\/th>\n    <td class=\"Cell\">546<\/td>\n    <td class=\"Cell\">2<\/td>\n    <td class=\"Total\">548<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">R<\/th>\n    <td class=\"Cell\">26<\/td>\n    <td class=\"Cell\">1<\/td>\n    <td class=\"Total\">27<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">HST<\/th>\n    <td class=\"OutlineCell\">732<\/td>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\">732<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"RowHeader\">A<\/th>\n    <td class=\"Cell\">709<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">709<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">C<\/th>\n    <td class=\"Cell\">23<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">23<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"3\">London Midland<\/th>\n    <td class=\"OutlineCell\" style=\"color: blue; \">14487<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">33792<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"8\">&nbsp;<\/th>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">DMU<\/th>\n    <td class=\"OutlineCell\">5638<\/td>\n    <td class=\"OutlineCell\">5591<\/td>\n    <td class=\"OutlineCell\">11229<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">A<\/th>\n    <td class=\"Cell\">5534<\/td>\n    <td class=\"Cell\">5520<\/td>\n    <td class=\"Total\">11054<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">C<\/th>\n    <td class=\"Cell\">101<\/td>\n    <td class=\"Cell\">67<\/td>\n    <td class=\"Total\">168<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">R<\/th>\n    <td class=\"Cell\">3<\/td>\n    <td class=\"Cell\">4<\/td>\n    <td class=\"Total\">7<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">EMU<\/th>\n    <td class=\"OutlineCell\">8849<\/td>\n    <td class=\"OutlineCell\">28201<\/td>\n    <td class=\"OutlineCell\">37050<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">A<\/th>\n    <td class=\"Cell\">8599<\/td>\n    <td class=\"Cell\">27331<\/td>\n    <td class=\"Total\">35930<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">C<\/th>\n    <td class=\"Cell\">235<\/td>\n    <td class=\"Cell\">847<\/td>\n    <td class=\"Total\">1082<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">R<\/th>\n    <td class=\"Cell\">15<\/td>\n    <td class=\"Cell\">23<\/td>\n    <td class=\"Total\">38<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"3\">Virgin Trains<\/th>\n    <td class=\"OutlineCell\" style=\"color: blue; \">8594<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \"><\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"8\">&nbsp;<\/th>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">DMU<\/th>\n    <td class=\"OutlineCell\">2137<\/td>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\">2137<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">A<\/th>\n    <td class=\"Cell\">2028<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">2028<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">C<\/th>\n    <td class=\"Cell\">107<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">107<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">R<\/th>\n    <td class=\"Cell\">2<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">2<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">EMU<\/th>\n    <td class=\"OutlineCell\">6457<\/td>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\">6457<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"RowHeader\">A<\/th>\n    <td class=\"Cell\">6331<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">6331<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">C<\/th>\n    <td class=\"Cell\">119<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">119<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">R<\/th>\n    <td class=\"Cell\">7<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">7<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"3\">Total<\/th>\n    <td class=\"OutlineCell\" style=\"color: blue; \">49025<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">34685<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script><p>Alternatively, it is possible to outline only the first level, leaving the second and third levels in tabular layout.</p>
<div class="sourceCode" id="cb17"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>,
                    <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">isEmpty</span><span class="kw">=</span><span class="fl">FALSE</span>,
                                       <span class="kw">mergeSpace</span><span class="kw">=</span><span class="st">"dataGroupsOnly"</span>,
                                       <span class="kw">groupStyleDeclarations</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">color</span><span class="kw">=</span><span class="st">"blue"</span>)),
                    <span class="kw">outlineTotal</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">groupStyleDeclarations</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">color</span><span class="kw">=</span><span class="st">"blue"</span>)))
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"PowerType"</span>, <span class="kw">addTotal</span><span class="kw">=</span><span class="fl">FALSE</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"Status"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">renderPivot</span>()</pre></body></html></div>
<div id="htmlwidget-b4765ee46ab67660a19f" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-b4765ee46ab67660a19f">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" colspan=\"3\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"3\">Arriva Trains Wales<\/th>\n    <td class=\"OutlineCell\">3079<\/td>\n    <td class=\"OutlineCell\">830<\/td>\n    <td class=\"OutlineCell\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"4\">&nbsp;<\/th>\n    <th class=\"RowHeader\" rowspan=\"4\">DMU<\/th>\n    <th class=\"RowHeader\">A<\/th>\n    <td class=\"Cell\">3018<\/td>\n    <td class=\"Cell\">815<\/td>\n    <td class=\"Total\">3833<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">C<\/th>\n    <td class=\"Cell\">59<\/td>\n    <td class=\"Cell\">15<\/td>\n    <td class=\"Total\">74<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">R<\/th>\n    <td class=\"Cell\">2<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">2<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">3079<\/td>\n    <td class=\"Total\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"3\">CrossCountry<\/th>\n    <td class=\"OutlineCell\">22865<\/td>\n    <td class=\"OutlineCell\">63<\/td>\n    <td class=\"OutlineCell\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"7\">&nbsp;<\/th>\n    <th class=\"RowHeader\" rowspan=\"4\">DMU<\/th>\n    <th class=\"RowHeader\">A<\/th>\n    <td class=\"Cell\">21561<\/td>\n    <td class=\"Cell\">60<\/td>\n    <td class=\"Total\">21621<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">C<\/th>\n    <td class=\"Cell\">546<\/td>\n    <td class=\"Cell\">2<\/td>\n    <td class=\"Total\">548<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">R<\/th>\n    <td class=\"Cell\">26<\/td>\n    <td class=\"Cell\">1<\/td>\n    <td class=\"Total\">27<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">22133<\/td>\n    <td class=\"Total\">63<\/td>\n    <td class=\"Total\">22196<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">HST<\/th>\n    <th class=\"RowHeader\">A<\/th>\n    <td class=\"Cell\">709<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">709<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">C<\/th>\n    <td class=\"Cell\">23<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">23<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">732<\/td>\n    <td class=\"Total\"><\/td>\n    <td class=\"Total\">732<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"3\">London Midland<\/th>\n    <td class=\"OutlineCell\">14487<\/td>\n    <td class=\"OutlineCell\">33792<\/td>\n    <td class=\"OutlineCell\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"8\">&nbsp;<\/th>\n    <th class=\"RowHeader\" rowspan=\"4\">DMU<\/th>\n    <th class=\"RowHeader\">A<\/th>\n    <td class=\"Cell\">5534<\/td>\n    <td class=\"Cell\">5520<\/td>\n    <td class=\"Total\">11054<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">C<\/th>\n    <td class=\"Cell\">101<\/td>\n    <td class=\"Cell\">67<\/td>\n    <td class=\"Total\">168<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">R<\/th>\n    <td class=\"Cell\">3<\/td>\n    <td class=\"Cell\">4<\/td>\n    <td class=\"Total\">7<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">5638<\/td>\n    <td class=\"Total\">5591<\/td>\n    <td class=\"Total\">11229<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"4\">EMU<\/th>\n    <th class=\"RowHeader\">A<\/th>\n    <td class=\"Cell\">8599<\/td>\n    <td class=\"Cell\">27331<\/td>\n    <td class=\"Total\">35930<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">C<\/th>\n    <td class=\"Cell\">235<\/td>\n    <td class=\"Cell\">847<\/td>\n    <td class=\"Total\">1082<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">R<\/th>\n    <td class=\"Cell\">15<\/td>\n    <td class=\"Cell\">23<\/td>\n    <td class=\"Total\">38<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">8849<\/td>\n    <td class=\"Total\">28201<\/td>\n    <td class=\"Total\">37050<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"3\">Virgin Trains<\/th>\n    <td class=\"OutlineCell\">8594<\/td>\n    <td class=\"OutlineCell\"><\/td>\n    <td class=\"OutlineCell\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"8\">&nbsp;<\/th>\n    <th class=\"RowHeader\" rowspan=\"4\">DMU<\/th>\n    <th class=\"RowHeader\">A<\/th>\n    <td class=\"Cell\">2028<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">2028<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">C<\/th>\n    <td class=\"Cell\">107<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">107<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">R<\/th>\n    <td class=\"Cell\">2<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">2<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">2137<\/td>\n    <td class=\"Total\"><\/td>\n    <td class=\"Total\">2137<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"4\">EMU<\/th>\n    <th class=\"RowHeader\">A<\/th>\n    <td class=\"Cell\">6331<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">6331<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">C<\/th>\n    <td class=\"Cell\">119<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">119<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">R<\/th>\n    <td class=\"Cell\">7<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">7<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">6457<\/td>\n    <td class=\"Total\"><\/td>\n    <td class=\"Total\">6457<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"3\">Total<\/th>\n    <td class=\"OutlineCell\">49025<\/td>\n    <td class=\"OutlineCell\">34685<\/td>\n    <td class=\"OutlineCell\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="outline-calculation-example" class="section level2">
<h2 class="hasAnchor">
<a href="#outline-calculation-example" class="anchor"></a>Outline Calculation Example</h2>
<p>It is also possible to put the calculations on rows in the pivot table and to outline the calculation groups.</p>
<p>Shown below is a pivot table with calculations on rows in tabular layout:</p>
<div class="sourceCode" id="cb18"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"NumberOfTrains"</span>, <span class="kw">caption</span><span class="kw">=</span><span class="st">"Number of Trains"</span>,
                     <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"MaximumSpeedMPH"</span>, <span class="kw">caption</span><span class="kw">=</span><span class="st">"Maximum Speed (MPH)"</span>,
                     <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"max(SchedSpeedMPH, na.rm=TRUE)"</span>)
<span class="no">pt</span>$<span class="fu">addRowCalculationGroups</span>()
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"PowerType"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>)
<span class="no">pt</span>$<span class="fu">renderPivot</span>()</pre></body></html></div>
<div id="htmlwidget-28fa70d0f657b6c40984" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-28fa70d0f657b6c40984">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\" colspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\" colspan=\"4\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\" colspan=\"3\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"ColumnHeader\">DMU<\/th>\n    <th class=\"ColumnHeader\">EMU<\/th>\n    <th class=\"ColumnHeader\">HST<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n    <th class=\"ColumnHeader\">DMU<\/th>\n    <th class=\"ColumnHeader\">EMU<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n    <th class=\"ColumnHeader\">&nbsp;<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"5\">Number of Trains<\/th>\n    <th class=\"RowHeader\">Arriva Trains Wales<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">3079<\/td>\n    <td class=\"Cell\">830<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">CrossCountry<\/th>\n    <td class=\"Cell\">22133<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\">732<\/td>\n    <td class=\"Total\">22865<\/td>\n    <td class=\"Cell\">63<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">63<\/td>\n    <td class=\"Total\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">London Midland<\/th>\n    <td class=\"Cell\">5638<\/td>\n    <td class=\"Cell\">8849<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">14487<\/td>\n    <td class=\"Cell\">5591<\/td>\n    <td class=\"Cell\">28201<\/td>\n    <td class=\"Total\">33792<\/td>\n    <td class=\"Total\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Virgin Trains<\/th>\n    <td class=\"Cell\">2137<\/td>\n    <td class=\"Cell\">6457<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">8594<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\"><\/td>\n    <td class=\"Total\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">32987<\/td>\n    <td class=\"Total\">15306<\/td>\n    <td class=\"Total\">732<\/td>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">6484<\/td>\n    <td class=\"Total\">28201<\/td>\n    <td class=\"Total\">34685<\/td>\n    <td class=\"Total\">83710<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"5\">Maximum Speed (MPH)<\/th>\n    <th class=\"RowHeader\">Arriva Trains Wales<\/th>\n    <td class=\"Cell\">90<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">90<\/td>\n    <td class=\"Cell\">90<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">90<\/td>\n    <td class=\"Total\">90<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">CrossCountry<\/th>\n    <td class=\"Cell\">125<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\">125<\/td>\n    <td class=\"Total\">125<\/td>\n    <td class=\"Cell\">100<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">100<\/td>\n    <td class=\"Total\">125<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">London Midland<\/th>\n    <td class=\"Cell\">100<\/td>\n    <td class=\"Cell\">110<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">110<\/td>\n    <td class=\"Cell\">100<\/td>\n    <td class=\"Cell\">100<\/td>\n    <td class=\"Total\">100<\/td>\n    <td class=\"Total\">110<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Virgin Trains<\/th>\n    <td class=\"Cell\">125<\/td>\n    <td class=\"Cell\">125<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">125<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\"><\/td>\n    <td class=\"Total\">125<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">125<\/td>\n    <td class=\"Total\">125<\/td>\n    <td class=\"Total\">125<\/td>\n    <td class=\"Total\">125<\/td>\n    <td class=\"Total\">100<\/td>\n    <td class=\"Total\">100<\/td>\n    <td class=\"Total\">100<\/td>\n    <td class=\"Total\">125<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script><p>The same pivot table is shown below in outline layout. In this pivot table, the two calculations on rows are outlined:</p>
<div class="sourceCode" id="cb19"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"NumberOfTrains"</span>, <span class="kw">caption</span><span class="kw">=</span><span class="st">"Number of Trains"</span>,
                     <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"MaximumSpeedMPH"</span>, <span class="kw">caption</span><span class="kw">=</span><span class="st">"Maximum Speed (MPH)"</span>,
                     <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"max(SchedSpeedMPH, na.rm=TRUE)"</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"PowerType"</span>)
<span class="no">pt</span>$<span class="fu">addRowCalculationGroups</span>(<span class="kw">outlineBefore</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">isEmpty</span><span class="kw">=</span><span class="fl">FALSE</span>, <span class="kw">mergeSpace</span><span class="kw">=</span><span class="st">"dataGroupsOnly"</span>,
                                              <span class="kw">groupStyleDeclarations</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">color</span><span class="kw">=</span><span class="st">"blue"</span>),
                                              <span class="kw">cellStyleDeclarations</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">color</span><span class="kw">=</span><span class="st">"blue"</span>)))
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>, <span class="kw">addTotal</span><span class="kw">=</span><span class="fl">FALSE</span>)
<span class="no">pt</span>$<span class="fu">renderPivot</span>()</pre></body></html></div>
<div id="htmlwidget-4ac7038e1803819c65cc" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-4ac7038e1803819c65cc">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\" colspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\" colspan=\"4\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\" colspan=\"3\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"ColumnHeader\">DMU<\/th>\n    <th class=\"ColumnHeader\">EMU<\/th>\n    <th class=\"ColumnHeader\">HST<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n    <th class=\"ColumnHeader\">DMU<\/th>\n    <th class=\"ColumnHeader\">EMU<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n    <th class=\"ColumnHeader\">&nbsp;<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"2\">Number of Trains<\/th>\n    <td class=\"OutlineCell\" style=\"color: blue; \">32987<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">15306<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">732<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">49025<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">6484<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">28201<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">34685<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">83710<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"4\">&nbsp;<\/th>\n    <th class=\"RowHeader\">Arriva Trains Wales<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">3079<\/td>\n    <td class=\"Cell\">830<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">CrossCountry<\/th>\n    <td class=\"Cell\">22133<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\">732<\/td>\n    <td class=\"Total\">22865<\/td>\n    <td class=\"Cell\">63<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">63<\/td>\n    <td class=\"Total\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">London Midland<\/th>\n    <td class=\"Cell\">5638<\/td>\n    <td class=\"Cell\">8849<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">14487<\/td>\n    <td class=\"Cell\">5591<\/td>\n    <td class=\"Cell\">28201<\/td>\n    <td class=\"Total\">33792<\/td>\n    <td class=\"Total\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Virgin Trains<\/th>\n    <td class=\"Cell\">2137<\/td>\n    <td class=\"Cell\">6457<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">8594<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\"><\/td>\n    <td class=\"Total\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"2\">Maximum Speed (MPH)<\/th>\n    <td class=\"OutlineCell\" style=\"color: blue; \">125<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">125<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">125<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">125<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">100<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">100<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">100<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">125<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"4\">&nbsp;<\/th>\n    <th class=\"RowHeader\">Arriva Trains Wales<\/th>\n    <td class=\"Cell\">90<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">90<\/td>\n    <td class=\"Cell\">90<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">90<\/td>\n    <td class=\"Total\">90<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">CrossCountry<\/th>\n    <td class=\"Cell\">125<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\">125<\/td>\n    <td class=\"Total\">125<\/td>\n    <td class=\"Cell\">100<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">100<\/td>\n    <td class=\"Total\">125<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">London Midland<\/th>\n    <td class=\"Cell\">100<\/td>\n    <td class=\"Cell\">110<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">110<\/td>\n    <td class=\"Cell\">100<\/td>\n    <td class=\"Cell\">100<\/td>\n    <td class=\"Total\">100<\/td>\n    <td class=\"Total\">110<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Virgin Trains<\/th>\n    <td class=\"Cell\">125<\/td>\n    <td class=\"Cell\">125<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">125<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\"><\/td>\n    <td class=\"Total\">125<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="variable-depth-hierarchy-example" class="section level2">
<h2 class="hasAnchor">
<a href="#variable-depth-hierarchy-example" class="anchor"></a>Variable Depth Hierarchy Example</h2>
<p>For advanced scenarios, it is possible to control whether a data group or outline child group is created using the following two parameters in <code>pt$addRowCalculationGroups()</code> and <code>pt$addColumnCalculationGroups()</code>:</p>
<ul>
<li>
<code>onlyAddGroupIf</code> - a character value that is used as additional filter criteria before creating each data group - only if some rows exist that match this filter will the data group be created.</li>
<li>
<code>onlyAddOutlineChildGroupIf</code> - a character value that is used as additional filter criteria before creating each outline child data group - only if some rows exist that match this filter will the data group be created.</li>
</ul>
<p>The example below demonstrates the use of <code>onlyAddOutlineChildGroupIf</code> to create a balance sheet style table with a variable number of levels in the row data groups:</p>
<div class="sourceCode" id="cb20"><html><body><pre class="r"><span class="no">df</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(
  <span class="kw">Level1</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"Net entrepreneurial income"</span>, <span class="kw">times</span><span class="kw">=</span><span class="fl">12</span>),
  <span class="kw">Level2</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"Net operating surplus"</span>, <span class="fl">9</span>), <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"Interests and rents"</span>, <span class="fl">3</span>)),
  <span class="kw">Level3</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"Factor income"</span>, <span class="fl">8</span>),<span class="st">"Compensation of employees"</span>,<span class="st">"Paid rent"</span>,
             <span class="st">"Paid interest"</span>,<span class="st">"Received interest"</span>),
  <span class="kw">Level4</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"Net value added"</span>, <span class="fl">6</span>), <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"Taxes and subsidies"</span>, <span class="fl">2</span>), <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">NA</span>, <span class="fl">4</span>)),
  <span class="kw">Level5</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"Gross value added"</span>, <span class="fl">5</span>),<span class="st">"Depreciation"</span>,<span class="st">"Other taxes on production"</span>,
             <span class="st">"Other subsidies (non-product specific)"</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">NA</span>, <span class="fl">4</span>)),
  <span class="kw">Level6</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"Production of the agricultural industry"</span>, <span class="fl">4</span>),
             <span class="st">"Intermediate services"</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">NA</span>, <span class="fl">7</span>)),
  <span class="kw">Level7</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Crop production"</span>,<span class="st">"Livestock production"</span>,
             <span class="st">"Production of agricultural services"</span>,<span class="st">"Other production"</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">NA</span>, <span class="fl">8</span>)),
  <span class="kw">MaxGroupLevel</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">7</span>,<span class="fl">7</span>,<span class="fl">7</span>,<span class="fl">7</span>,<span class="fl">6</span>,<span class="fl">5</span>,<span class="fl">5</span>,<span class="fl">5</span>,<span class="fl">3</span>,<span class="fl">3</span>,<span class="fl">3</span>,<span class="fl">3</span>),
  <span class="kw">Budget2019</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">4150.39</span>,<span class="fl">4739.2</span>,<span class="fl">625.6</span>,<span class="fl">325.8</span>,-<span class="fl">6427</span>,-<span class="fl">2049.3</span>,
                 -<span class="fl">145.4</span>,<span class="fl">2847.3</span>,-<span class="fl">1149</span>,-<span class="fl">221.2</span>,-<span class="fl">307.6</span>,<span class="fl">12.8</span>),
  <span class="kw">Actual2019</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">3978.8</span>,<span class="fl">4341.1</span>,<span class="fl">603.7</span>,<span class="fl">343</span>,-<span class="fl">6063.9</span>,-<span class="fl">2079.6</span>,
                 -<span class="fl">136.8</span>,<span class="fl">2578.6</span>,-<span class="fl">1092.9</span>,-<span class="fl">203.3</span>,-<span class="fl">327.6</span>,<span class="fl">14.1</span>),
  <span class="kw">Budget2020</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">4210.9</span>,<span class="fl">4857.7</span>,<span class="fl">676.6</span>,<span class="fl">405.8</span>,-<span class="fl">6299</span>,-<span class="fl">2086.7</span>,
                 -<span class="fl">145.4</span>,<span class="fl">2920.6</span>,-<span class="fl">1245</span>,-<span class="fl">236.5</span>,-<span class="fl">244.7</span>,<span class="fl">10.1</span>),
  <span class="kw">Actual2020</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">4373.7</span>,<span class="fl">5307.6</span>,<span class="fl">693.9</span>,<span class="fl">408.2</span>,-<span class="fl">7065.3</span>,-<span class="fl">1985</span>,
                 -<span class="fl">154.2</span>,<span class="fl">3063</span>,-<span class="fl">1229.3</span>,-<span class="fl">268.2</span>,-<span class="fl">250.3</span>,<span class="fl">11.1</span>)
)

<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">setDefault</span>(<span class="kw">addTotal</span><span class="kw">=</span><span class="fl">FALSE</span>, <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">isEmpty</span><span class="kw">=</span><span class="fl">FALSE</span>))
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">df</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"Level1"</span>, <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fl">TRUE</span>,
        <span class="kw">onlyAddOutlineChildGroupIf</span><span class="kw">=</span><span class="st">"MaxGroupLevel&gt;1"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"Level2"</span>, <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fl">TRUE</span>,
        <span class="kw">onlyAddOutlineChildGroupIf</span><span class="kw">=</span><span class="st">"MaxGroupLevel&gt;2"</span>,
        <span class="kw">dataSortOrder</span><span class="kw">=</span><span class="st">"custom"</span>,
        <span class="kw">customSortOrder</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Net operating surplus"</span>, <span class="st">"Interests and rents"</span>))
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"Level3"</span>, <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fl">TRUE</span>,
        <span class="kw">onlyAddOutlineChildGroupIf</span><span class="kw">=</span><span class="st">"MaxGroupLevel&gt;3"</span>,
        <span class="kw">dataSortOrder</span><span class="kw">=</span><span class="st">"custom"</span>,
        <span class="kw">customSortOrder</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Factor income"</span>, <span class="st">"Compensation of employees"</span>,
                          <span class="st">"Paid rent"</span>, <span class="st">"Paid interest"</span>, <span class="st">"Received interest"</span>))
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"Level4"</span>, <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fl">TRUE</span>,
        <span class="kw">onlyAddOutlineChildGroupIf</span><span class="kw">=</span><span class="st">"MaxGroupLevel&gt;4"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"Level5"</span>, <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fl">TRUE</span>,
        <span class="kw">onlyAddOutlineChildGroupIf</span><span class="kw">=</span><span class="st">"MaxGroupLevel&gt;5"</span>,
        <span class="kw">dataSortOrder</span><span class="kw">=</span><span class="st">"custom"</span>,
        <span class="kw">customSortOrder</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Gross value added"</span>, <span class="st">"Depreciation"</span>,
                          <span class="st">"Other taxes on production"</span>,
                          <span class="st">"Other subsidies (non-product specific)"</span>))
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"Level6"</span>, <span class="kw">outlineBefore</span><span class="kw">=</span><span class="fl">TRUE</span>,
        <span class="kw">onlyAddOutlineChildGroupIf</span><span class="kw">=</span><span class="st">"MaxGroupLevel&gt;6"</span>,
        <span class="kw">dataSortOrder</span><span class="kw">=</span><span class="st">"custom"</span>,
        <span class="kw">customSortOrder</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Production of the agricultural industry"</span>,
                          <span class="st">"Intermediate Services"</span>))
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"Level7"</span>, <span class="kw">dataSortOrder</span><span class="kw">=</span><span class="st">"custom"</span>,
                    <span class="kw">customSortOrder</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Crop production"</span>, <span class="st">"Livestock production"</span>,
                    <span class="st">"Production of agricultural services"</span>, <span class="st">"Other production"</span>))
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"Budget"</span>,
                     <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"sum(Budget2020)"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"Actual"</span>,
                     <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"sum(Actual2020)"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"Variance"</span>,
                     <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"sum(Actual2020)-sum(Budget2020)"</span>,
                     <span class="kw">format</span><span class="kw">=</span><span class="st">"%.1f"</span>)
<span class="no">pt</span>$<span class="fu">evaluatePivot</span>()

<span class="co"># get the row groups relating to outline groups </span>
<span class="co"># (above leaf level) and leaf level groups</span>
<span class="no">grps</span> <span class="kw">&lt;-</span> <span class="no">pt</span>$<span class="fu">findRowDataGroups</span>(<span class="kw">outlineGroups</span><span class="kw">=</span><span class="st">"only"</span>,
                             <span class="kw">outlineLinkedGroupExists</span><span class="kw">=</span><span class="fl">FALSE</span>)
<span class="no">grps</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="no">grps</span>, <span class="no">pt</span>$<span class="fu">findRowDataGroups</span>(<span class="kw">atLevel</span><span class="kw">=</span><span class="fl">7</span>))
<span class="co"># set the styling of these groups so the text isn't bold</span>
<span class="no">pt</span>$<span class="fu">setStyling</span>(<span class="kw">groups</span><span class="kw">=</span><span class="no">grps</span>, <span class="kw">declarations</span> <span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"font-weight"</span><span class="kw">=</span><span class="st">"normal"</span>))

<span class="co"># find the cells corresponding to these groups</span>
<span class="no">rowNumbers</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span>(<span class="no">grps</span>, <span class="no">pt</span>$<span class="no">findGroupRowNumbers</span>)
<span class="no">cells</span> <span class="kw">&lt;-</span> <span class="no">pt</span>$<span class="fu">getCells</span>(<span class="kw">rowNumbers</span><span class="kw">=</span><span class="no">rowNumbers</span>)
<span class="co"># set the styling of these cells to be normal cells </span>
<span class="co"># instead of the darker outline styling</span>
<span class="no">pt</span>$<span class="fu">setStyling</span>(<span class="kw">cells</span><span class="kw">=</span><span class="no">cells</span>, <span class="kw">baseStyleName</span><span class="kw">=</span><span class="st">"Cell"</span>)

<span class="co"># apply the red style for negative variance</span>
<span class="no">cells</span> <span class="kw">&lt;-</span> <span class="no">pt</span>$<span class="fu">findCells</span>(<span class="kw">calculationNames</span><span class="kw">=</span><span class="st">"Variance"</span>,
                      <span class="kw">minValue</span><span class="kw">=</span>-<span class="fl">1000</span>, <span class="kw">maxValue</span><span class="kw">=</span><span class="fl">0</span>,
                      <span class="kw">includeNull</span><span class="kw">=</span><span class="fl">FALSE</span>, <span class="kw">includeNA</span><span class="kw">=</span><span class="fl">FALSE</span>)
<span class="no">pt</span>$<span class="fu">setStyling</span>(<span class="kw">cells</span><span class="kw">=</span><span class="no">cells</span>, <span class="kw">declarations</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"color"</span><span class="kw">=</span><span class="st">"#9C0006"</span>))
<span class="co"># apply the green style for positive variance</span>
<span class="no">cells</span> <span class="kw">&lt;-</span> <span class="no">pt</span>$<span class="fu">findCells</span>(<span class="kw">calculationNames</span><span class="kw">=</span><span class="st">"Variance"</span>,
                      <span class="kw">minValue</span><span class="kw">=</span><span class="fl">0</span>, <span class="kw">maxValue</span><span class="kw">=</span><span class="fl">10000</span>,
                      <span class="kw">includeNull</span><span class="kw">=</span><span class="fl">FALSE</span>, <span class="kw">includeNA</span><span class="kw">=</span><span class="fl">FALSE</span>)
<span class="no">pt</span>$<span class="fu">setStyling</span>(<span class="kw">cells</span><span class="kw">=</span><span class="no">cells</span>, <span class="kw">declarations</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"color"</span><span class="kw">=</span><span class="st">"#006100"</span>))

<span class="co"># draw the pivot table</span>
<span class="no">pt</span>$<span class="fu">renderPivot</span>()</pre></body></html></div>
<div id="htmlwidget-35a943c60d4f49fbe928" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-35a943c60d4f49fbe928">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" colspan=\"7\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Budget<\/th>\n    <th class=\"ColumnHeader\">Actual<\/th>\n    <th class=\"ColumnHeader\">Variance<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"7\">Net entrepreneurial income<\/th>\n    <td class=\"OutlineCell\">2824.4<\/td>\n    <td class=\"OutlineCell\">2905.2<\/td>\n    <td class=\"OutlineCell\" style=\"color: #006100; \">80.8<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"19\">&nbsp;<\/th>\n    <th class=\"OutlineRowHeader\" colspan=\"6\">Net operating surplus<\/th>\n    <td class=\"OutlineCell\">3295.5<\/td>\n    <td class=\"OutlineCell\">3412.6<\/td>\n    <td class=\"OutlineCell\" style=\"color: #006100; \">117.1<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"14\">&nbsp;<\/th>\n    <th class=\"OutlineRowHeader\" colspan=\"5\">Factor income<\/th>\n    <td class=\"OutlineCell\">4540.5<\/td>\n    <td class=\"OutlineCell\">4641.9<\/td>\n    <td class=\"OutlineCell\" style=\"color: #006100; \">101.4<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"12\">&nbsp;<\/th>\n    <th class=\"OutlineRowHeader\" colspan=\"4\">Net value added<\/th>\n    <td class=\"OutlineCell\">1765.3<\/td>\n    <td class=\"OutlineCell\">1733.1<\/td>\n    <td class=\"OutlineCell\" style=\"color: #9C0006; \">-32.2<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"8\">&nbsp;<\/th>\n    <th class=\"OutlineRowHeader\" colspan=\"3\">Gross value added<\/th>\n    <td class=\"OutlineCell\">3852<\/td>\n    <td class=\"OutlineCell\">3718.1<\/td>\n    <td class=\"OutlineCell\" style=\"color: #9C0006; \">-133.9<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"6\">&nbsp;<\/th>\n    <th class=\"OutlineRowHeader\" colspan=\"2\">Production of the agricultural industry<\/th>\n    <td class=\"OutlineCell\">10151<\/td>\n    <td class=\"OutlineCell\">10783.4<\/td>\n    <td class=\"OutlineCell\" style=\"color: #006100; \">632.4<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"4\">&nbsp;<\/th>\n    <th class=\"RowHeader\" style=\"font-weight: normal; \">Crop production<\/th>\n    <td class=\"Cell\">4210.9<\/td>\n    <td class=\"Cell\">4373.7<\/td>\n    <td class=\"Cell\" style=\"color: #006100; \">162.8<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" style=\"font-weight: normal; \">Livestock production<\/th>\n    <td class=\"Cell\">4857.7<\/td>\n    <td class=\"Cell\">5307.6<\/td>\n    <td class=\"Cell\" style=\"color: #006100; \">449.9<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" style=\"font-weight: normal; \">Production of agricultural services<\/th>\n    <td class=\"Cell\">676.6<\/td>\n    <td class=\"Cell\">693.9<\/td>\n    <td class=\"Cell\" style=\"color: #006100; \">17.3<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" style=\"font-weight: normal; \">Other production<\/th>\n    <td class=\"Cell\">405.8<\/td>\n    <td class=\"Cell\">408.2<\/td>\n    <td class=\"Cell\" style=\"color: #006100; \">2.4<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"font-weight: normal; \" colspan=\"2\">Intermediate services<\/th>\n    <td class=\"Cell\">-6299<\/td>\n    <td class=\"Cell\">-7065.3<\/td>\n    <td class=\"Cell\" style=\"color: #9C0006; \">-766.3<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"font-weight: normal; \" colspan=\"3\">Depreciation<\/th>\n    <td class=\"Cell\">-2086.7<\/td>\n    <td class=\"Cell\">-1985<\/td>\n    <td class=\"Cell\" style=\"color: #006100; \">101.7<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"4\">Taxes and subsidies<\/th>\n    <td class=\"OutlineCell\">2775.2<\/td>\n    <td class=\"OutlineCell\">2908.8<\/td>\n    <td class=\"OutlineCell\" style=\"color: #006100; \">133.6<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"OutlineRowHeader\" style=\"font-weight: normal; \" colspan=\"3\">Other taxes on production<\/th>\n    <td class=\"Cell\">-145.4<\/td>\n    <td class=\"Cell\">-154.2<\/td>\n    <td class=\"Cell\" style=\"color: #9C0006; \">-8.8<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"font-weight: normal; \" colspan=\"3\">Other subsidies (non-product specific)<\/th>\n    <td class=\"Cell\">2920.6<\/td>\n    <td class=\"Cell\">3063<\/td>\n    <td class=\"Cell\" style=\"color: #006100; \">142.4<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"font-weight: normal; \" colspan=\"5\">Compensation of employees<\/th>\n    <td class=\"Cell\">-1245<\/td>\n    <td class=\"Cell\">-1229.3<\/td>\n    <td class=\"Cell\" style=\"color: #006100; \">15.7<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" colspan=\"6\">Interests and rents<\/th>\n    <td class=\"OutlineCell\">-471.1<\/td>\n    <td class=\"OutlineCell\">-507.4<\/td>\n    <td class=\"OutlineCell\" style=\"color: #9C0006; \">-36.3<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"OutlineRowHeader\" style=\"font-weight: normal; \" colspan=\"5\">Paid rent<\/th>\n    <td class=\"Cell\">-236.5<\/td>\n    <td class=\"Cell\">-268.2<\/td>\n    <td class=\"Cell\" style=\"color: #9C0006; \">-31.7<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"font-weight: normal; \" colspan=\"5\">Paid interest<\/th>\n    <td class=\"Cell\">-244.7<\/td>\n    <td class=\"Cell\">-250.3<\/td>\n    <td class=\"Cell\" style=\"color: #9C0006; \">-5.6<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"font-weight: normal; \" colspan=\"5\">Received interest<\/th>\n    <td class=\"Cell\">10.1<\/td>\n    <td class=\"Cell\">11.1<\/td>\n    <td class=\"Cell\" style=\"color: #006100; \">1.0<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="irregular-layout" class="section level2">
<h2 class="hasAnchor">
<a href="#irregular-layout" class="anchor"></a>Irregular Layout</h2>
<p>All of the pivot tables on this page have used regular layout, i.e. where each level of row or column data groups relates to only one variable. It is possible to construct custom pivot tables using irregular layout. See <a href="v11-irregularlayout.html">Irregular Layout</a> for details.</p>
</div>
<div id="further-reading" class="section level2">
<h2 class="hasAnchor">
<a href="#further-reading" class="anchor"></a>Further Reading</h2>
<p>The full set of vignettes is:</p>
<ol style="list-style-type: decimal">
<li><a href="v01-introduction.html">Introduction</a></li>
<li><a href="v02-datagroups.html">Data Groups</a></li>
<li><a href="v03-calculations.html">Calculations</a></li>
<li><a href="v04-regularlayout.html">Regular Layout</a></li>
<li><a href="v05-outputs.html">Outputs</a></li>
<li><a href="v06-latexoutput.html">Latex Output</a></li>
<li><a href="v07-styling.html">Styling</a></li>
<li><a href="v08-findingandformatting.html">Finding and Formatting</a></li>
<li><a href="v09-cellcontext.html">Cell Context</a></li>
<li><a href="v10-navigatingapivottable.html">Navigating a Pivot Table</a></li>
<li><a href="v11-irregularlayout.html">Irregular Layout</a></li>
<li><a href="v12-performance.html">Performance</a></li>
<li><a href="v13-excelexport.html">Excel Export</a></li>
<li><a href="v14-shiny.html">Shiny</a></li>
<li><a href="vA1-appendix.html">Appendix: Details</a></li>
<li><a href="vA2-appendix.html">Appendix: Calculations</a></li>
<li><a href="vA3-appendix.html">Appendix: Class Overview</a></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Christopher Bailiss.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '16a61fa9a8811ff537cd1a528040a9e1',
    indexName: 'pivottabler',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
