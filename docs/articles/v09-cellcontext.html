<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>09. Cell Context • pivottabler</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="09. Cell Context">
<meta property="og:description" content="pivottabler">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-64707587-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-64707587-2');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pivottabler</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/cbailiss/pivottabler/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="v09-cellcontext_files/htmlwidgets-1.5.1/htmlwidgets.js"></script><script src="v09-cellcontext_files/pivottabler-binding-1.4.0/pivottabler.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>09. Cell Context</h1>
                        <h4 class="author">Chris Bailiss</h4>
            
            <h4 class="date">2020-05-12</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/cbailiss/pivottabler/blob/master/vignettes/v09-cellcontext.Rmd"><code>vignettes/v09-cellcontext.Rmd</code></a></small>
      <div class="hidden name"><code>v09-cellcontext.Rmd</code></div>

    </div>

    
    
<div id="in-this-vignette" class="section level2">
<h2 class="hasAnchor">
<a href="#in-this-vignette" class="anchor"></a>In This Vignette</h2>
<ul>
<li>Overview</li>
<li>Example Pivot Table</li>
<li>What is “Cell Context”?</li>
<li>Showing Context/Filters</li>
<li>Cell Context and Calculations</li>
<li>Further Reading</li>
</ul>
</div>
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>This vignette provides some more information about the workings of <code>pivottabler</code> and in particular makes clearer how a pivot table is constructed.</p>
</div>
<div id="example-pivot-table" class="section level2">
<h2 class="hasAnchor">
<a href="#example-pivot-table" class="anchor"></a>Example Pivot Table</h2>
<p>The following pivot table is used as the basis of the examples in the rest of this vignette:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">renderPivot</span>()</pre></body></html></div>
<div id="htmlwidget-ba9707c415d66697b840" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-ba9707c415d66697b840">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Arriva Trains Wales<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">CrossCountry<\/th>\n    <td class=\"Cell\">22865<\/td>\n    <td class=\"Cell\">63<\/td>\n    <td class=\"Total\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">London Midland<\/th>\n    <td class=\"Cell\">14487<\/td>\n    <td class=\"Cell\">33792<\/td>\n    <td class=\"Total\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Virgin Trains<\/th>\n    <td class=\"Cell\">8594<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">34685<\/td>\n    <td class=\"Total\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="what-is-cell-context" class="section level2">
<h2 class="hasAnchor">
<a href="#what-is-cell-context" class="anchor"></a>What is “Cell Context”?</h2>
<p>Each cell in a pivot table will sit under one or more row and column headings (data groups). These headings determine the filters that are applied to the data to calculate the value of that cell. This is the cell context.</p>
<p>For example, in the pivot table below, the cell highlighted in green (value 33792) is subject to the following filters:</p>
<ul>
<li>TrainCategory = “Ordinary Passenger”</li>
<li>TOC = “London Midland”</li>
</ul>
<p>i.e. the “Ordinary Passenger” and “London Midland” row/column headings provide context that define the data filters for the cell.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">evaluatePivot</span>()
<span class="no">cells</span> <span class="kw">&lt;-</span> <span class="no">pt</span>$<span class="fu">getCells</span>(<span class="kw">specifyCellsAsList</span><span class="kw">=</span><span class="fl">TRUE</span>, <span class="kw">cellCoordinates</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">3</span>, <span class="fl">2</span>)))
<span class="no">pt</span>$<span class="fu">setStyling</span>(<span class="kw">cells</span><span class="kw">=</span><span class="no">cells</span>, <span class="kw">declarations</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"background-color"</span><span class="kw">=</span><span class="st">"#00FF00"</span>))
<span class="no">pt</span>$<span class="fu">renderPivot</span>()</pre></body></html></div>
<div id="htmlwidget-c4968f292cc0e554939d" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-c4968f292cc0e554939d">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Arriva Trains Wales<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">CrossCountry<\/th>\n    <td class=\"Cell\">22865<\/td>\n    <td class=\"Cell\">63<\/td>\n    <td class=\"Total\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">London Midland<\/th>\n    <td class=\"Cell\">14487<\/td>\n    <td class=\"Cell\" style=\"background-color: #00FF00; \">33792<\/td>\n    <td class=\"Total\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Virgin Trains<\/th>\n    <td class=\"Cell\">8594<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">34685<\/td>\n    <td class=\"Total\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="showing-contextfilters" class="section level2">
<h2 class="hasAnchor">
<a href="#showing-contextfilters" class="anchor"></a>Showing Context/Filters</h2>
<p>For illustrative purposes, it is possible to display the context/filters in a pivot table using the <code>includeHeaderValues</code> and <code>includeRCFilters</code> parameters when rendering a pivot table:</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">evaluatePivot</span>()
<span class="no">cells</span> <span class="kw">&lt;-</span> <span class="no">pt</span>$<span class="fu">getCells</span>(<span class="kw">specifyCellsAsList</span><span class="kw">=</span><span class="fl">TRUE</span>, <span class="kw">cellCoordinates</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">3</span>, <span class="fl">2</span>)))
<span class="no">pt</span>$<span class="fu">setStyling</span>(<span class="kw">cells</span><span class="kw">=</span><span class="no">cells</span>, <span class="kw">declarations</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"background-color"</span><span class="kw">=</span><span class="st">"#00FF00"</span>))
<span class="no">pt</span>$<span class="fu">renderPivot</span>(<span class="kw">includeHeaderValues</span><span class="kw">=</span><span class="fl">TRUE</span>, <span class="kw">includeRCFilters</span><span class="kw">=</span><span class="fl">TRUE</span>)</pre></body></html></div>
<div id="htmlwidget-12355556c347814eb283" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-12355556c347814eb283">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">\n      <p>Express Passenger<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n    <\/th>\n    <th class=\"ColumnHeader\">\n      <p>Ordinary Passenger<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n    <\/th>\n    <th class=\"ColumnHeader\">\n      <p>Total<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n    <\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">\n      <p>Arriva Trains Wales<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Arriva Trains Wales<\/li>\n      <\/ul>\n    <\/th>\n    <td class=\"Cell\">\n      <p>3079<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n    <\/td>\n    <td class=\"Cell\">\n      <p>830<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n    <\/td>\n    <td class=\"Total\">\n      <p>3909<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n    <\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">\n      <p>CrossCountry<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = CrossCountry<\/li>\n      <\/ul>\n    <\/th>\n    <td class=\"Cell\">\n      <p>22865<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = CrossCountry<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n    <\/td>\n    <td class=\"Cell\">\n      <p>63<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = CrossCountry<\/li>\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n    <\/td>\n    <td class=\"Total\">\n      <p>22928<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = CrossCountry<\/li>\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n    <\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">\n      <p>London Midland<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = London Midland<\/li>\n      <\/ul>\n    <\/th>\n    <td class=\"Cell\">\n      <p>14487<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = London Midland<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n    <\/td>\n    <td class=\"Cell\" style=\"background-color: #00FF00; \">\n      <p>33792<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = London Midland<\/li>\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n    <\/td>\n    <td class=\"Total\">\n      <p>48279<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = London Midland<\/li>\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n    <\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">\n      <p>Virgin Trains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Virgin Trains<\/li>\n      <\/ul>\n    <\/th>\n    <td class=\"Cell\">\n      <p>8594<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Virgin Trains<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n    <\/td>\n    <td class=\"Cell\">\n      <p><\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Virgin Trains<\/li>\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n    <\/td>\n    <td class=\"Total\">\n      <p>8594<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Virgin Trains<\/li>\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n    <\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">\n      <p>Total<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = ALL<\/li>\n      <\/ul>\n    <\/th>\n    <td class=\"Total\">\n      <p>49025<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = ALL<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n    <\/td>\n    <td class=\"Total\">\n      <p>34685<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = ALL<\/li>\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n    <\/td>\n    <td class=\"Total\">\n      <p>83710<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = ALL<\/li>\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n    <\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cell-context-and-calculations" class="section level2">
<h2 class="hasAnchor">
<a href="#cell-context-and-calculations" class="anchor"></a>Cell Context and Calculations</h2>
<p>There are four different ways a cell value can be calculated, as explained in the <a href="v02-datagroups.html">Data Groups</a> vignette. The calculation steps for each of these (and where the cell context fits in) are described below.</p>
<div id="method-1-summarising-values" class="section level3">
<h3 class="hasAnchor">
<a href="#method-1-summarising-values" class="anchor"></a>Method 1: Summarising Values</h3>
<p>This is the simplest case. The data frame is filtered using the cell filters. The summarise function is then applied to the filtered data to get the cell value.</p>
</div>
<div id="method-2-deriving-values-from-other-summarised-values" class="section level3">
<h3 class="hasAnchor">
<a href="#method-2-deriving-values-from-other-summarised-values" class="anchor"></a>Method 2: Deriving values from other summarised values</h3>
<p>The cell filters are not applied to these calculations. They are applied as part of the calculation of the summarised values that this derived value calculation is based on.</p>
<p>For example, in the “Method 2” example in the <a href="v02-datagroups.html">Data Groups</a> vignette, the cell filters are applied as part of the “Trains Arr. 5+ Mins Late” and “Total Trains” calculations (which are both “Method 1” summary calculations), but not as part of the “% Trains Arr. 5+ Mins Late” derived value calculation.</p>
</div>
<div id="method-3-custom-calculation-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#method-3-custom-calculation-functions" class="anchor"></a>Method 3: Custom calculation functions</h3>
<p>The cell filters are explicitly applied in code as part of the custom function definition. The author of the custom function has full control over if and when the cell filters are applied.</p>
<p>For example, in the “Method 3” example in the <a href="v02-datagroups.html">Data Groups</a> vignette, the cell filters are explicitly applied by the line <code>filteredTrains &lt;- pivotCalculator$getFilteredDataFrame(trains, netFilters)</code>. Here, the <code>netFilters</code> parameter is a <code>PivotFilters</code> object that contains the filters for the current cell. Remember, the custom function is invoked once for each cell in the pivot table that relates to that calculation.</p>
</div>
<div id="method-4-showing-a-value-no-calculation" class="section level3">
<h3 class="hasAnchor">
<a href="#method-4-showing-a-value-no-calculation" class="anchor"></a>Method 4: Showing a value (no calculation)</h3>
<p>The data frame is filtered using the cell filters. There should then only be one matching row. The value of the specified data frame column becomes the cell value. (If there is more than one row after the filtering, an error is raised).</p>
</div>
</div>
<div id="showing-further-cell-information" class="section level2">
<h2 class="hasAnchor">
<a href="#showing-further-cell-information" class="anchor"></a>Showing Further Cell Information</h2>
<p>It is possible to display more cell information as illustrated below:</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">evaluatePivot</span>()
<span class="no">cells</span> <span class="kw">&lt;-</span> <span class="no">pt</span>$<span class="fu">getCells</span>(<span class="kw">specifyCellsAsList</span><span class="kw">=</span><span class="fl">TRUE</span>, <span class="kw">cellCoordinates</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">3</span>, <span class="fl">2</span>)))
<span class="no">pt</span>$<span class="fu">setStyling</span>(<span class="kw">cells</span><span class="kw">=</span><span class="no">cells</span>, <span class="kw">declarations</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"background-color"</span><span class="kw">=</span><span class="st">"#00FF00"</span>))
<span class="no">pt</span>$<span class="fu">renderPivot</span>(<span class="kw">includeHeaderValues</span><span class="kw">=</span><span class="fl">TRUE</span>, <span class="kw">includeRCFilters</span><span class="kw">=</span><span class="fl">TRUE</span>,
               <span class="kw">includeCalculationFilters</span><span class="kw">=</span><span class="fl">TRUE</span>, <span class="kw">includeWorkingData</span><span class="kw">=</span><span class="fl">TRUE</span>, <span class="kw">includeEvaluationFilters</span><span class="kw">=</span><span class="fl">TRUE</span>,
               <span class="kw">includeCalculationNames</span><span class="kw">=</span><span class="fl">TRUE</span>, <span class="kw">includeRawValue</span><span class="kw">=</span><span class="fl">TRUE</span>, <span class="kw">includeTotalInfo</span><span class="kw">=</span><span class="fl">TRUE</span>)</pre></body></html></div>
<div id="htmlwidget-429e6d66c5f9fc26c8bb" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-429e6d66c5f9fc26c8bb">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">\n      <p>Express Passenger<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Totals: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>isTotal = FALSE<\/li>\n        <li>isLevelSubTotal = FALSE<\/li>\n        <li>isLevelTotal = FALSE<\/li>\n      <\/ul>\n    <\/th>\n    <th class=\"ColumnHeader\">\n      <p>Ordinary Passenger<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Totals: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>isTotal = FALSE<\/li>\n        <li>isLevelSubTotal = FALSE<\/li>\n        <li>isLevelTotal = FALSE<\/li>\n      <\/ul>\n    <\/th>\n    <th class=\"ColumnHeader\">\n      <p>Total<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Totals: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>isTotal = TRUE<\/li>\n        <li>isLevelSubTotal = FALSE<\/li>\n        <li>isLevelTotal = TRUE<\/li>\n      <\/ul>\n    <\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">\n      <p>Arriva Trains Wales<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Arriva Trains Wales<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Totals: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>isTotal = FALSE<\/li>\n        <li>isLevelSubTotal = FALSE<\/li>\n        <li>isLevelTotal = FALSE<\/li>\n      <\/ul>\n    <\/th>\n    <td class=\"Cell\">\n      <p>3079<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 3079<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: TotalTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No calculation filters<\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for TotalTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000001<\/li>\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n    <td class=\"Cell\">\n      <p>830<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 830<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: TotalTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No calculation filters<\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for TotalTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000001<\/li>\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n    <td class=\"Total\">\n      <p>3909<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 3909<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: TotalTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No calculation filters<\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for TotalTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000002<\/li>\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">\n      <p>CrossCountry<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = CrossCountry<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Totals: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>isTotal = FALSE<\/li>\n        <li>isLevelSubTotal = FALSE<\/li>\n        <li>isLevelTotal = FALSE<\/li>\n      <\/ul>\n    <\/th>\n    <td class=\"Cell\">\n      <p>22865<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 22865<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = CrossCountry<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: TotalTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No calculation filters<\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for TotalTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000001<\/li>\n        <li>TOC = CrossCountry<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n    <td class=\"Cell\">\n      <p>63<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 63<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = CrossCountry<\/li>\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: TotalTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No calculation filters<\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for TotalTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000001<\/li>\n        <li>TOC = CrossCountry<\/li>\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n    <td class=\"Total\">\n      <p>22928<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 22928<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = CrossCountry<\/li>\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: TotalTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No calculation filters<\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for TotalTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000002<\/li>\n        <li>TOC = CrossCountry<\/li>\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">\n      <p>London Midland<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = London Midland<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Totals: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>isTotal = FALSE<\/li>\n        <li>isLevelSubTotal = FALSE<\/li>\n        <li>isLevelTotal = FALSE<\/li>\n      <\/ul>\n    <\/th>\n    <td class=\"Cell\">\n      <p>14487<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 14487<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = London Midland<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: TotalTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No calculation filters<\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for TotalTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000001<\/li>\n        <li>TOC = London Midland<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n    <td class=\"Cell\" style=\"background-color: #00FF00; \">\n      <p>33792<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 33792<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = London Midland<\/li>\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: TotalTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No calculation filters<\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for TotalTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000001<\/li>\n        <li>TOC = London Midland<\/li>\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n    <td class=\"Total\">\n      <p>48279<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 48279<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = London Midland<\/li>\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: TotalTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No calculation filters<\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for TotalTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000002<\/li>\n        <li>TOC = London Midland<\/li>\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">\n      <p>Virgin Trains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Virgin Trains<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Totals: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>isTotal = FALSE<\/li>\n        <li>isLevelSubTotal = FALSE<\/li>\n        <li>isLevelTotal = FALSE<\/li>\n      <\/ul>\n    <\/th>\n    <td class=\"Cell\">\n      <p>8594<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 8594<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Virgin Trains<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: TotalTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No calculation filters<\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for TotalTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000001<\/li>\n        <li>TOC = Virgin Trains<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n    <td class=\"Cell\">\n      <p><\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = <\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Virgin Trains<\/li>\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: TotalTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No calculation filters<\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for TotalTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000001<\/li>\n        <li>TOC = Virgin Trains<\/li>\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n    <td class=\"Total\">\n      <p>8594<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 8594<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Virgin Trains<\/li>\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: TotalTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No calculation filters<\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for TotalTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000002<\/li>\n        <li>TOC = Virgin Trains<\/li>\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">\n      <p>Total<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = ALL<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Totals: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>isTotal = TRUE<\/li>\n        <li>isLevelSubTotal = FALSE<\/li>\n        <li>isLevelTotal = TRUE<\/li>\n      <\/ul>\n    <\/th>\n    <td class=\"Total\">\n      <p>49025<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 49025<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = ALL<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: TotalTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No calculation filters<\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for TotalTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000003<\/li>\n        <li>TOC = ALL<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n    <td class=\"Total\">\n      <p>34685<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 34685<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = ALL<\/li>\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: TotalTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No calculation filters<\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for TotalTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000003<\/li>\n        <li>TOC = ALL<\/li>\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n    <td class=\"Total\">\n      <p>83710<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 83710<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = ALL<\/li>\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: TotalTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No calculation filters<\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for TotalTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000004<\/li>\n        <li>TOC = ALL<\/li>\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = ALL<\/li>\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n    <\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script><p>The evaluation filters shown in each cell are the actual filters that were used when calculating the cell value. These are typically the same as the row-column filters. One notable exception is When filters are also specified as part of a calculation definition, i.e. when calculation filters are present. For example, calculating the percentage of trains that ran at the weekend (where only the “Arriva Trains Wales” train operating company is shown to reduce the size of the pivot table):</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">lubridate</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)

<span class="co"># get the date of each train and whether that date is a weekday or weekend</span>
<span class="no">trains</span> <span class="kw">&lt;-</span> <span class="no">bhmtrains</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">GbttDateTime</span><span class="kw">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="no">GbttArrival</span>), <span class="no">GbttDeparture</span>, <span class="no">GbttArrival</span>),
         <span class="kw">DayNumber</span><span class="kw">=</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/day.html">wday</a></span>(<span class="no">GbttDateTime</span>),
         <span class="kw">WeekdayOrWeekend</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="no">DayNumber</span> <span class="kw">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>,<span class="fl">7</span>), <span class="st">"Weekend"</span>, <span class="st">"Weekday"</span>))

<span class="co"># render the pivot table</span>
<span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
<span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">trains</span>)
<span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)
<span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="st">"TOC"</span>, <span class="kw">fromData</span><span class="kw">=</span><span class="fl">FALSE</span>,
                    <span class="kw">explicitListOfValues</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"Arriva Trains Wales"</span>), <span class="kw">addTotal</span><span class="kw">=</span><span class="fl">FALSE</span>)
<span class="no">weekendFilter</span> <span class="kw">&lt;-</span> <span class="no">PivotFilters</span>$<span class="fu">new</span>(<span class="no">pt</span>, <span class="kw">variableName</span><span class="kw">=</span><span class="st">"WeekdayOrWeekend"</span>, <span class="kw">values</span><span class="kw">=</span><span class="st">"Weekend"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"WeekendTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>,
                     <span class="kw">filters</span><span class="kw">=</span><span class="no">weekendFilter</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
<span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"WeekendTrainsPercentage"</span>,
                     <span class="kw">type</span><span class="kw">=</span><span class="st">"calculation"</span>, <span class="kw">basedOn</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"WeekendTrains"</span>, <span class="st">"TotalTrains"</span>),
                     <span class="kw">format</span><span class="kw">=</span><span class="st">"%.1f %%"</span>,
                     <span class="kw">calculationExpression</span><span class="kw">=</span><span class="st">"values$WeekendTrains/values$TotalTrains*100"</span>)
<span class="no">pt</span>$<span class="fu">addRowCalculationGroups</span>()
<span class="no">pt</span>$<span class="fu">renderPivot</span>(<span class="kw">includeHeaderValues</span><span class="kw">=</span><span class="fl">TRUE</span>, <span class="kw">includeRCFilters</span><span class="kw">=</span><span class="fl">TRUE</span>,
               <span class="kw">includeCalculationFilters</span><span class="kw">=</span><span class="fl">TRUE</span>, <span class="kw">includeWorkingData</span><span class="kw">=</span><span class="fl">TRUE</span>, <span class="kw">includeEvaluationFilters</span><span class="kw">=</span><span class="fl">TRUE</span>,
               <span class="kw">includeCalculationNames</span><span class="kw">=</span><span class="fl">TRUE</span>, <span class="kw">includeRawValue</span><span class="kw">=</span><span class="fl">TRUE</span>, <span class="kw">includeTotalInfo</span><span class="kw">=</span><span class="fl">TRUE</span>)</pre></body></html></div>
<div id="htmlwidget-dac485e60afe58a254d7" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-dac485e60afe58a254d7">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" colspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">\n      <p>Express Passenger<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Totals: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>isTotal = FALSE<\/li>\n        <li>isLevelSubTotal = FALSE<\/li>\n        <li>isLevelTotal = FALSE<\/li>\n      <\/ul>\n    <\/th>\n    <th class=\"ColumnHeader\">\n      <p>Ordinary Passenger<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Totals: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>isTotal = FALSE<\/li>\n        <li>isLevelSubTotal = FALSE<\/li>\n        <li>isLevelTotal = FALSE<\/li>\n      <\/ul>\n    <\/th>\n    <th class=\"ColumnHeader\">\n      <p>Total<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Totals: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>isTotal = TRUE<\/li>\n        <li>isLevelSubTotal = FALSE<\/li>\n        <li>isLevelTotal = TRUE<\/li>\n      <\/ul>\n    <\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">\n      <p>Arriva Trains Wales<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Arriva Trains Wales<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Totals: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>isTotal = FALSE<\/li>\n        <li>isLevelSubTotal = FALSE<\/li>\n        <li>isLevelTotal = FALSE<\/li>\n      <\/ul>\n    <\/th>\n    <th class=\"RowHeader\">\n      <p>WeekendTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\"><\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Totals: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>isTotal = FALSE<\/li>\n        <li>isLevelSubTotal = FALSE<\/li>\n        <li>isLevelTotal = FALSE<\/li>\n      <\/ul>\n    <\/th>\n    <td class=\"Cell\">\n      <p>820<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 820<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: WeekendTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>WeekdayOrWeekend = Weekend<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for WeekendTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000001<\/li>\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n        <li>WeekdayOrWeekend = Weekend<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n    <td class=\"Cell\">\n      <p>147<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 147<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: WeekendTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>WeekdayOrWeekend = Weekend<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for WeekendTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000001<\/li>\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = Ordinary Passenger<\/li>\n        <li>WeekdayOrWeekend = Weekend<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n    <td class=\"Total\">\n      <p>967<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 967<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: WeekendTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>WeekdayOrWeekend = Weekend<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for WeekendTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000002<\/li>\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = ALL<\/li>\n        <li>WeekdayOrWeekend = Weekend<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">\n      <p>TotalTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\"><\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Totals: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>isTotal = FALSE<\/li>\n        <li>isLevelSubTotal = FALSE<\/li>\n        <li>isLevelTotal = FALSE<\/li>\n      <\/ul>\n    <\/th>\n    <td class=\"Cell\">\n      <p>3079<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 3079<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: TotalTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No calculation filters<\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for TotalTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000003<\/li>\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n    <td class=\"Cell\">\n      <p>830<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 830<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: TotalTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No calculation filters<\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for TotalTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000003<\/li>\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n    <td class=\"Total\">\n      <p>3909<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 3909<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: TotalTrains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No calculation filters<\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for TotalTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000004<\/li>\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">\n      <p>WeekendTrainsPercentage<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\"><\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Totals: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>isTotal = FALSE<\/li>\n        <li>isLevelSubTotal = FALSE<\/li>\n        <li>isLevelTotal = FALSE<\/li>\n      <\/ul>\n    <\/th>\n    <td class=\"Cell\">\n      <p>26.6 %<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 26.6320233842157<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: WeekendTrainsPercentage<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No calculation filters<\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for WeekendTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>No batch<\/li>\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n        <li>WeekdayOrWeekend = Weekend<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for TotalTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>No batch<\/li>\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for WeekendTrainsPercentage:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000003<\/li>\n        <li>No working filters<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n    <td class=\"Cell\">\n      <p>17.7 %<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 17.710843373494<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: WeekendTrainsPercentage<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No calculation filters<\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for WeekendTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>No batch<\/li>\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = Ordinary Passenger<\/li>\n        <li>WeekdayOrWeekend = Weekend<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for TotalTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>No batch<\/li>\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = Ordinary Passenger<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for WeekendTrainsPercentage:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000003<\/li>\n        <li>No working filters<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n    <td class=\"Total\">\n      <p>24.7 %<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">raw value = 24.7377845996419<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Calc: default: WeekendTrainsPercentage<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Calc. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No calculation filters<\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for WeekendTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>No batch<\/li>\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = ALL<\/li>\n        <li>WeekdayOrWeekend = Weekend<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for TotalTrains:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>No batch<\/li>\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = ALL<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Working Data for WeekendTrainsPercentage:<\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>Batch = batch000004<\/li>\n        <li>No working filters<\/li>\n      <\/ul>\n      <p style=\"text-align: left; font-size: 75%;\">Eval. Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">No evaluation filters<\/ul>\n    <\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script><p>In the above example, for the WeekendTrains calculation, the calculation filters differ from the row-column filters.</p>
</div>
<div id="further-reading" class="section level2">
<h2 class="hasAnchor">
<a href="#further-reading" class="anchor"></a>Further Reading</h2>
<p>The full set of vignettes is:</p>
<ol style="list-style-type: decimal">
<li><a href="v01-introduction.html">Introduction</a></li>
<li><a href="v02-datagroups.html">Data Groups</a></li>
<li><a href="v03-calculations.html">Calculations</a></li>
<li><a href="v04-regularlayout.html">Regular Layout</a></li>
<li><a href="v05-outputs.html">Outputs</a></li>
<li><a href="v06-latexoutput.html">Latex Output</a></li>
<li><a href="v07-styling.html">Styling</a></li>
<li><a href="v08-findingandformatting.html">Finding and Formatting</a></li>
<li><a href="v09-cellcontext.html">Cell Context</a></li>
<li><a href="v10-navigatingapivottable.html">Navigating a Pivot Table</a></li>
<li><a href="v11-irregularlayout.html">Irregular Layout</a></li>
<li><a href="v12-performance.html">Performance</a></li>
<li><a href="v13-excelexport.html">Excel Export</a></li>
<li><a href="v14-shiny.html">Shiny</a></li>
<li><a href="vA1-appendix.html">Appendix: Details</a></li>
<li><a href="vA2-appendix.html">Appendix: Calculations</a></li>
<li><a href="vA3-appendix.html">Appendix: Class Overview</a></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Christopher Bailiss.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '16a61fa9a8811ff537cd1a528040a9e1',
    indexName: 'pivottabler',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
