<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>09. Irregular Layout • pivottabler</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="09. Irregular Layout">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-64707587-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-64707587-2');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pivottabler</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/v00-vignettes.html">pivottabler Vignettes</a>
    </li>
    <li>
      <a href="../articles/v01-introduction.html">01. Introduction</a>
    </li>
    <li>
      <a href="../articles/v02-datagroups.html">02. Data Groups</a>
    </li>
    <li>
      <a href="../articles/v03-calculations.html">03. Calculations</a>
    </li>
    <li>
      <a href="../articles/v04-regularlayout.html">04. Regular Layout</a>
    </li>
    <li>
      <a href="../articles/v05-outputs.html">04. Outputs</a>
    </li>
    <li>
      <a href="../articles/v06-latexoutput.html">05. Latex Output</a>
    </li>
    <li>
      <a href="../articles/v07-styling.html">06. Styling</a>
    </li>
    <li>
      <a href="../articles/v08-findingandformatting.html">07. Finding and Formatting</a>
    </li>
    <li>
      <a href="../articles/v09-cellcontext.html">08. Cell Context</a>
    </li>
    <li>
      <a href="../articles/v10-irregularlayout.html">09. Irregular Layout</a>
    </li>
    <li>
      <a href="../articles/v11-performance.html">10. Performance</a>
    </li>
    <li>
      <a href="../articles/v12-excelexport.html">12. Excel Export</a>
    </li>
    <li>
      <a href="../articles/v13-shiny.html">11. Shiny</a>
    </li>
    <li>
      <a href="../articles/vA1-appendix.html">A1. Appendix:  Details</a>
    </li>
    <li>
      <a href="../articles/vA2-appendix.html">A2. Appendix:  Calculations</a>
    </li>
    <li>
      <a href="../articles/vA3-appendix.html">A3. Appendix:  Class Overview</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/cbailiss/pivottabler">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="v10-irregularlayout_files/htmlwidgets-1.5.1/htmlwidgets.js"></script><script src="v10-irregularlayout_files/pivottabler-binding-1.3.0/pivottabler.js"></script><script src="v10-irregularlayout_files/basictabler-binding-0.3.0/basictabler.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>09. Irregular Layout</h1>
                        <h4 class="author">Chris Bailiss</h4>
            
            <h4 class="date">2020-02-15</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/cbailiss/pivottabler/blob/master/vignettes/v10-irregularlayout.Rmd"><code>vignettes/v10-irregularlayout.Rmd</code></a></small>
      <div class="hidden name"><code>v10-irregularlayout.Rmd</code></div>

    </div>

    
    
<div id="in-this-vignette" class="section level2">
<h2 class="hasAnchor">
<a href="#in-this-vignette" class="anchor"></a>In This Vignette</h2>
<ul>
<li>Introductory Note</li>
<li>What is Irregular Layout?</li>
<li>Caution</li>
<li>Simple Example of an Irregular Layout</li>
<li>Extending the Simple Example</li>
<li>Another Example</li>
<li>Multiple Calculation Groups</li>
<li>Combining Multiple Pivot Tables</li>
<li>Custom Layout Changes</li>
<li>Further Reading</li>
</ul>
</div>
<div id="introductory-note" class="section level2">
<h2 class="hasAnchor">
<a href="#introductory-note" class="anchor"></a>Introductory Note</h2>
<p>This is a more advanced topic. It requires a good understanding of the material in the previous vignettes.</p>
</div>
<div id="what-is-irregular-layout" class="section level2">
<h2 class="hasAnchor">
<a href="#what-is-irregular-layout" class="anchor"></a>What is Irregular Layout?</h2>
<p>Let’s start by talking about regular layout. The following is an example pivot table that has appeared in previous vignettes:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(pivottabler)</a>
<a class="sourceLine" id="cb1-2" title="2">pt &lt;-<span class="st"> </span>PivotTable<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb1-3" title="3">pt<span class="op">$</span><span class="kw">addData</span>(bhmtrains)</a>
<a class="sourceLine" id="cb1-4" title="4">pt<span class="op">$</span><span class="kw">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)</a>
<a class="sourceLine" id="cb1-5" title="5">pt<span class="op">$</span><span class="kw">addColumnDataGroups</span>(<span class="st">"PowerType"</span>)</a>
<a class="sourceLine" id="cb1-6" title="6">pt<span class="op">$</span><span class="kw">addRowDataGroups</span>(<span class="st">"TOC"</span>)</a>
<a class="sourceLine" id="cb1-7" title="7">pt<span class="op">$</span><span class="kw">defineCalculation</span>(<span class="dt">calculationName=</span><span class="st">"TotalTrains"</span>, <span class="dt">summariseExpression=</span><span class="st">"n()"</span>)</a>
<a class="sourceLine" id="cb1-8" title="8">pt<span class="op">$</span><span class="kw">renderPivot</span>()</a></code></pre></div>
<div id="htmlwidget-b185c9b5e860844dd82b" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-b185c9b5e860844dd82b">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\" colspan=\"4\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\" colspan=\"3\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"ColumnHeader\">DMU<\/th>\n    <th class=\"ColumnHeader\">EMU<\/th>\n    <th class=\"ColumnHeader\">HST<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n    <th class=\"ColumnHeader\">DMU<\/th>\n    <th class=\"ColumnHeader\">EMU<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n    <th class=\"ColumnHeader\"><\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Arriva Trains Wales<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">3079<\/td>\n    <td class=\"Cell\">830<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">CrossCountry<\/th>\n    <td class=\"Cell\">22133<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\">732<\/td>\n    <td class=\"Total\">22865<\/td>\n    <td class=\"Cell\">63<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">63<\/td>\n    <td class=\"Total\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">London Midland<\/th>\n    <td class=\"Cell\">5638<\/td>\n    <td class=\"Cell\">8849<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">14487<\/td>\n    <td class=\"Cell\">5591<\/td>\n    <td class=\"Cell\">28201<\/td>\n    <td class=\"Total\">33792<\/td>\n    <td class=\"Total\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Virgin Trains<\/th>\n    <td class=\"Cell\">2137<\/td>\n    <td class=\"Cell\">6457<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">8594<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\"><\/td>\n    <td class=\"Total\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">32987<\/td>\n    <td class=\"Total\">15306<\/td>\n    <td class=\"Total\">732<\/td>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">6484<\/td>\n    <td class=\"Total\">28201<\/td>\n    <td class=\"Total\">34685<\/td>\n    <td class=\"Total\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script><p>This is a regular pivot table: Each level of row and column headings is related to a single variable only, i.e.</p>
<ul>
<li>The first level of column headings (“Express Passenger”, “Ordinary Passenger”, etc.) are all related to the “TrainCategory” variable.</li>
<li>The second level of column headings (“DMU”, “EMU”, etc.) are all related to the “PowerType” variable.</li>
<li>The first level of row headings (“Arriva Trains Wales”, “CrossCountry”, etc.) are all related to the “TOC” (Train Operating Company) variable.</li>
</ul>
<p>Returning to the original question (What is irregular layout?), the definition for our purposes is: Irregular layout is any layout where a single level of row or column headings relates to more than one variable.</p>
</div>
<div id="caution" class="section level2">
<h2 class="hasAnchor">
<a href="#caution" class="anchor"></a>Caution</h2>
<p>Irregular layouts inevitably require more effort to construct. Irregular layouts also tend to be harder to understand, so they need careful consideration before being used. Often using multiple separate regular pivot tables is a better idea.</p>
</div>
<div id="simple-example-of-an-irregular-layout" class="section level2">
<h2 class="hasAnchor">
<a href="#simple-example-of-an-irregular-layout" class="anchor"></a>Simple Example of an Irregular Layout</h2>
<p>Constructing pivot tables that have an irregular layout typically requires more lines of R. This is because the helper functions <code>addColumnDataGroups()</code> and <code>addRowDataGroups()</code> that have been used throughout all of the previous vignettes to easily build-up the structure of a pivot table can no longer be used, since they generate a regular layout only. Instead the layout must be built in a more granular way.</p>
<p>For example, consider we are only interested in the number of express trains (i.e. TrainCategory=“Express Passenger”) and the number of DMU trains (i.e. PowerType=“DMU”), for each train operating company. Since these requirements relate to two different variables, we need to construct an irregular layout. To do this, these two data groups are added individually to the root column group:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(pivottabler)</a>
<a class="sourceLine" id="cb2-2" title="2">pt &lt;-<span class="st"> </span>PivotTable<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb2-3" title="3">pt<span class="op">$</span><span class="kw">addData</span>(bhmtrains)</a>
<a class="sourceLine" id="cb2-4" title="4">pt<span class="op">$</span><span class="kw">addColumnGroup</span>(<span class="dt">variableName=</span><span class="st">"TrainCategory"</span>, <span class="dt">values=</span><span class="st">"Express Passenger"</span>)</a>
<a class="sourceLine" id="cb2-5" title="5">pt<span class="op">$</span><span class="kw">addColumnGroup</span>(<span class="dt">variableName=</span><span class="st">"PowerType"</span>, <span class="dt">values=</span><span class="st">"DMU"</span>)</a>
<a class="sourceLine" id="cb2-6" title="6">pt<span class="op">$</span><span class="kw">addRowDataGroups</span>(<span class="st">"TOC"</span>)</a>
<a class="sourceLine" id="cb2-7" title="7">pt<span class="op">$</span><span class="kw">defineCalculation</span>(<span class="dt">calculationName=</span><span class="st">"TotalTrains"</span>, <span class="dt">summariseExpression=</span><span class="st">"n()"</span>)</a>
<a class="sourceLine" id="cb2-8" title="8">pt<span class="op">$</span><span class="kw">renderPivot</span>()</a></code></pre></div>
<div id="htmlwidget-a9fb93188f714615bb4a" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-a9fb93188f714615bb4a">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">DMU<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Arriva Trains Wales<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">CrossCountry<\/th>\n    <td class=\"Cell\">22865<\/td>\n    <td class=\"Cell\">22196<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">London Midland<\/th>\n    <td class=\"Cell\">14487<\/td>\n    <td class=\"Cell\">11229<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Virgin Trains<\/th>\n    <td class=\"Cell\">8594<\/td>\n    <td class=\"Cell\">2137<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">39471<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script><p>The functions <code>pt$addColumnGroup()</code> and <code>pt$addRowGroup()</code> add a single data group at the top level of the pivot table, where the variable name and value are explicitly specified.</p>
<p>No totals column is added to the above pivot table. This wouldn’t make sense for this pivot table anyway, since some express passenger trains are also DMU trains, so a simple total would double count some trains.</p>
<p>Showing the cell context, as described in the <a href="v09-cellcontext.html">Cell Context</a> vignette, makes the irregularity clearer:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(pivottabler)</a>
<a class="sourceLine" id="cb3-2" title="2">pt &lt;-<span class="st"> </span>PivotTable<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb3-3" title="3">pt<span class="op">$</span><span class="kw">addData</span>(bhmtrains)</a>
<a class="sourceLine" id="cb3-4" title="4">pt<span class="op">$</span><span class="kw">addColumnGroup</span>(<span class="dt">variableName=</span><span class="st">"TrainCategory"</span>, <span class="dt">values=</span><span class="st">"Express Passenger"</span>)</a>
<a class="sourceLine" id="cb3-5" title="5">pt<span class="op">$</span><span class="kw">addColumnGroup</span>(<span class="dt">variableName=</span><span class="st">"PowerType"</span>, <span class="dt">values=</span><span class="st">"DMU"</span>)</a>
<a class="sourceLine" id="cb3-6" title="6">pt<span class="op">$</span><span class="kw">addRowDataGroups</span>(<span class="st">"TOC"</span>)</a>
<a class="sourceLine" id="cb3-7" title="7">pt<span class="op">$</span><span class="kw">defineCalculation</span>(<span class="dt">calculationName=</span><span class="st">"TotalTrains"</span>, <span class="dt">summariseExpression=</span><span class="st">"n()"</span>)</a>
<a class="sourceLine" id="cb3-8" title="8">pt<span class="op">$</span><span class="kw">renderPivot</span>(<span class="dt">includeHeaderValues=</span><span class="ot">TRUE</span>, <span class="dt">includeRCFilters=</span><span class="ot">TRUE</span>)</a></code></pre></div>
<div id="htmlwidget-3738d64bf2082391f565" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-3738d64bf2082391f565">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">\n      <p>Express Passenger<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n    <\/th>\n    <th class=\"ColumnHeader\">\n      <p>DMU<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>PowerType = DMU<\/li>\n      <\/ul>\n    <\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">\n      <p>Arriva Trains Wales<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Arriva Trains Wales<\/li>\n      <\/ul>\n    <\/th>\n    <td class=\"Cell\">\n      <p>3079<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n    <\/td>\n    <td class=\"Cell\">\n      <p>3909<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Arriva Trains Wales<\/li>\n        <li>PowerType = DMU<\/li>\n      <\/ul>\n    <\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">\n      <p>CrossCountry<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = CrossCountry<\/li>\n      <\/ul>\n    <\/th>\n    <td class=\"Cell\">\n      <p>22865<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = CrossCountry<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n    <\/td>\n    <td class=\"Cell\">\n      <p>22196<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = CrossCountry<\/li>\n        <li>PowerType = DMU<\/li>\n      <\/ul>\n    <\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">\n      <p>London Midland<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = London Midland<\/li>\n      <\/ul>\n    <\/th>\n    <td class=\"Cell\">\n      <p>14487<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = London Midland<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n    <\/td>\n    <td class=\"Cell\">\n      <p>11229<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = London Midland<\/li>\n        <li>PowerType = DMU<\/li>\n      <\/ul>\n    <\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">\n      <p>Virgin Trains<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Virgin Trains<\/li>\n      <\/ul>\n    <\/th>\n    <td class=\"Cell\">\n      <p>8594<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Virgin Trains<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n    <\/td>\n    <td class=\"Cell\">\n      <p>2137<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = Virgin Trains<\/li>\n        <li>PowerType = DMU<\/li>\n      <\/ul>\n    <\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">\n      <p>Total<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = ALL<\/li>\n      <\/ul>\n    <\/th>\n    <td class=\"Total\">\n      <p>49025<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = ALL<\/li>\n        <li>TrainCategory = Express Passenger<\/li>\n      <\/ul>\n    <\/td>\n    <td class=\"Total\">\n      <p>39471<\/p>\n      <p style=\"text-align: left; font-size: 75%;\">RC Filters: <\/p>\n      <ul style=\"text-align: left; font-size: 75%; padding-left: 1em;\">\n        <li>TOC = ALL<\/li>\n        <li>PowerType = DMU<\/li>\n      <\/ul>\n    <\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="extending-the-simple-example" class="section level2">
<h2 class="hasAnchor">
<a href="#extending-the-simple-example" class="anchor"></a>Extending the Simple Example</h2>
<p>Further data groups can be added to the pivot table. These data groups can be regular or irregular. Several different examples are shown below. These examples are rather contrived for demonstration purposes.</p>
<p>If a regular level is desired, this can simply be added using the regular <code>addColumnDataGroups()</code> and <code>addRowDataGroups()</code> functions, for example adding the train status:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(pivottabler)</a>
<a class="sourceLine" id="cb4-2" title="2">pt &lt;-<span class="st"> </span>PivotTable<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb4-3" title="3">pt<span class="op">$</span><span class="kw">addData</span>(bhmtrains)</a>
<a class="sourceLine" id="cb4-4" title="4">pt<span class="op">$</span><span class="kw">addColumnGroup</span>(<span class="dt">variableName=</span><span class="st">"TrainCategory"</span>, <span class="dt">values=</span><span class="st">"Express Passenger"</span>)</a>
<a class="sourceLine" id="cb4-5" title="5">pt<span class="op">$</span><span class="kw">addColumnGroup</span>(<span class="dt">variableName=</span><span class="st">"PowerType"</span>, <span class="dt">values=</span><span class="st">"DMU"</span>)</a>
<a class="sourceLine" id="cb4-6" title="6">pt<span class="op">$</span><span class="kw">addColumnDataGroups</span>(<span class="st">"Status"</span>)</a>
<a class="sourceLine" id="cb4-7" title="7">pt<span class="op">$</span><span class="kw">addRowDataGroups</span>(<span class="st">"TOC"</span>)</a>
<a class="sourceLine" id="cb4-8" title="8">pt<span class="op">$</span><span class="kw">defineCalculation</span>(<span class="dt">calculationName=</span><span class="st">"TotalTrains"</span>, <span class="dt">summariseExpression=</span><span class="st">"n()"</span>)</a>
<a class="sourceLine" id="cb4-9" title="9">pt<span class="op">$</span><span class="kw">renderPivot</span>()</a></code></pre></div>
<div id="htmlwidget-c04b30bc5f3d9e828539" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-c04b30bc5f3d9e828539">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\" colspan=\"4\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\" colspan=\"4\">DMU<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"ColumnHeader\">A<\/th>\n    <th class=\"ColumnHeader\">C<\/th>\n    <th class=\"ColumnHeader\">R<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n    <th class=\"ColumnHeader\">A<\/th>\n    <th class=\"ColumnHeader\">C<\/th>\n    <th class=\"ColumnHeader\">R<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Arriva Trains Wales<\/th>\n    <td class=\"Cell\">3018<\/td>\n    <td class=\"Cell\">59<\/td>\n    <td class=\"Cell\">2<\/td>\n    <td class=\"Total\">3079<\/td>\n    <td class=\"Cell\">3833<\/td>\n    <td class=\"Cell\">74<\/td>\n    <td class=\"Cell\">2<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">CrossCountry<\/th>\n    <td class=\"Cell\">22270<\/td>\n    <td class=\"Cell\">569<\/td>\n    <td class=\"Cell\">26<\/td>\n    <td class=\"Total\">22865<\/td>\n    <td class=\"Cell\">21621<\/td>\n    <td class=\"Cell\">548<\/td>\n    <td class=\"Cell\">27<\/td>\n    <td class=\"Total\">22196<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">London Midland<\/th>\n    <td class=\"Cell\">14133<\/td>\n    <td class=\"Cell\">336<\/td>\n    <td class=\"Cell\">18<\/td>\n    <td class=\"Total\">14487<\/td>\n    <td class=\"Cell\">11054<\/td>\n    <td class=\"Cell\">168<\/td>\n    <td class=\"Cell\">7<\/td>\n    <td class=\"Total\">11229<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Virgin Trains<\/th>\n    <td class=\"Cell\">8359<\/td>\n    <td class=\"Cell\">226<\/td>\n    <td class=\"Cell\">9<\/td>\n    <td class=\"Total\">8594<\/td>\n    <td class=\"Cell\">2028<\/td>\n    <td class=\"Cell\">107<\/td>\n    <td class=\"Cell\">2<\/td>\n    <td class=\"Total\">2137<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">47780<\/td>\n    <td class=\"Total\">1190<\/td>\n    <td class=\"Total\">55<\/td>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">38536<\/td>\n    <td class=\"Total\">897<\/td>\n    <td class=\"Total\">38<\/td>\n    <td class=\"Total\">39471<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script><p>The <code>addColumnGroup()</code> and <code>addRowGroup()</code> functions return the new data group that has been added. The <code>addChildGroup()</code> function can be called on each of these groups to add further groups underneath:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(pivottabler)</a>
<a class="sourceLine" id="cb5-2" title="2">pt &lt;-<span class="st"> </span>PivotTable<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb5-3" title="3">pt<span class="op">$</span><span class="kw">addData</span>(bhmtrains)</a>
<a class="sourceLine" id="cb5-4" title="4">cg1 &lt;-<span class="st"> </span>pt<span class="op">$</span><span class="kw">addColumnGroup</span>(<span class="dt">variableName=</span><span class="st">"TrainCategory"</span>, <span class="dt">values=</span><span class="st">"Express Passenger"</span>)</a>
<a class="sourceLine" id="cb5-5" title="5">cg2 &lt;-<span class="st"> </span>pt<span class="op">$</span><span class="kw">addColumnGroup</span>(<span class="dt">variableName=</span><span class="st">"PowerType"</span>, <span class="dt">values=</span><span class="st">"DMU"</span>)</a>
<a class="sourceLine" id="cb5-6" title="6">cg1<span class="op">$</span><span class="kw">addChildGroup</span>(<span class="dt">variableName=</span><span class="st">"Status"</span>, <span class="dt">values=</span><span class="st">"A"</span>)</a>
<a class="sourceLine" id="cb5-7" title="7">cg1<span class="op">$</span><span class="kw">addChildGroup</span>(<span class="dt">variableName=</span><span class="st">"Status"</span>, <span class="dt">values=</span><span class="st">"R"</span>)</a>
<a class="sourceLine" id="cb5-8" title="8">cg2<span class="op">$</span><span class="kw">addChildGroup</span>(<span class="dt">variableName=</span><span class="st">"SchedSpeedMPH"</span>, <span class="dt">values=</span><span class="st">"100"</span>)</a>
<a class="sourceLine" id="cb5-9" title="9">pt<span class="op">$</span><span class="kw">addRowDataGroups</span>(<span class="st">"TOC"</span>)</a>
<a class="sourceLine" id="cb5-10" title="10">pt<span class="op">$</span><span class="kw">defineCalculation</span>(<span class="dt">calculationName=</span><span class="st">"TotalTrains"</span>, <span class="dt">summariseExpression=</span><span class="st">"n()"</span>)</a>
<a class="sourceLine" id="cb5-11" title="11">pt<span class="op">$</span><span class="kw">renderPivot</span>()</a></code></pre></div>
<div id="htmlwidget-9188afe08aa8854e21e2" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-9188afe08aa8854e21e2">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\" colspan=\"2\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">DMU<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"ColumnHeader\">A<\/th>\n    <th class=\"ColumnHeader\">R<\/th>\n    <th class=\"ColumnHeader\">100<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Arriva Trains Wales<\/th>\n    <td class=\"Cell\">3018<\/td>\n    <td class=\"Cell\">2<\/td>\n    <td class=\"Cell\"><\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">CrossCountry<\/th>\n    <td class=\"Cell\">22270<\/td>\n    <td class=\"Cell\">26<\/td>\n    <td class=\"Cell\">11024<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">London Midland<\/th>\n    <td class=\"Cell\">14133<\/td>\n    <td class=\"Cell\">18<\/td>\n    <td class=\"Cell\">2723<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Virgin Trains<\/th>\n    <td class=\"Cell\">8359<\/td>\n    <td class=\"Cell\">9<\/td>\n    <td class=\"Cell\"><\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">47780<\/td>\n    <td class=\"Total\">55<\/td>\n    <td class=\"Total\">13747<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script><p>Instead of adding groups one at a time, the <code>addDataGroups()</code> function can be called on these data groups to add different data groups for different variables underneath each:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(pivottabler)</a>
<a class="sourceLine" id="cb6-2" title="2">pt &lt;-<span class="st"> </span>PivotTable<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb6-3" title="3">pt<span class="op">$</span><span class="kw">addData</span>(bhmtrains)</a>
<a class="sourceLine" id="cb6-4" title="4">cg1 &lt;-<span class="st"> </span>pt<span class="op">$</span><span class="kw">addColumnGroup</span>(<span class="dt">variableName=</span><span class="st">"TrainCategory"</span>, <span class="dt">values=</span><span class="st">"Express Passenger"</span>)</a>
<a class="sourceLine" id="cb6-5" title="5">cg2 &lt;-<span class="st"> </span>pt<span class="op">$</span><span class="kw">addColumnGroup</span>(<span class="dt">variableName=</span><span class="st">"PowerType"</span>, <span class="dt">values=</span><span class="st">"DMU"</span>)</a>
<a class="sourceLine" id="cb6-6" title="6">cg1<span class="op">$</span><span class="kw">addDataGroups</span>(<span class="st">"Status"</span>)</a>
<a class="sourceLine" id="cb6-7" title="7">cg2<span class="op">$</span><span class="kw">addDataGroups</span>(<span class="st">"SchedSpeedMPH"</span>)</a>
<a class="sourceLine" id="cb6-8" title="8">pt<span class="op">$</span><span class="kw">addRowDataGroups</span>(<span class="st">"TOC"</span>)</a>
<a class="sourceLine" id="cb6-9" title="9">pt<span class="op">$</span><span class="kw">defineCalculation</span>(<span class="dt">calculationName=</span><span class="st">"TotalTrains"</span>, <span class="dt">summariseExpression=</span><span class="st">"n()"</span>)</a>
<a class="sourceLine" id="cb6-10" title="10">pt<span class="op">$</span><span class="kw">renderPivot</span>()</a></code></pre></div>
<div id="htmlwidget-283cc1367552db4e9fd1" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-283cc1367552db4e9fd1">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\" colspan=\"4\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\" colspan=\"6\">DMU<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"ColumnHeader\">A<\/th>\n    <th class=\"ColumnHeader\">C<\/th>\n    <th class=\"ColumnHeader\">R<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n    <th class=\"ColumnHeader\">75<\/th>\n    <th class=\"ColumnHeader\">90<\/th>\n    <th class=\"ColumnHeader\">100<\/th>\n    <th class=\"ColumnHeader\">125<\/th>\n    <th class=\"ColumnHeader\">NA<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Arriva Trains Wales<\/th>\n    <td class=\"Cell\">3018<\/td>\n    <td class=\"Cell\">59<\/td>\n    <td class=\"Cell\">2<\/td>\n    <td class=\"Total\">3079<\/td>\n    <td class=\"Cell\">121<\/td>\n    <td class=\"Cell\">3761<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\">27<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">CrossCountry<\/th>\n    <td class=\"Cell\">22270<\/td>\n    <td class=\"Cell\">569<\/td>\n    <td class=\"Cell\">26<\/td>\n    <td class=\"Total\">22865<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\">11024<\/td>\n    <td class=\"Cell\">11040<\/td>\n    <td class=\"Cell\">132<\/td>\n    <td class=\"Total\">22196<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">London Midland<\/th>\n    <td class=\"Cell\">14133<\/td>\n    <td class=\"Cell\">336<\/td>\n    <td class=\"Cell\">18<\/td>\n    <td class=\"Total\">14487<\/td>\n    <td class=\"Cell\">6104<\/td>\n    <td class=\"Cell\">2399<\/td>\n    <td class=\"Cell\">2723<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\">3<\/td>\n    <td class=\"Total\">11229<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Virgin Trains<\/th>\n    <td class=\"Cell\">8359<\/td>\n    <td class=\"Cell\">226<\/td>\n    <td class=\"Cell\">9<\/td>\n    <td class=\"Total\">8594<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\">2135<\/td>\n    <td class=\"Cell\">2<\/td>\n    <td class=\"Total\">2137<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">47780<\/td>\n    <td class=\"Total\">1190<\/td>\n    <td class=\"Total\">55<\/td>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">6225<\/td>\n    <td class=\"Total\">6160<\/td>\n    <td class=\"Total\">13747<\/td>\n    <td class=\"Total\">13175<\/td>\n    <td class=\"Total\">164<\/td>\n    <td class=\"Total\">39471<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="iterating-groups" class="section level2">
<h2 class="hasAnchor">
<a href="#iterating-groups" class="anchor"></a>Iterating Groups</h2>
<p>The <code>addColumnDataGroups()</code>, <code>addRowDataGroups()</code> and <code>addDataGroups()</code> functions<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> all return zero, one or multiple data groups, in the form of an R list. This list can be iterated or used with functions such as <code><a href="https://rdrr.io/r/base/lapply.html">lapply()</a></code> in the usual ways. Each data group has a set of properties that can be used to examine the group. For example, adding further child groups:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(pivottabler)</a>
<a class="sourceLine" id="cb7-2" title="2">pt &lt;-<span class="st"> </span>PivotTable<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb7-3" title="3">pt<span class="op">$</span><span class="kw">addData</span>(bhmtrains)</a>
<a class="sourceLine" id="cb7-4" title="4">pt<span class="op">$</span><span class="kw">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)</a>
<a class="sourceLine" id="cb7-5" title="5">cgrps &lt;-<span class="st"> </span>pt<span class="op">$</span><span class="kw">addColumnDataGroups</span>(<span class="st">"PowerType"</span>, <span class="dt">addTotal=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb7-6" title="6">add2Groups &lt;-<span class="st"> </span><span class="cf">function</span>(grp) {</a>
<a class="sourceLine" id="cb7-7" title="7">  <span class="cf">if</span>(<span class="op">!</span>grp<span class="op">$</span>isTotal) {</a>
<a class="sourceLine" id="cb7-8" title="8">    grp<span class="op">$</span><span class="kw">addChildGroup</span>(<span class="dt">variableName=</span><span class="st">"Status"</span>, <span class="dt">values=</span><span class="st">"A"</span>)</a>
<a class="sourceLine" id="cb7-9" title="9">    grp<span class="op">$</span><span class="kw">addChildGroup</span>(<span class="dt">variableName=</span><span class="st">"Status"</span>, <span class="dt">values=</span><span class="st">"R"</span>)</a>
<a class="sourceLine" id="cb7-10" title="10">  }</a>
<a class="sourceLine" id="cb7-11" title="11">}</a>
<a class="sourceLine" id="cb7-12" title="12"><span class="kw"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(cgrps, add2Groups))</a>
<a class="sourceLine" id="cb7-13" title="13">pt<span class="op">$</span><span class="kw">addRowDataGroups</span>(<span class="st">"TOC"</span>)</a>
<a class="sourceLine" id="cb7-14" title="14">pt<span class="op">$</span><span class="kw">defineCalculation</span>(<span class="dt">calculationName=</span><span class="st">"TotalTrains"</span>, <span class="dt">summariseExpression=</span><span class="st">"n()"</span>)</a>
<a class="sourceLine" id="cb7-15" title="15">pt<span class="op">$</span><span class="kw">renderPivot</span>()</a></code></pre></div>
<div id="htmlwidget-1394b8a9d451b25abd2f" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-1394b8a9d451b25abd2f">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\" colspan=\"6\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\" colspan=\"4\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"ColumnHeader\" colspan=\"2\">DMU<\/th>\n    <th class=\"ColumnHeader\" colspan=\"2\">EMU<\/th>\n    <th class=\"ColumnHeader\" colspan=\"2\">HST<\/th>\n    <th class=\"ColumnHeader\" colspan=\"2\">DMU<\/th>\n    <th class=\"ColumnHeader\" colspan=\"2\">EMU<\/th>\n    <th class=\"ColumnHeader\"><\/th>\n  <\/tr>\n  <tr>\n    <th class=\"ColumnHeader\">A<\/th>\n    <th class=\"ColumnHeader\">R<\/th>\n    <th class=\"ColumnHeader\">A<\/th>\n    <th class=\"ColumnHeader\">R<\/th>\n    <th class=\"ColumnHeader\">A<\/th>\n    <th class=\"ColumnHeader\">R<\/th>\n    <th class=\"ColumnHeader\">A<\/th>\n    <th class=\"ColumnHeader\">R<\/th>\n    <th class=\"ColumnHeader\">A<\/th>\n    <th class=\"ColumnHeader\">R<\/th>\n    <th class=\"ColumnHeader\"><\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Arriva Trains Wales<\/th>\n    <td class=\"Cell\">3018<\/td>\n    <td class=\"Cell\">2<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\">815<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">CrossCountry<\/th>\n    <td class=\"Cell\">21561<\/td>\n    <td class=\"Cell\">26<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\">709<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\">60<\/td>\n    <td class=\"Cell\">1<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">London Midland<\/th>\n    <td class=\"Cell\">5534<\/td>\n    <td class=\"Cell\">3<\/td>\n    <td class=\"Cell\">8599<\/td>\n    <td class=\"Cell\">15<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\">5520<\/td>\n    <td class=\"Cell\">4<\/td>\n    <td class=\"Cell\">27331<\/td>\n    <td class=\"Cell\">23<\/td>\n    <td class=\"Total\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Virgin Trains<\/th>\n    <td class=\"Cell\">2028<\/td>\n    <td class=\"Cell\">2<\/td>\n    <td class=\"Cell\">6331<\/td>\n    <td class=\"Cell\">7<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">32141<\/td>\n    <td class=\"Total\">33<\/td>\n    <td class=\"Total\">14930<\/td>\n    <td class=\"Total\">22<\/td>\n    <td class=\"Total\">709<\/td>\n    <td class=\"Total\"><\/td>\n    <td class=\"Total\">6395<\/td>\n    <td class=\"Total\">5<\/td>\n    <td class=\"Total\">27331<\/td>\n    <td class=\"Total\">23<\/td>\n    <td class=\"Total\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script><p>Another example - setting the text colour:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(pivottabler)</a>
<a class="sourceLine" id="cb8-2" title="2">pt &lt;-<span class="st"> </span>PivotTable<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb8-3" title="3">pt<span class="op">$</span><span class="kw">addData</span>(bhmtrains)</a>
<a class="sourceLine" id="cb8-4" title="4">pt<span class="op">$</span><span class="kw">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)</a>
<a class="sourceLine" id="cb8-5" title="5">cgrps &lt;-<span class="st"> </span>pt<span class="op">$</span><span class="kw">addColumnDataGroups</span>(<span class="st">"PowerType"</span>)</a>
<a class="sourceLine" id="cb8-6" title="6">colorText &lt;-<span class="st"> </span><span class="cf">function</span>(grp) {</a>
<a class="sourceLine" id="cb8-7" title="7">  <span class="cf">if</span>(<span class="kw"><a href="https://rdrr.io/r/base/Logic.html">isTRUE</a></span>(grp<span class="op">$</span>values<span class="op">==</span><span class="st">"DMU"</span>)) grp<span class="op">$</span><span class="kw">setStyling</span>(<span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">color=</span><span class="st">"blue"</span>))</a>
<a class="sourceLine" id="cb8-8" title="8">  <span class="cf">else</span> <span class="cf">if</span>(<span class="kw"><a href="https://rdrr.io/r/base/Logic.html">isTRUE</a></span>(grp<span class="op">$</span>values<span class="op">==</span><span class="st">"EMU"</span>)) grp<span class="op">$</span><span class="kw">setStyling</span>(<span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">color=</span><span class="st">"green"</span>))</a>
<a class="sourceLine" id="cb8-9" title="9">  <span class="cf">else</span> <span class="cf">if</span>(<span class="kw"><a href="https://rdrr.io/r/base/Logic.html">isTRUE</a></span>(grp<span class="op">$</span>values<span class="op">==</span><span class="st">"HST"</span>)) grp<span class="op">$</span><span class="kw">setStyling</span>(<span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">color=</span><span class="st">"red"</span>))</a>
<a class="sourceLine" id="cb8-10" title="10">}</a>
<a class="sourceLine" id="cb8-11" title="11"><span class="kw"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(cgrps, colorText))</a>
<a class="sourceLine" id="cb8-12" title="12">pt<span class="op">$</span><span class="kw">addRowDataGroups</span>(<span class="st">"TOC"</span>)</a>
<a class="sourceLine" id="cb8-13" title="13">pt<span class="op">$</span><span class="kw">defineCalculation</span>(<span class="dt">calculationName=</span><span class="st">"TotalTrains"</span>, <span class="dt">summariseExpression=</span><span class="st">"n()"</span>)</a>
<a class="sourceLine" id="cb8-14" title="14">pt<span class="op">$</span><span class="kw">renderPivot</span>()</a></code></pre></div>
<div id="htmlwidget-41e1f900c35548bc3500" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-41e1f900c35548bc3500">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\" colspan=\"4\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\" colspan=\"3\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"ColumnHeader\" style=\"color: blue; \">DMU<\/th>\n    <th class=\"ColumnHeader\" style=\"color: green; \">EMU<\/th>\n    <th class=\"ColumnHeader\" style=\"color: red; \">HST<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n    <th class=\"ColumnHeader\" style=\"color: blue; \">DMU<\/th>\n    <th class=\"ColumnHeader\" style=\"color: green; \">EMU<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n    <th class=\"ColumnHeader\"><\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Arriva Trains Wales<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">3079<\/td>\n    <td class=\"Cell\">830<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">CrossCountry<\/th>\n    <td class=\"Cell\">22133<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\">732<\/td>\n    <td class=\"Total\">22865<\/td>\n    <td class=\"Cell\">63<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">63<\/td>\n    <td class=\"Total\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">London Midland<\/th>\n    <td class=\"Cell\">5638<\/td>\n    <td class=\"Cell\">8849<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">14487<\/td>\n    <td class=\"Cell\">5591<\/td>\n    <td class=\"Cell\">28201<\/td>\n    <td class=\"Total\">33792<\/td>\n    <td class=\"Total\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Virgin Trains<\/th>\n    <td class=\"Cell\">2137<\/td>\n    <td class=\"Cell\">6457<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">8594<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\"><\/td>\n    <td class=\"Total\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">32987<\/td>\n    <td class=\"Total\">15306<\/td>\n    <td class=\"Total\">732<\/td>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">6484<\/td>\n    <td class=\"Total\">28201<\/td>\n    <td class=\"Total\">34685<\/td>\n    <td class=\"Total\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="multiple-calculation-groups" class="section level2">
<h2 class="hasAnchor">
<a href="#multiple-calculation-groups" class="anchor"></a>Multiple Calculation Groups</h2>
<p>Sometimes it is desirable to use different calculations in different parts of the pivot table. Returning to the initial irregular example:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(pivottabler)</a>
<a class="sourceLine" id="cb9-2" title="2">pt &lt;-<span class="st"> </span>PivotTable<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb9-3" title="3">pt<span class="op">$</span><span class="kw">addData</span>(bhmtrains)</a>
<a class="sourceLine" id="cb9-4" title="4">pt<span class="op">$</span><span class="kw">addColumnGroup</span>(<span class="dt">variableName=</span><span class="st">"TrainCategory"</span>, <span class="dt">values=</span><span class="st">"Express Passenger"</span>)</a>
<a class="sourceLine" id="cb9-5" title="5">pt<span class="op">$</span><span class="kw">addColumnGroup</span>(<span class="dt">variableName=</span><span class="st">"PowerType"</span>, <span class="dt">values=</span><span class="st">"DMU"</span>)</a>
<a class="sourceLine" id="cb9-6" title="6">pt<span class="op">$</span><span class="kw">addRowDataGroups</span>(<span class="st">"TOC"</span>)</a>
<a class="sourceLine" id="cb9-7" title="7">pt<span class="op">$</span><span class="kw">defineCalculation</span>(<span class="dt">calculationName=</span><span class="st">"TotalTrains"</span>, <span class="dt">summariseExpression=</span><span class="st">"n()"</span>)</a>
<a class="sourceLine" id="cb9-8" title="8">pt<span class="op">$</span><span class="kw">renderPivot</span>()</a></code></pre></div>
<div id="htmlwidget-6456838b41ab53ddb810" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-6456838b41ab53ddb810">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">DMU<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Arriva Trains Wales<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">CrossCountry<\/th>\n    <td class=\"Cell\">22865<\/td>\n    <td class=\"Cell\">22196<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">London Midland<\/th>\n    <td class=\"Cell\">14487<\/td>\n    <td class=\"Cell\">11229<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Virgin Trains<\/th>\n    <td class=\"Cell\">8594<\/td>\n    <td class=\"Cell\">2137<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">39471<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script><p>Suppose we require the number of express trains but the maximum scheduled speed of the DMU trains. We might naively try the following R:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(pivottabler)</a>
<a class="sourceLine" id="cb10-2" title="2">pt &lt;-<span class="st"> </span>PivotTable<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb10-3" title="3">pt<span class="op">$</span><span class="kw">addData</span>(bhmtrains)</a>
<a class="sourceLine" id="cb10-4" title="4">pt<span class="op">$</span><span class="kw">addColumnGroup</span>(<span class="dt">variableName=</span><span class="st">"TrainCategory"</span>, <span class="dt">values=</span><span class="st">"Express Passenger"</span>)</a>
<a class="sourceLine" id="cb10-5" title="5">pt<span class="op">$</span><span class="kw">addColumnGroup</span>(<span class="dt">variableName=</span><span class="st">"PowerType"</span>, <span class="dt">values=</span><span class="st">"DMU"</span>)</a>
<a class="sourceLine" id="cb10-6" title="6">pt<span class="op">$</span><span class="kw">addRowDataGroups</span>(<span class="st">"TOC"</span>)</a>
<a class="sourceLine" id="cb10-7" title="7">pt<span class="op">$</span><span class="kw">defineCalculation</span>(<span class="dt">calculationName=</span><span class="st">"TotalTrains"</span>, <span class="dt">caption=</span><span class="st">"Count"</span>, </a>
<a class="sourceLine" id="cb10-8" title="8">                     <span class="dt">summariseExpression=</span><span class="st">"n()"</span>)</a>
<a class="sourceLine" id="cb10-9" title="9">pt<span class="op">$</span><span class="kw">defineCalculation</span>(<span class="dt">calculationName=</span><span class="st">"MaxSpeedMPH"</span>, <span class="dt">caption=</span><span class="st">"Maximum Speed"</span>, </a>
<a class="sourceLine" id="cb10-10" title="10">                     <span class="dt">summariseExpression=</span><span class="st">"max(SchedSpeedMPH, na.rm=TRUE)"</span>)</a>
<a class="sourceLine" id="cb10-11" title="11">pt<span class="op">$</span><span class="kw">renderPivot</span>()</a></code></pre></div>
<div id="htmlwidget-bb797e9d85047ee1aece" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-bb797e9d85047ee1aece">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\" colspan=\"2\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\" colspan=\"2\">DMU<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"ColumnHeader\">Count<\/th>\n    <th class=\"ColumnHeader\">Maximum Speed<\/th>\n    <th class=\"ColumnHeader\">Count<\/th>\n    <th class=\"ColumnHeader\">Maximum Speed<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Arriva Trains Wales<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">90<\/td>\n    <td class=\"Cell\">3909<\/td>\n    <td class=\"Cell\">90<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">CrossCountry<\/th>\n    <td class=\"Cell\">22865<\/td>\n    <td class=\"Cell\">125<\/td>\n    <td class=\"Cell\">22196<\/td>\n    <td class=\"Cell\">125<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">London Midland<\/th>\n    <td class=\"Cell\">14487<\/td>\n    <td class=\"Cell\">110<\/td>\n    <td class=\"Cell\">11229<\/td>\n    <td class=\"Cell\">100<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Virgin Trains<\/th>\n    <td class=\"Cell\">8594<\/td>\n    <td class=\"Cell\">125<\/td>\n    <td class=\"Cell\">2137<\/td>\n    <td class=\"Cell\">125<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">125<\/td>\n    <td class=\"Total\">39471<\/td>\n    <td class=\"Total\">125<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script><p>This has replicated both calculations across the whole pivot table, which is not what we wanted.</p>
<p>Instead the solution is to define an additional<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> calculation group, then explicitly add the two calculation groups to the relevant parts of the pivot table:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(pivottabler)</a>
<a class="sourceLine" id="cb11-2" title="2">pt &lt;-<span class="st"> </span>PivotTable<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb11-3" title="3">pt<span class="op">$</span><span class="kw">addData</span>(bhmtrains)</a>
<a class="sourceLine" id="cb11-4" title="4">cg1 &lt;-<span class="st"> </span>pt<span class="op">$</span><span class="kw">addColumnGroup</span>(<span class="dt">variableName=</span><span class="st">"TrainCategory"</span>, <span class="dt">values=</span><span class="st">"Express Passenger"</span>)</a>
<a class="sourceLine" id="cb11-5" title="5">cg2 &lt;-<span class="st"> </span>pt<span class="op">$</span><span class="kw">addColumnGroup</span>(<span class="dt">variableName=</span><span class="st">"PowerType"</span>, <span class="dt">values=</span><span class="st">"DMU"</span>)</a>
<a class="sourceLine" id="cb11-6" title="6">pt<span class="op">$</span><span class="kw">addRowDataGroups</span>(<span class="st">"TOC"</span>)</a>
<a class="sourceLine" id="cb11-7" title="7">pt<span class="op">$</span><span class="kw">defineCalculation</span>(<span class="dt">calculationName=</span><span class="st">"TotalTrains"</span>, <span class="dt">summariseExpression=</span><span class="st">"n()"</span>)</a>
<a class="sourceLine" id="cb11-8" title="8">pt<span class="op">$</span><span class="kw">defineCalculation</span>(<span class="dt">calculationGroupName=</span><span class="st">"calcGrp2"</span>, <span class="dt">calculationName=</span><span class="st">"MaxSpeedMPH"</span>, </a>
<a class="sourceLine" id="cb11-9" title="9">                     <span class="dt">summariseExpression=</span><span class="st">"max(SchedSpeedMPH, na.rm=TRUE)"</span>)</a>
<a class="sourceLine" id="cb11-10" title="10">cg1<span class="op">$</span><span class="kw">addCalculationGroups</span>(<span class="st">"default"</span>)</a>
<a class="sourceLine" id="cb11-11" title="11">cg2<span class="op">$</span><span class="kw">addCalculationGroups</span>(<span class="st">"calcGrp2"</span>)</a>
<a class="sourceLine" id="cb11-12" title="12">pt<span class="op">$</span><span class="kw">renderPivot</span>()</a></code></pre></div>
<div id="htmlwidget-405c9872b8bcd4e84f62" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-405c9872b8bcd4e84f62">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">DMU<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Arriva Trains Wales<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">90<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">CrossCountry<\/th>\n    <td class=\"Cell\">22865<\/td>\n    <td class=\"Cell\">125<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">London Midland<\/th>\n    <td class=\"Cell\">14487<\/td>\n    <td class=\"Cell\">100<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Virgin Trains<\/th>\n    <td class=\"Cell\">8594<\/td>\n    <td class=\"Cell\">125<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">125<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script><p>Pivot tables like the above are quite likely to cause confusion. Either the caption of the existing data groups needs changing or additional empty groups with captions should be added. Both of these are demonstrated below.</p>
<div id="changing-the-data-group-captions" class="section level3">
<h3 class="hasAnchor">
<a href="#changing-the-data-group-captions" class="anchor"></a>Changing the data group captions</h3>
<p>The example below explicitly specifies the captions of the column data groups.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(pivottabler)</a>
<a class="sourceLine" id="cb12-2" title="2">pt &lt;-<span class="st"> </span>PivotTable<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb12-3" title="3">pt<span class="op">$</span><span class="kw">addData</span>(bhmtrains)</a>
<a class="sourceLine" id="cb12-4" title="4">cg1 &lt;-<span class="st"> </span>pt<span class="op">$</span><span class="kw">addColumnGroup</span>(<span class="dt">variableName=</span><span class="st">"TrainCategory"</span>, <span class="dt">values=</span><span class="st">"Express Passenger"</span>, </a>
<a class="sourceLine" id="cb12-5" title="5">                         <span class="dt">caption=</span><span class="st">"Express Passenger (Count)"</span>)</a>
<a class="sourceLine" id="cb12-6" title="6">cg2 &lt;-<span class="st"> </span>pt<span class="op">$</span><span class="kw">addColumnGroup</span>(<span class="dt">variableName=</span><span class="st">"PowerType"</span>, <span class="dt">values=</span><span class="st">"DMU"</span>, </a>
<a class="sourceLine" id="cb12-7" title="7">                         <span class="dt">caption=</span><span class="st">"DMU (Maximum Speed"</span>)</a>
<a class="sourceLine" id="cb12-8" title="8">pt<span class="op">$</span><span class="kw">addRowDataGroups</span>(<span class="st">"TOC"</span>)</a>
<a class="sourceLine" id="cb12-9" title="9">pt<span class="op">$</span><span class="kw">defineCalculation</span>(<span class="dt">calculationName=</span><span class="st">"TotalTrains"</span>, <span class="dt">summariseExpression=</span><span class="st">"n()"</span>)</a>
<a class="sourceLine" id="cb12-10" title="10">pt<span class="op">$</span><span class="kw">defineCalculation</span>(<span class="dt">calculationGroupName=</span><span class="st">"calcGrp2"</span>, <span class="dt">calculationName=</span><span class="st">"MaxSpeedMPH"</span>, </a>
<a class="sourceLine" id="cb12-11" title="11">                     <span class="dt">summariseExpression=</span><span class="st">"max(SchedSpeedMPH, na.rm=TRUE)"</span>)</a>
<a class="sourceLine" id="cb12-12" title="12">cg1<span class="op">$</span><span class="kw">addCalculationGroups</span>(<span class="st">"default"</span>)</a>
<a class="sourceLine" id="cb12-13" title="13">cg2<span class="op">$</span><span class="kw">addCalculationGroups</span>(<span class="st">"calcGrp2"</span>)</a>
<a class="sourceLine" id="cb12-14" title="14">pt<span class="op">$</span><span class="kw">renderPivot</span>()</a></code></pre></div>
<div id="htmlwidget-39846eedca2cfea2e6d6" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-39846eedca2cfea2e6d6">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger (Count)<\/th>\n    <th class=\"ColumnHeader\">DMU (Maximum Speed<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Arriva Trains Wales<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">90<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">CrossCountry<\/th>\n    <td class=\"Cell\">22865<\/td>\n    <td class=\"Cell\">125<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">London Midland<\/th>\n    <td class=\"Cell\">14487<\/td>\n    <td class=\"Cell\">100<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Virgin Trains<\/th>\n    <td class=\"Cell\">8594<\/td>\n    <td class=\"Cell\">125<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">125<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="adding-purely-descriptive-data-groups" class="section level3">
<h3 class="hasAnchor">
<a href="#adding-purely-descriptive-data-groups" class="anchor"></a>Adding purely descriptive data groups</h3>
<p>The example below adds two data groups that display a caption only - purely for display purposes.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(pivottabler)</a>
<a class="sourceLine" id="cb13-2" title="2">pt &lt;-<span class="st"> </span>PivotTable<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb13-3" title="3">pt<span class="op">$</span><span class="kw">addData</span>(bhmtrains)</a>
<a class="sourceLine" id="cb13-4" title="4">cg1 &lt;-<span class="st"> </span>pt<span class="op">$</span><span class="kw">addColumnGroup</span>(<span class="dt">variableName=</span><span class="st">"TrainCategory"</span>, <span class="dt">values=</span><span class="st">"Express Passenger"</span>)</a>
<a class="sourceLine" id="cb13-5" title="5">cg2 &lt;-<span class="st"> </span>pt<span class="op">$</span><span class="kw">addColumnGroup</span>(<span class="dt">variableName=</span><span class="st">"PowerType"</span>, <span class="dt">values=</span><span class="st">"DMU"</span>)</a>
<a class="sourceLine" id="cb13-6" title="6">pt<span class="op">$</span><span class="kw">addRowDataGroups</span>(<span class="st">"TOC"</span>)</a>
<a class="sourceLine" id="cb13-7" title="7">pt<span class="op">$</span><span class="kw">defineCalculation</span>(<span class="dt">calculationName=</span><span class="st">"TotalTrains"</span>, <span class="dt">summariseExpression=</span><span class="st">"n()"</span>)</a>
<a class="sourceLine" id="cb13-8" title="8">pt<span class="op">$</span><span class="kw">defineCalculation</span>(<span class="dt">calculationGroupName=</span><span class="st">"calcGrp2"</span>, <span class="dt">calculationName=</span><span class="st">"MaxSpeedMPH"</span>, </a>
<a class="sourceLine" id="cb13-9" title="9">                     <span class="dt">summariseExpression=</span><span class="st">"max(SchedSpeedMPH, na.rm=TRUE)"</span>)</a>
<a class="sourceLine" id="cb13-10" title="10">cg3 &lt;-<span class="st"> </span>cg1<span class="op">$</span><span class="kw">addChildGroup</span>(<span class="dt">caption=</span><span class="st">"Count"</span>)</a>
<a class="sourceLine" id="cb13-11" title="11">cg4 &lt;-<span class="st"> </span>cg2<span class="op">$</span><span class="kw">addChildGroup</span>(<span class="dt">caption=</span><span class="st">"Maximum Speed"</span>)</a>
<a class="sourceLine" id="cb13-12" title="12">cg3<span class="op">$</span><span class="kw">addCalculationGroups</span>(<span class="st">"default"</span>)</a>
<a class="sourceLine" id="cb13-13" title="13">cg4<span class="op">$</span><span class="kw">addCalculationGroups</span>(<span class="st">"calcGrp2"</span>)</a>
<a class="sourceLine" id="cb13-14" title="14">pt<span class="op">$</span><span class="kw">renderPivot</span>()</a></code></pre></div>
<div id="htmlwidget-57c64d62deb01e04bb70" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-57c64d62deb01e04bb70">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">DMU<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"ColumnHeader\">Count<\/th>\n    <th class=\"ColumnHeader\">Maximum Speed<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Arriva Trains Wales<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">90<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">CrossCountry<\/th>\n    <td class=\"Cell\">22865<\/td>\n    <td class=\"Cell\">125<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">London Midland<\/th>\n    <td class=\"Cell\">14487<\/td>\n    <td class=\"Cell\">100<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Virgin Trains<\/th>\n    <td class=\"Cell\">8594<\/td>\n    <td class=\"Cell\">125<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">49025<\/td>\n    <td class=\"Total\">125<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="combining-multiple-pivot-tables" class="section level2">
<h2 class="hasAnchor">
<a href="#combining-multiple-pivot-tables" class="anchor"></a>Combining Multiple Pivot Tables</h2>
<div id="example-1" class="section level3">
<h3 class="hasAnchor">
<a href="#example-1" class="anchor"></a>Example 1</h3>
<p>The example below combines two pivot tables in one, calling <code>pt$addRowDataGroups()</code> twice specifying <code>atLevel=1</code> both times:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="co"># some sample school student grade data</span></a>
<a class="sourceLine" id="cb14-2" title="2">gender &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, </a>
<a class="sourceLine" id="cb14-3" title="3">            <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, </a>
<a class="sourceLine" id="cb14-4" title="4">            <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>)</a>
<a class="sourceLine" id="cb14-5" title="5">age &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">19</span>, <span class="dv">19</span>, <span class="dv">19</span>, <span class="dv">19</span>, <span class="dv">19</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">21</span>, <span class="dv">21</span>, <span class="dv">21</span>, <span class="dv">21</span>, <span class="dv">22</span>, <span class="dv">22</span>, <span class="dv">22</span>, </a>
<a class="sourceLine" id="cb14-6" title="6">         <span class="dv">22</span>, <span class="dv">22</span>, <span class="dv">19</span>, <span class="dv">19</span>, <span class="dv">19</span>, <span class="dv">19</span>, <span class="dv">19</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">21</span>, <span class="dv">21</span>, <span class="dv">21</span>, <span class="dv">21</span>, <span class="dv">22</span>, </a>
<a class="sourceLine" id="cb14-7" title="7">         <span class="dv">22</span>, <span class="dv">22</span>, <span class="dv">22</span>, <span class="dv">22</span>)</a>
<a class="sourceLine" id="cb14-8" title="8">grade &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"E"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"E"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, </a>
<a class="sourceLine" id="cb14-9" title="9">           <span class="st">"E"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"E"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"E"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, </a>
<a class="sourceLine" id="cb14-10" title="10">           <span class="st">"D"</span>, <span class="st">"E"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"E"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"E"</span>)</a>
<a class="sourceLine" id="cb14-11" title="11">counts &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">6</span>, <span class="dv">16</span>, <span class="dv">56</span>, <span class="dv">37</span>, <span class="dv">213</span>, <span class="dv">14</span>, <span class="dv">21</span>, <span class="dv">61</span>, <span class="dv">45</span>, <span class="dv">191</span>, <span class="dv">30</span>, <span class="dv">54</span>, <span class="dv">74</span>, <span class="dv">82</span>, <span class="dv">246</span>, <span class="dv">91</span>, <span class="dv">46</span>, </a>
<a class="sourceLine" id="cb14-12" title="12">            <span class="dv">29</span>, <span class="dv">71</span>, <span class="dv">296</span>, <span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">21</span>, <span class="dv">35</span>, <span class="dv">162</span>, <span class="dv">14</span>, <span class="dv">11</span>, <span class="dv">29</span>, <span class="dv">22</span>, <span class="dv">204</span>, <span class="dv">15</span>, <span class="dv">30</span>, <span class="dv">49</span>, <span class="dv">75</span>, </a>
<a class="sourceLine" id="cb14-13" title="13">            <span class="dv">253</span>, <span class="dv">45</span>, <span class="dv">22</span>, <span class="dv">30</span>, <span class="dv">30</span>, <span class="dv">319</span>)</a>
<a class="sourceLine" id="cb14-14" title="14">df &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(gender, age, grade, counts)</a>
<a class="sourceLine" id="cb14-15" title="15"></a>
<a class="sourceLine" id="cb14-16" title="16"><span class="co"># two pivot tables in one</span></a>
<a class="sourceLine" id="cb14-17" title="17"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(pivottabler)</a>
<a class="sourceLine" id="cb14-18" title="18">pt &lt;-<span class="st"> </span>PivotTable<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb14-19" title="19">pt<span class="op">$</span><span class="kw">addData</span>(df)</a>
<a class="sourceLine" id="cb14-20" title="20">pt<span class="op">$</span><span class="kw">addColumnDataGroups</span>(<span class="st">"grade"</span>)</a>
<a class="sourceLine" id="cb14-21" title="21">pt<span class="op">$</span><span class="kw">addRowGroup</span>(<span class="dt">caption=</span><span class="st">"Age"</span>, <span class="dt">isEmpty=</span><span class="ot">TRUE</span>, <span class="dt">styleDeclarations=</span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">color=</span><span class="st">"blue"</span>))</a>
<a class="sourceLine" id="cb14-22" title="22">pt<span class="op">$</span><span class="kw">addRowDataGroups</span>(<span class="st">"age"</span>, <span class="dt">atLevel=</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb14-23" title="23">pt<span class="op">$</span><span class="kw">addRowGroup</span>(<span class="dt">caption=</span><span class="st">"Gender"</span>, <span class="dt">isEmpty=</span><span class="ot">TRUE</span>, <span class="dt">styleDeclarations=</span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">color=</span><span class="st">"blue"</span>))</a>
<a class="sourceLine" id="cb14-24" title="24">pt<span class="op">$</span><span class="kw">addRowDataGroups</span>(<span class="st">"gender"</span>, <span class="dt">atLevel=</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb14-25" title="25">pt<span class="op">$</span><span class="kw">defineCalculation</span>(<span class="dt">calculationName=</span><span class="st">"GradeCounts"</span>, <span class="dt">summariseExpression=</span><span class="st">"sum(counts)"</span>)</a>
<a class="sourceLine" id="cb14-26" title="26">pt<span class="op">$</span><span class="kw">renderPivot</span>()</a></code></pre></div>
<div id="htmlwidget-8c0cd2b3519aa3dfc0c1" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-8c0cd2b3519aa3dfc0c1">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">A<\/th>\n    <th class=\"ColumnHeader\">B<\/th>\n    <th class=\"ColumnHeader\">C<\/th>\n    <th class=\"ColumnHeader\">D<\/th>\n    <th class=\"ColumnHeader\">E<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" style=\"color: blue; \">Age<\/th>\n    <td class=\"Cell\" colspan=\"6\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">19<\/th>\n    <td class=\"Cell\">9<\/td>\n    <td class=\"Cell\">22<\/td>\n    <td class=\"Cell\">77<\/td>\n    <td class=\"Cell\">72<\/td>\n    <td class=\"Cell\">375<\/td>\n    <td class=\"Total\">555<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">20<\/th>\n    <td class=\"Cell\">28<\/td>\n    <td class=\"Cell\">32<\/td>\n    <td class=\"Cell\">90<\/td>\n    <td class=\"Cell\">67<\/td>\n    <td class=\"Cell\">395<\/td>\n    <td class=\"Total\">612<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">21<\/th>\n    <td class=\"Cell\">45<\/td>\n    <td class=\"Cell\">84<\/td>\n    <td class=\"Cell\">123<\/td>\n    <td class=\"Cell\">157<\/td>\n    <td class=\"Cell\">499<\/td>\n    <td class=\"Total\">908<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">22<\/th>\n    <td class=\"Cell\">136<\/td>\n    <td class=\"Cell\">68<\/td>\n    <td class=\"Cell\">59<\/td>\n    <td class=\"Cell\">101<\/td>\n    <td class=\"Cell\">615<\/td>\n    <td class=\"Total\">979<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">218<\/td>\n    <td class=\"Total\">206<\/td>\n    <td class=\"Total\">349<\/td>\n    <td class=\"Total\">397<\/td>\n    <td class=\"Total\">1884<\/td>\n    <td class=\"Total\">3054<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" style=\"color: blue; \">Gender<\/th>\n    <td class=\"Cell\" colspan=\"6\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">F<\/th>\n    <td class=\"Cell\">141<\/td>\n    <td class=\"Cell\">137<\/td>\n    <td class=\"Cell\">220<\/td>\n    <td class=\"Cell\">235<\/td>\n    <td class=\"Cell\">946<\/td>\n    <td class=\"Total\">1679<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">M<\/th>\n    <td class=\"Cell\">77<\/td>\n    <td class=\"Cell\">69<\/td>\n    <td class=\"Cell\">129<\/td>\n    <td class=\"Cell\">162<\/td>\n    <td class=\"Cell\">938<\/td>\n    <td class=\"Total\">1375<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">218<\/td>\n    <td class=\"Total\">206<\/td>\n    <td class=\"Total\">349<\/td>\n    <td class=\"Total\">397<\/td>\n    <td class=\"Total\">1884<\/td>\n    <td class=\"Total\">3054<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script><p>The example above allows each set of row groups to render a total row. To prevent this and instead render a single total row at the bottom of the pivot table, specify <code>addTotal=FALSE</code> when calling <code>pt$addRowDataGroups()</code>, then call <code>pt$addRowGroup()</code> a third time to add the total row at the bottom:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="co"># some sample school student grade data</span></a>
<a class="sourceLine" id="cb15-2" title="2">gender &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, </a>
<a class="sourceLine" id="cb15-3" title="3">            <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, </a>
<a class="sourceLine" id="cb15-4" title="4">            <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>)</a>
<a class="sourceLine" id="cb15-5" title="5">age &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">19</span>, <span class="dv">19</span>, <span class="dv">19</span>, <span class="dv">19</span>, <span class="dv">19</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">21</span>, <span class="dv">21</span>, <span class="dv">21</span>, <span class="dv">21</span>, <span class="dv">22</span>, <span class="dv">22</span>, <span class="dv">22</span>, </a>
<a class="sourceLine" id="cb15-6" title="6">         <span class="dv">22</span>, <span class="dv">22</span>, <span class="dv">19</span>, <span class="dv">19</span>, <span class="dv">19</span>, <span class="dv">19</span>, <span class="dv">19</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">21</span>, <span class="dv">21</span>, <span class="dv">21</span>, <span class="dv">21</span>, <span class="dv">22</span>, </a>
<a class="sourceLine" id="cb15-7" title="7">         <span class="dv">22</span>, <span class="dv">22</span>, <span class="dv">22</span>, <span class="dv">22</span>)</a>
<a class="sourceLine" id="cb15-8" title="8">grade &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"E"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"E"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, </a>
<a class="sourceLine" id="cb15-9" title="9">           <span class="st">"E"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"E"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"E"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, </a>
<a class="sourceLine" id="cb15-10" title="10">           <span class="st">"D"</span>, <span class="st">"E"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"E"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"E"</span>)</a>
<a class="sourceLine" id="cb15-11" title="11">counts &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">6</span>, <span class="dv">16</span>, <span class="dv">56</span>, <span class="dv">37</span>, <span class="dv">213</span>, <span class="dv">14</span>, <span class="dv">21</span>, <span class="dv">61</span>, <span class="dv">45</span>, <span class="dv">191</span>, <span class="dv">30</span>, <span class="dv">54</span>, <span class="dv">74</span>, <span class="dv">82</span>, <span class="dv">246</span>, <span class="dv">91</span>, <span class="dv">46</span>, </a>
<a class="sourceLine" id="cb15-12" title="12">            <span class="dv">29</span>, <span class="dv">71</span>, <span class="dv">296</span>, <span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">21</span>, <span class="dv">35</span>, <span class="dv">162</span>, <span class="dv">14</span>, <span class="dv">11</span>, <span class="dv">29</span>, <span class="dv">22</span>, <span class="dv">204</span>, <span class="dv">15</span>, <span class="dv">30</span>, <span class="dv">49</span>, <span class="dv">75</span>, </a>
<a class="sourceLine" id="cb15-13" title="13">            <span class="dv">253</span>, <span class="dv">45</span>, <span class="dv">22</span>, <span class="dv">30</span>, <span class="dv">30</span>, <span class="dv">319</span>)</a>
<a class="sourceLine" id="cb15-14" title="14">df &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(gender, age, grade, counts)</a>
<a class="sourceLine" id="cb15-15" title="15"></a>
<a class="sourceLine" id="cb15-16" title="16"><span class="co"># two pivot tables in one</span></a>
<a class="sourceLine" id="cb15-17" title="17"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(pivottabler)</a>
<a class="sourceLine" id="cb15-18" title="18">pt &lt;-<span class="st"> </span>PivotTable<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb15-19" title="19">pt<span class="op">$</span><span class="kw">addData</span>(df)</a>
<a class="sourceLine" id="cb15-20" title="20">pt<span class="op">$</span><span class="kw">addColumnDataGroups</span>(<span class="st">"grade"</span>)</a>
<a class="sourceLine" id="cb15-21" title="21">pt<span class="op">$</span><span class="kw">addRowGroup</span>(<span class="dt">caption=</span><span class="st">"Age"</span>, <span class="dt">isEmpty=</span><span class="ot">TRUE</span>, <span class="dt">isOutline=</span><span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb15-22" title="22">               <span class="dt">styleDeclarations=</span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">color=</span><span class="st">"blue"</span>))</a>
<a class="sourceLine" id="cb15-23" title="23">pt<span class="op">$</span><span class="kw">addRowDataGroups</span>(<span class="st">"age"</span>, <span class="dt">atLevel=</span><span class="dv">1</span>, <span class="dt">addTotal=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb15-24" title="24">pt<span class="op">$</span><span class="kw">addRowGroup</span>(<span class="dt">caption=</span><span class="st">"Gender"</span>, <span class="dt">isEmpty=</span><span class="ot">TRUE</span>, <span class="dt">isOutline=</span><span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb15-25" title="25">               <span class="dt">styleDeclarations=</span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">color=</span><span class="st">"blue"</span>))</a>
<a class="sourceLine" id="cb15-26" title="26">pt<span class="op">$</span><span class="kw">addRowDataGroups</span>(<span class="st">"gender"</span>, <span class="dt">atLevel=</span><span class="dv">1</span>, <span class="dt">addTotal=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb15-27" title="27">pt<span class="op">$</span><span class="kw">defineCalculation</span>(<span class="dt">calculationName=</span><span class="st">"GradeCounts"</span>, <span class="dt">summariseExpression=</span><span class="st">"sum(counts)"</span>)</a>
<a class="sourceLine" id="cb15-28" title="28">pt<span class="op">$</span><span class="kw">addRowGroup</span>(<span class="dt">caption=</span><span class="st">"Total"</span>, <span class="dt">isOutline=</span><span class="ot">TRUE</span>, <span class="dt">isTotal=</span><span class="ot">TRUE</span>, <span class="dt">isLevelTotal=</span><span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb15-29" title="29">               <span class="dt">styleDeclarations=</span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">color=</span><span class="st">"blue"</span>), <span class="dt">cellStyleDeclarations=</span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">color=</span><span class="st">"blue"</span>))</a>
<a class="sourceLine" id="cb15-30" title="30">pt<span class="op">$</span><span class="kw">renderPivot</span>()</a></code></pre></div>
<div id="htmlwidget-f2954343adb1da361d1c" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-f2954343adb1da361d1c">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">A<\/th>\n    <th class=\"ColumnHeader\">B<\/th>\n    <th class=\"ColumnHeader\">C<\/th>\n    <th class=\"ColumnHeader\">D<\/th>\n    <th class=\"ColumnHeader\">E<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \">Age<\/th>\n    <td class=\"OutlineCell\" colspan=\"6\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">19<\/th>\n    <td class=\"Cell\">9<\/td>\n    <td class=\"Cell\">22<\/td>\n    <td class=\"Cell\">77<\/td>\n    <td class=\"Cell\">72<\/td>\n    <td class=\"Cell\">375<\/td>\n    <td class=\"Total\">555<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">20<\/th>\n    <td class=\"Cell\">28<\/td>\n    <td class=\"Cell\">32<\/td>\n    <td class=\"Cell\">90<\/td>\n    <td class=\"Cell\">67<\/td>\n    <td class=\"Cell\">395<\/td>\n    <td class=\"Total\">612<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">21<\/th>\n    <td class=\"Cell\">45<\/td>\n    <td class=\"Cell\">84<\/td>\n    <td class=\"Cell\">123<\/td>\n    <td class=\"Cell\">157<\/td>\n    <td class=\"Cell\">499<\/td>\n    <td class=\"Total\">908<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">22<\/th>\n    <td class=\"Cell\">136<\/td>\n    <td class=\"Cell\">68<\/td>\n    <td class=\"Cell\">59<\/td>\n    <td class=\"Cell\">101<\/td>\n    <td class=\"Cell\">615<\/td>\n    <td class=\"Total\">979<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \">Gender<\/th>\n    <td class=\"OutlineCell\" colspan=\"6\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">F<\/th>\n    <td class=\"Cell\">141<\/td>\n    <td class=\"Cell\">137<\/td>\n    <td class=\"Cell\">220<\/td>\n    <td class=\"Cell\">235<\/td>\n    <td class=\"Cell\">946<\/td>\n    <td class=\"Total\">1679<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">M<\/th>\n    <td class=\"Cell\">77<\/td>\n    <td class=\"Cell\">69<\/td>\n    <td class=\"Cell\">129<\/td>\n    <td class=\"Cell\">162<\/td>\n    <td class=\"Cell\">938<\/td>\n    <td class=\"Total\">1375<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \">Total<\/th>\n    <td class=\"OutlineCell\" style=\"color: blue; \">218<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">206<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">349<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">397<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">1884<\/td>\n    <td class=\"OutlineCell\" style=\"color: blue; \">3054<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="example-2" class="section level3">
<h3 class="hasAnchor">
<a href="#example-2" class="anchor"></a>Example 2</h3>
<p>Another example of a pivot table that effectively contains two pivot tables:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(pivottabler)</a>
<a class="sourceLine" id="cb16-2" title="2">pt &lt;-<span class="st"> </span>PivotTable<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb16-3" title="3">pt<span class="op">$</span><span class="kw">addData</span>(bhmtrains)</a>
<a class="sourceLine" id="cb16-4" title="4">pt<span class="op">$</span><span class="kw">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)</a>
<a class="sourceLine" id="cb16-5" title="5"><span class="co"># Rows: TOC breakdown</span></a>
<a class="sourceLine" id="cb16-6" title="6">grp1 &lt;-<span class="st"> </span>pt<span class="op">$</span><span class="kw">addRowGroup</span>(<span class="dt">caption=</span><span class="st">"By TOC"</span>)</a>
<a class="sourceLine" id="cb16-7" title="7">grp1<span class="op">$</span><span class="kw">addDataGroups</span>(<span class="st">"TOC"</span>, <span class="dt">addTotal=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb16-8" title="8"><span class="co"># Rows: Power Type breakdown</span></a>
<a class="sourceLine" id="cb16-9" title="9">grp2 &lt;-<span class="st"> </span>pt<span class="op">$</span><span class="kw">addRowGroup</span>(<span class="dt">caption=</span><span class="st">"By Power Type"</span>)</a>
<a class="sourceLine" id="cb16-10" title="10">grp2<span class="op">$</span><span class="kw">addDataGroups</span>(<span class="st">"PowerType"</span>, <span class="dt">addTotal=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb16-11" title="11"><span class="co"># Rows: Total</span></a>
<a class="sourceLine" id="cb16-12" title="12">grp3 &lt;-<span class="st"> </span>pt<span class="op">$</span><span class="kw">addRowGroup</span>(<span class="dt">caption=</span><span class="st">"Total"</span>)</a>
<a class="sourceLine" id="cb16-13" title="13"><span class="co"># Row Group Headings</span></a>
<a class="sourceLine" id="cb16-14" title="14">pt<span class="op">$</span><span class="kw">setRowDataGroupHeader</span>(<span class="dt">levelNumber=</span><span class="dv">1</span>, <span class="dt">header=</span><span class="st">"Breakdown"</span>)</a>
<a class="sourceLine" id="cb16-15" title="15">pt<span class="op">$</span><span class="kw">setRowDataGroupHeader</span>(<span class="dt">levelNumber=</span><span class="dv">2</span>, <span class="dt">header=</span><span class="st">"Subset"</span>)</a>
<a class="sourceLine" id="cb16-16" title="16"><span class="co"># Finish...</span></a>
<a class="sourceLine" id="cb16-17" title="17">pt<span class="op">$</span><span class="kw">defineCalculation</span>(<span class="dt">calculationName=</span><span class="st">"TotalTrains"</span>, <span class="dt">summariseExpression=</span><span class="st">"n()"</span>)</a>
<a class="sourceLine" id="cb16-18" title="18">pt<span class="op">$</span>theme &lt;-<span class="st"> </span><span class="kw"><a href="../reference/getStandardTableTheme.html">getStandardTableTheme</a></span>(pt)</a>
<a class="sourceLine" id="cb16-19" title="19">pt<span class="op">$</span><span class="kw">renderPivot</span>(<span class="dt">showRowGroupHeaders=</span><span class="ot">TRUE</span>)</a></code></pre></div>
<div id="htmlwidget-321527526714a9580eee" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-321527526714a9580eee">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.LeftColumnHeader {font-family: Arial; font-size: 0.75em; padding: 2px; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; text-align: left; }\r\n.CentreColumnHeader {font-family: Arial; font-size: 0.75em; padding: 2px; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; text-align: center; }\r\n.LeftCell {font-family: Arial; font-size: 0.75em; padding: 2px 8px 2px 2px; border: 1px solid lightgray; vertical-align: middle; font-weight: normal; text-align: left; }\r\n.RightCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; font-weight: normal; text-align: right; }\r\n.OutlineCentreColumnHeader {font-family: Arial; font-size: 0.75em; padding: 2px; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; text-align: center; }\r\n.OutlineLeftCell {font-family: Arial; font-size: 0.75em; padding: 2px 8px 2px 2px; border: 1px solid lightgray; vertical-align: middle; font-weight: normal; text-align: left; }\r\n.OutlineRightCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; font-weight: normal; text-align: right; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; font-weight: normal; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"LeftColumnHeader\">Breakdown<\/th>\n    <th class=\"LeftColumnHeader\">Subset<\/th>\n    <th class=\"CentreColumnHeader\">Express Passenger<\/th>\n    <th class=\"CentreColumnHeader\">Ordinary Passenger<\/th>\n    <th class=\"CentreColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"LeftCell\" rowspan=\"4\">By TOC<\/th>\n    <th class=\"LeftCell\">Arriva Trains Wales<\/th>\n    <td class=\"RightCell\">3079<\/td>\n    <td class=\"RightCell\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"LeftCell\">CrossCountry<\/th>\n    <td class=\"RightCell\">22865<\/td>\n    <td class=\"RightCell\">63<\/td>\n    <td class=\"Total\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"LeftCell\">London Midland<\/th>\n    <td class=\"RightCell\">14487<\/td>\n    <td class=\"RightCell\">33792<\/td>\n    <td class=\"Total\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"LeftCell\">Virgin Trains<\/th>\n    <td class=\"RightCell\">8594<\/td>\n    <td class=\"RightCell\"><\/td>\n    <td class=\"Total\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"LeftCell\" rowspan=\"3\">By Power Type<\/th>\n    <th class=\"LeftCell\">DMU<\/th>\n    <td class=\"RightCell\">32987<\/td>\n    <td class=\"RightCell\">6484<\/td>\n    <td class=\"Total\">39471<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"LeftCell\">EMU<\/th>\n    <td class=\"RightCell\">15306<\/td>\n    <td class=\"RightCell\">28201<\/td>\n    <td class=\"Total\">43507<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"LeftCell\">HST<\/th>\n    <td class=\"RightCell\">732<\/td>\n    <td class=\"RightCell\"><\/td>\n    <td class=\"Total\">732<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"LeftCell\">Total<\/th>\n    <th class=\"LeftCell\"><\/th>\n    <td class=\"RightCell\">49025<\/td>\n    <td class=\"RightCell\">34685<\/td>\n    <td class=\"Total\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script><p>Rendering the same table as in outline layout:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(pivottabler)</a>
<a class="sourceLine" id="cb17-2" title="2">pt &lt;-<span class="st"> </span>PivotTable<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb17-3" title="3">pt<span class="op">$</span><span class="kw">addData</span>(bhmtrains)</a>
<a class="sourceLine" id="cb17-4" title="4">pt<span class="op">$</span><span class="kw">addColumnDataGroups</span>(<span class="st">"TrainCategory"</span>)</a>
<a class="sourceLine" id="cb17-5" title="5"><span class="co"># Rows: TOC breakdown</span></a>
<a class="sourceLine" id="cb17-6" title="6">grp1a &lt;-<span class="st"> </span>pt<span class="op">$</span><span class="kw">addRowGroup</span>(<span class="dt">caption=</span><span class="st">"By TOC"</span>, <span class="dt">isOutline=</span><span class="ot">TRUE</span>, <span class="dt">isEmpty=</span><span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb17-7" title="7">                        <span class="dt">sortAnchor=</span><span class="st">"next"</span>, <span class="dt">styleDeclarations=</span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">color=</span><span class="st">"blue"</span>))</a>
<a class="sourceLine" id="cb17-8" title="8">grp1b &lt;-<span class="st"> </span>pt<span class="op">$</span><span class="kw">addRowGroup</span>()</a>
<a class="sourceLine" id="cb17-9" title="9">grp1b<span class="op">$</span><span class="kw">addDataGroups</span>(<span class="st">"TOC"</span>, <span class="dt">addTotal=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb17-10" title="10"><span class="co"># Rows: Power Type breakdown</span></a>
<a class="sourceLine" id="cb17-11" title="11">grp2a &lt;-<span class="st"> </span>pt<span class="op">$</span><span class="kw">addRowGroup</span>(<span class="dt">caption=</span><span class="st">"By Power Type"</span>, <span class="dt">isOutline=</span><span class="ot">TRUE</span>, <span class="dt">isEmpty=</span><span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb17-12" title="12">                        <span class="dt">sortAnchor=</span><span class="st">"next"</span>, <span class="dt">styleDeclarations=</span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">color=</span><span class="st">"blue"</span>))</a>
<a class="sourceLine" id="cb17-13" title="13">grp2b &lt;-<span class="st"> </span>pt<span class="op">$</span><span class="kw">addRowGroup</span>()</a>
<a class="sourceLine" id="cb17-14" title="14">grp2b<span class="op">$</span><span class="kw">addDataGroups</span>(<span class="st">"PowerType"</span>, <span class="dt">addTotal=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb17-15" title="15"><span class="co"># Rows: Total</span></a>
<a class="sourceLine" id="cb17-16" title="16">grp3 &lt;-<span class="st"> </span>pt<span class="op">$</span><span class="kw">addRowGroup</span>(<span class="dt">caption=</span><span class="st">"Total"</span>, <span class="dt">isOutline=</span><span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb17-17" title="17">                       <span class="dt">styleDeclarations=</span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">color=</span><span class="st">"blue"</span>))</a>
<a class="sourceLine" id="cb17-18" title="18"><span class="co"># Finish...</span></a>
<a class="sourceLine" id="cb17-19" title="19">pt<span class="op">$</span><span class="kw">defineCalculation</span>(<span class="dt">calculationName=</span><span class="st">"TotalTrains"</span>, <span class="dt">summariseExpression=</span><span class="st">"n()"</span>)</a>
<a class="sourceLine" id="cb17-20" title="20">pt<span class="op">$</span><span class="kw">renderPivot</span>()</a></code></pre></div>
<div id="htmlwidget-75e9e6c980535dbf32f4" style="width:auto;height:auto;" class="pivottabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-75e9e6c980535dbf32f4">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th class=\"RowHeader\" colspan=\"2\">&nbsp;<\/th>\n    <th class=\"ColumnHeader\">Express Passenger<\/th>\n    <th class=\"ColumnHeader\">Ordinary Passenger<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"2\">By TOC<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"4\"><\/th>\n    <th class=\"RowHeader\">Arriva Trains Wales<\/th>\n    <td class=\"Cell\">3079<\/td>\n    <td class=\"Cell\">830<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">CrossCountry<\/th>\n    <td class=\"Cell\">22865<\/td>\n    <td class=\"Cell\">63<\/td>\n    <td class=\"Total\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">London Midland<\/th>\n    <td class=\"Cell\">14487<\/td>\n    <td class=\"Cell\">33792<\/td>\n    <td class=\"Total\">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Virgin Trains<\/th>\n    <td class=\"Cell\">8594<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"2\">By Power Type<\/th>\n    <td class=\"OutlineCell\" colspan=\"3\">&nbsp;<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\" rowspan=\"3\"><\/th>\n    <th class=\"RowHeader\">DMU<\/th>\n    <td class=\"Cell\">32987<\/td>\n    <td class=\"Cell\">6484<\/td>\n    <td class=\"Total\">39471<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">EMU<\/th>\n    <td class=\"Cell\">15306<\/td>\n    <td class=\"Cell\">28201<\/td>\n    <td class=\"Total\">43507<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">HST<\/th>\n    <td class=\"Cell\">732<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">732<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"OutlineRowHeader\" style=\"color: blue; \" colspan=\"2\">Total<\/th>\n    <td class=\"OutlineCell\">49025<\/td>\n    <td class=\"OutlineCell\">34685<\/td>\n    <td class=\"OutlineCell\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script><p>In the example above, <code>sortAnchor</code> links that data group to the next/previous group, so that they stay together when the data groups in the pivot table are sorted.</p>
</div>
</div>
<div id="custom-layout-changes" class="section level2">
<h2 class="hasAnchor">
<a href="#custom-layout-changes" class="anchor"></a>Custom Layout Changes</h2>
<p>The <code>asBasicTable()</code> function allows a pivot table to be converted to a basic table - from the <code>basictabler</code> package.</p>
<p>The <code>basictabler</code> package allows free-form tables to be constructed, in contrast to <code>pivottabler</code> which creates pivot tables with relatively fixed structures. <code>pivottabler</code> contains calculation logic - to calculate the values of cells within the pivot table. <code>basictabler</code> contains no calculation logic - cell values must be provided either from a data frame, row-by-row, column-by-column or cell-by-cell.</p>
<p>Converting a pivot table to a basic table allows the structure of pivot tables to be altered after they have been created, e.g.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(pivottabler)</a>
<a class="sourceLine" id="cb18-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb18-3" title="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(lubridate)</a>
<a class="sourceLine" id="cb18-4" title="4">trains &lt;-<span class="st"> </span><span class="kw">mutate</span>(bhmtrains, </a>
<a class="sourceLine" id="cb18-5" title="5">                 <span class="dt">GbttDate=</span><span class="kw">if_else</span>(<span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(GbttArrival), GbttDeparture, GbttArrival),</a>
<a class="sourceLine" id="cb18-6" title="6">                 <span class="dt">GbttMonth=</span><span class="kw">make_date</span>(<span class="dt">year=</span><span class="kw">year</span>(GbttDate), <span class="dt">month=</span><span class="kw">month</span>(GbttDate), <span class="dt">day=</span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb18-7" title="7"></a>
<a class="sourceLine" id="cb18-8" title="8">pt &lt;-<span class="st"> </span>PivotTable<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb18-9" title="9">pt<span class="op">$</span><span class="kw">addData</span>(trains)</a>
<a class="sourceLine" id="cb18-10" title="10">pt<span class="op">$</span><span class="kw">addColumnDataGroups</span>(<span class="st">"GbttMonth"</span>, <span class="dt">dataFormat=</span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">format=</span><span class="st">"%B %Y"</span>))</a>
<a class="sourceLine" id="cb18-11" title="11">pt<span class="op">$</span><span class="kw">addColumnDataGroups</span>(<span class="st">"PowerType"</span>)</a>
<a class="sourceLine" id="cb18-12" title="12">pt<span class="op">$</span><span class="kw">addRowDataGroups</span>(<span class="st">"TOC"</span>)</a>
<a class="sourceLine" id="cb18-13" title="13">pt<span class="op">$</span><span class="kw">defineCalculation</span>(<span class="dt">calculationName=</span><span class="st">"TotalTrains"</span>, <span class="dt">summariseExpression=</span><span class="st">"n()"</span>)</a>
<a class="sourceLine" id="cb18-14" title="14">pt<span class="op">$</span><span class="kw">evaluatePivot</span>()</a>
<a class="sourceLine" id="cb18-15" title="15"></a>
<a class="sourceLine" id="cb18-16" title="16"><span class="co"># convert the pivot table to a basic table, insert a new row, merge cells and highlight</span></a>
<a class="sourceLine" id="cb18-17" title="17">bt &lt;-<span class="st"> </span>pt<span class="op">$</span><span class="kw">asBasicTable</span>()</a>
<a class="sourceLine" id="cb18-18" title="18">bt<span class="op">$</span>cells<span class="op">$</span><span class="kw">insertRow</span>(<span class="dv">5</span>)</a>
<a class="sourceLine" id="cb18-19" title="19">bt<span class="op">$</span>cells<span class="op">$</span><span class="kw">setCell</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dt">rawValue=</span><span class="st">"The values below are significantly higher than expected."</span>, </a>
<a class="sourceLine" id="cb18-20" title="20">                 <span class="dt">styleDeclarations=</span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"text-align"</span>=<span class="st">"left"</span>, <span class="st">"background-color"</span>=<span class="st">"yellow"</span>,</a>
<a class="sourceLine" id="cb18-21" title="21">                                        <span class="st">"font-weight"</span>=<span class="st">"bold"</span>, <span class="st">"font-style"</span>=<span class="st">"italic"</span>))</a>
<a class="sourceLine" id="cb18-22" title="22">bt<span class="op">$</span><span class="kw">mergeCells</span>(<span class="dt">rFrom=</span><span class="dv">5</span>, <span class="dt">cFrom=</span><span class="dv">2</span>, <span class="dt">rSpan=</span><span class="dv">1</span>, <span class="dt">cSpan=</span><span class="dv">13</span>)</a>
<a class="sourceLine" id="cb18-23" title="23">bt<span class="op">$</span><span class="kw">setStyling</span>(<span class="dt">rFrom=</span><span class="dv">6</span>, <span class="dt">cFrom=</span><span class="dv">2</span>, <span class="dt">rTo=</span><span class="dv">6</span>, <span class="dt">cTo=</span><span class="dv">14</span>, </a>
<a class="sourceLine" id="cb18-24" title="24">              <span class="dt">declarations=</span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"text-align"</span>=<span class="st">"left"</span>, <span class="st">"background-color"</span>=<span class="st">"yellow"</span>))</a>
<a class="sourceLine" id="cb18-25" title="25">bt<span class="op">$</span><span class="kw">renderTable</span>()</a></code></pre></div>
<div id="htmlwidget-7e2cc58a735206c63735" style="width:auto;height:auto;" class="basictabler html-widget"></div>
<script type="application/json" data-for="htmlwidget-7e2cc58a735206c63735">{"x":{"tableCss":".Table {display: table; border-collapse: collapse; }\r\n.ColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.RowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.Cell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n.OutlineColumnHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px; text-align: center; }\r\n.OutlineRowHeader {font-family: Arial; font-size: 0.75em; border: 1px solid lightgray; vertical-align: middle; font-weight: bold; background-color: #F2F2F2; padding: 2px 8px 2px 2px; text-align: left; }\r\n.OutlineCell {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; background-color: #F8F8F8; font-weight: bold; }\r\n.Total {font-family: Arial; font-size: 0.75em; padding: 2px 2px 2px 8px; border: 1px solid lightgray; vertical-align: middle; text-align: right; }\r\n","tableHtml":"<table class=\"Table\">\n  <tr>\n    <th rowspan=\"2\" class=\"RowHeader\">&nbsp;<\/th>\n    <th colspan=\"4\" class=\"ColumnHeader\">December 2016<\/th>\n    <th colspan=\"4\" class=\"ColumnHeader\">January 2017<\/th>\n    <th colspan=\"4\" class=\"ColumnHeader\">February 2017<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n  <\/tr>\n  <tr>\n    <th class=\"ColumnHeader\">DMU<\/th>\n    <th class=\"ColumnHeader\">EMU<\/th>\n    <th class=\"ColumnHeader\">HST<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n    <th class=\"ColumnHeader\">DMU<\/th>\n    <th class=\"ColumnHeader\">EMU<\/th>\n    <th class=\"ColumnHeader\">HST<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n    <th class=\"ColumnHeader\">DMU<\/th>\n    <th class=\"ColumnHeader\">EMU<\/th>\n    <th class=\"ColumnHeader\">HST<\/th>\n    <th class=\"ColumnHeader\">Total<\/th>\n    <th class=\"ColumnHeader\"><\/th>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Arriva Trains Wales<\/th>\n    <td class=\"Cell\">1291<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">1291<\/td>\n    <td class=\"Cell\">1402<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">1402<\/td>\n    <td class=\"Cell\">1216<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">1216<\/td>\n    <td class=\"Total\">3909<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">CrossCountry<\/th>\n    <td class=\"Cell\">7314<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\">236<\/td>\n    <td class=\"Total\">7550<\/td>\n    <td class=\"Cell\">7777<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\">256<\/td>\n    <td class=\"Total\">8033<\/td>\n    <td class=\"Cell\">7105<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Cell\">240<\/td>\n    <td class=\"Total\">7345<\/td>\n    <td class=\"Total\">22928<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\"><\/th>\n    <td colspan=\"13\" class=\"Cell\" style=\"text-align: left; background-color: yellow; font-weight: bold; font-style: italic; \">The values below are significantly higher than expected.<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">London Midland<\/th>\n    <td class=\"Cell\" style=\"text-align: left; background-color: yellow; \">3635<\/td>\n    <td class=\"Cell\" style=\"text-align: left; background-color: yellow; \">11967<\/td>\n    <td class=\"Cell\" style=\"text-align: left; background-color: yellow; \"><\/td>\n    <td class=\"Total\" style=\"text-align: left; background-color: yellow; \">15602<\/td>\n    <td class=\"Cell\" style=\"text-align: left; background-color: yellow; \">3967<\/td>\n    <td class=\"Cell\" style=\"text-align: left; background-color: yellow; \">13062<\/td>\n    <td class=\"Cell\" style=\"text-align: left; background-color: yellow; \"><\/td>\n    <td class=\"Total\" style=\"text-align: left; background-color: yellow; \">17029<\/td>\n    <td class=\"Cell\" style=\"text-align: left; background-color: yellow; \">3627<\/td>\n    <td class=\"Cell\" style=\"text-align: left; background-color: yellow; \">12021<\/td>\n    <td class=\"Cell\" style=\"text-align: left; background-color: yellow; \"><\/td>\n    <td class=\"Total\" style=\"text-align: left; background-color: yellow; \">15648<\/td>\n    <td class=\"Total\" style=\"text-align: left; background-color: yellow; \">48279<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Virgin Trains<\/th>\n    <td class=\"Cell\">740<\/td>\n    <td class=\"Cell\">2137<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">2877<\/td>\n    <td class=\"Cell\">728<\/td>\n    <td class=\"Cell\">2276<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">3004<\/td>\n    <td class=\"Cell\">669<\/td>\n    <td class=\"Cell\">2044<\/td>\n    <td class=\"Cell\"><\/td>\n    <td class=\"Total\">2713<\/td>\n    <td class=\"Total\">8594<\/td>\n  <\/tr>\n  <tr>\n    <th class=\"RowHeader\">Total<\/th>\n    <td class=\"Total\">12980<\/td>\n    <td class=\"Total\">14104<\/td>\n    <td class=\"Total\">236<\/td>\n    <td class=\"Total\">27320<\/td>\n    <td class=\"Total\">13874<\/td>\n    <td class=\"Total\">15338<\/td>\n    <td class=\"Total\">256<\/td>\n    <td class=\"Total\">29468<\/td>\n    <td class=\"Total\">12617<\/td>\n    <td class=\"Total\">14065<\/td>\n    <td class=\"Total\">240<\/td>\n    <td class=\"Total\">26922<\/td>\n    <td class=\"Total\">83710<\/td>\n  <\/tr>\n<\/table>","settings":[]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="further-reading" class="section level2">
<h2 class="hasAnchor">
<a href="#further-reading" class="anchor"></a>Further Reading</h2>
<p>The full set of vignettes is:</p>
<ol style="list-style-type: decimal">
<li><a href="v01-introduction.html">Introduction</a></li>
<li><a href="v02-datagroups.html">Data Groups</a></li>
<li><a href="v03-calculations.html">Calculations</a></li>
<li><a href="v04-regularlayout.html">Regular Layout</a></li>
<li><a href="v05-outputs.html">Outputs</a></li>
<li><a href="v06-latexoutput.html">Latex Output</a></li>
<li><a href="v07-styling.html">Styling</a></li>
<li><a href="v08-findingandformatting.html">Finding and Formatting</a></li>
<li><a href="v09-cellcontext.html">Cell Context</a></li>
<li><a href="v10-irregularlayout.html">Irregular Layout</a></li>
<li><a href="v11-performance.html">Performance</a></li>
<li><a href="v12-excelexport.html">Excel Export</a></li>
<li><a href="v13-shiny.html">Shiny</a></li>
<li><a href="vA1-appendix.html">Appendix: Details</a></li>
<li><a href="vA2-appendix.html">Appendix: Calculations</a></li>
<li><a href="vA3-appendix.html">Appendix: Class Overview</a></li>
</ol>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>Use the <code>addColumnDataGroups()</code> and <code>addRowDataGroups()</code> functions against the pivot table. Use the <code>addDataGroups()</code> function against data groups.<a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>Every pivot table has a default calculation group named “default”.<a href="#fnref2" class="footnote-back">↩</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#in-this-vignette">In This Vignette</a></li>
      <li><a href="#introductory-note">Introductory Note</a></li>
      <li><a href="#what-is-irregular-layout">What is Irregular Layout?</a></li>
      <li><a href="#caution">Caution</a></li>
      <li><a href="#simple-example-of-an-irregular-layout">Simple Example of an Irregular Layout</a></li>
      <li><a href="#extending-the-simple-example">Extending the Simple Example</a></li>
      <li><a href="#iterating-groups">Iterating Groups</a></li>
      <li><a href="#multiple-calculation-groups">Multiple Calculation Groups</a></li>
      <li><a href="#combining-multiple-pivot-tables">Combining Multiple Pivot Tables</a></li>
      <li><a href="#custom-layout-changes">Custom Layout Changes</a></li>
      <li><a href="#further-reading">Further Reading</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Christopher Bailiss.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '16a61fa9a8811ff537cd1a528040a9e1',
    indexName: 'pivottabler',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
