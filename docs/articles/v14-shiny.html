<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>14. Shiny • pivottabler</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="14. Shiny">
<meta property="og:description" content="pivottabler">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-64707587-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-64707587-2');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pivottabler</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/cbailiss/pivottabler/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>14. Shiny</h1>
                        <h4 class="author">Chris Bailiss</h4>
            
            <h4 class="date">2020-05-12</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/cbailiss/pivottabler/blob/master/vignettes/v14-shiny.Rmd"><code>vignettes/v14-shiny.Rmd</code></a></small>
      <div class="hidden name"><code>v14-shiny.Rmd</code></div>

    </div>

    
    
<div id="in-this-vignette" class="section level2">
<h2 class="hasAnchor">
<a href="#in-this-vignette" class="anchor"></a>In This Vignette</h2>
<ul>
<li>About Shiny</li>
<li>Examples</li>
<li>Example 1: Minimal Example</li>
<li>Example 2: Comparing pairs of variables</li>
<li>Example 3: Multiple rows, columns and measures</li>
</ul>
</div>
<div id="about-shiny" class="section level2">
<h2 class="hasAnchor">
<a href="#about-shiny" class="anchor"></a>About Shiny</h2>
<p>Shiny is an R package that makes it easy to build interactive web applications (apps) straight from R.</p>
<p>Good starting points for using Shiny are:</p>
<ul>
<li><a href="https://shiny.rstudio.com/">Overview</a></li>
<li><a href="https://shiny.rstudio.com/tutorial/">Video Tutorial</a></li>
<li><a href="https://shiny.rstudio.com/articles/">Detailed Written Articles</a></li>
</ul>
</div>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<p>This vignette presents a couple of examples to get started using ‘pivottabler’ with Shiny. They are not intended to be fully featured applications, rather they are intended to help the reader get started quickly using <code>pivottabler</code> with Shiny.</p>
<p>To use each of these examples, create a new single-file Shiny web application in RStudio, then paste the R code into the app.R file.</p>
</div>
<div id="example-1-minimal-example" class="section level2">
<h2 class="hasAnchor">
<a href="#example-1-minimal-example" class="anchor"></a>Example 1: Minimal Example</h2>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">shiny</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">htmlwidgets</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)

<span class="no">ui</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span>(

   <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/titlePanel.html">titlePanel</a></span>(<span class="st">"Pivottabler Minimal Example Shiny App"</span>),

   <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html">sidebarLayout</a></span>(
      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html">sidebarPanel</a></span>(

         <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput</a></span>(<span class="st">"selectRows"</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/builder.html">h5</a></span>(<span class="st">"Rows"</span>),
                     <span class="kw">choices</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"Train Category"</span> <span class="kw">=</span> <span class="st">"TrainCategory"</span>,
                                    <span class="st">"TOC"</span> <span class="kw">=</span> <span class="st">"TOC"</span>,
                                    <span class="st">"Power Type"</span> <span class="kw">=</span> <span class="st">"PowerType"</span>), <span class="kw">selected</span> <span class="kw">=</span> <span class="st">"TOC"</span>),
         <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput</a></span>(<span class="st">"selectCols"</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/builder.html">h5</a></span>(<span class="st">"Columns"</span>),
                     <span class="kw">choices</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"Train Category"</span> <span class="kw">=</span> <span class="st">"TrainCategory"</span>,
                                    <span class="st">"TOC"</span> <span class="kw">=</span> <span class="st">"TOC"</span>,
                                    <span class="st">"Power Type"</span> <span class="kw">=</span> <span class="st">"PowerType"</span>), <span class="kw">selected</span> <span class="kw">=</span> <span class="st">"TrainCategory"</span>)
      ),

      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html">mainPanel</a></span>(
         <span class="fu"><a href="../reference/pivottablerOutput.html">pivottablerOutput</a></span>(<span class="st">'pvt'</span>)
      )
   )
)

<span class="no">server</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">input</span>, <span class="no">output</span>) {

   <span class="no">output</span>$<span class="no">pvt</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/renderPivottabler.html">renderPivottabler</a></span>({
     <span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
     <span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">bhmtrains</span>)
     <span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="no">input</span>$<span class="no">selectCols</span>)
     <span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="no">input</span>$<span class="no">selectRows</span>)
     <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>)
     <span class="no">pt</span>$<span class="fu">evaluatePivot</span>()
     <span class="fu"><a href="../reference/pivottabler.html">pivottabler</a></span>(<span class="no">pt</span>)
   })
}

<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span>(<span class="kw">ui</span> <span class="kw">=</span> <span class="no">ui</span>, <span class="kw">server</span> <span class="kw">=</span> <span class="no">server</span>)</pre></body></html></div>
<div class="figure">
<img src="shiny1.png" alt="Minimal pivottabler Shiny App"><p class="caption">Minimal pivottabler Shiny App</p>
</div>
</div>
<div id="example-2-comparing-pairs-of-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#example-2-comparing-pairs-of-variables" class="anchor"></a>Example 2: Comparing pairs of variables</h2>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">shiny</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">htmlwidgets</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">lubridate</span>)

<span class="no">getDelayBand</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">delayMinutes</span>) {
  <span class="kw">if</span>(<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="no">delayMinutes</span>)) <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="fl">NA</span>)
  <span class="kw">else</span> <span class="kw">if</span>(<span class="no">delayMinutes</span> <span class="kw">&lt;=</span> <span class="fl">0</span>) <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="fl">0</span>)
  <span class="kw">else</span> <span class="kw">if</span>(<span class="no">delayMinutes</span> <span class="kw">&lt;=</span> <span class="fl">1</span>) <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="fl">1</span>)
  <span class="kw">else</span> <span class="kw">if</span>(<span class="no">delayMinutes</span> <span class="kw">&lt;=</span> <span class="fl">2</span>) <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="fl">2</span>)
  <span class="kw">else</span> <span class="kw">if</span>(<span class="no">delayMinutes</span> <span class="kw">&lt;=</span> <span class="fl">5</span>) <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="fl">5</span>)
  <span class="kw">else</span> <span class="kw">if</span>(<span class="no">delayMinutes</span> <span class="kw">&lt;=</span> <span class="fl">10</span>) <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="fl">10</span>)
  <span class="kw">else</span> <span class="kw">if</span>(<span class="no">delayMinutes</span> <span class="kw">&lt;=</span> <span class="fl">15</span>) <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="fl">15</span>)
  <span class="kw">else</span> <span class="kw">if</span>(<span class="no">delayMinutes</span> <span class="kw">&lt;=</span> <span class="fl">20</span>) <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="fl">20</span>)
  <span class="kw">else</span> <span class="kw">if</span>(<span class="no">delayMinutes</span> <span class="kw">&lt;=</span> <span class="fl">30</span>) <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="fl">30</span>)
  <span class="kw">else</span> <span class="kw">if</span>(<span class="no">delayMinutes</span> <span class="kw">&lt;=</span> <span class="fl">45</span>) <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="fl">45</span>)
  <span class="kw">else</span> <span class="kw">if</span>(<span class="no">delayMinutes</span> <span class="kw">&lt;=</span> <span class="fl">60</span>) <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="fl">60</span>)
  <span class="kw">else</span> <span class="kw">if</span>(<span class="no">delayMinutes</span> <span class="kw">&lt;=</span> <span class="fl">90</span>) <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="fl">90</span>)
  <span class="kw">else</span> <span class="kw">if</span>(<span class="no">delayMinutes</span> <span class="kw">&lt;=</span> <span class="fl">120</span>) <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="fl">120</span>)
  <span class="kw">else</span> <span class="kw">if</span>(<span class="no">delayMinutes</span> <span class="kw">&lt;=</span> <span class="fl">180</span>) <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="fl">180</span>)
  <span class="kw">else</span> <span class="kw">if</span>(<span class="no">delayMinutes</span> <span class="kw">&lt;=</span> <span class="fl">240</span>) <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="fl">240</span>)
  <span class="kw">else</span> <span class="kw">if</span>(<span class="no">delayMinutes</span> <span class="kw">&lt;=</span> <span class="fl">300</span>) <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="fl">300</span>)
  <span class="kw">else</span> <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="fl">999</span>)
}

<span class="no">getDelayBands</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">delayMinutes</span>) {
  <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span>(<span class="no">delayMinutes</span>, <span class="no">getDelayBand</span>))
}

<span class="no">stations</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="no">trainstations</span>, <span class="kw">CrsCodeChr</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="no">CrsCode</span>))
<span class="no">trains</span> <span class="kw">&lt;-</span> <span class="no">bhmtrains</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">OriginChr</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="no">Origin</span>), <span class="kw">DestinationChr</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="no">Destination</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/join.html">inner_join</a></span>(<span class="no">stations</span>, <span class="kw">by</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"OriginChr"</span><span class="kw">=</span><span class="st">"CrsCodeChr"</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/join.html">inner_join</a></span>(<span class="no">stations</span>, <span class="kw">by</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"DestinationChr"</span><span class="kw">=</span><span class="st">"CrsCodeChr"</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">Status</span>, <span class="no">TOC</span>, <span class="no">TrainCategory</span>, <span class="no">PowerType</span>, <span class="no">SchedSpeedMPH</span>,
         <span class="kw">Origin</span><span class="kw">=</span><span class="no">StationName.x</span>, <span class="no">OriginGbttDeparture</span>, <span class="no">OriginActualDeparture</span>,
         <span class="no">GbttArrival</span>, <span class="no">ActualArrival</span>, <span class="no">GbttDeparture</span>, <span class="no">ActualDeparture</span>,
         <span class="kw">Destination</span><span class="kw">=</span><span class="no">StationName.y</span>, <span class="no">DestinationGbttArrival</span>, <span class="no">DestinationActualArrival</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">Status</span><span class="kw">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/recode.html">recode</a></span>(<span class="no">Status</span>, <span class="st">"A"</span><span class="kw">=</span><span class="st">"Normal"</span>, <span class="st">"C"</span><span class="kw">=</span><span class="st">"Cancelled"</span>, <span class="st">"R"</span><span class="kw">=</span><span class="st">"Reinstated"</span>),
         <span class="kw">GbttDateTime</span><span class="kw">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="no">GbttArrival</span>), <span class="no">GbttDeparture</span>, <span class="no">GbttArrival</span>),
         <span class="kw">GbttHourOfDay</span><span class="kw">=</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/hour.html">hour</a></span>(<span class="no">GbttDateTime</span>),
         <span class="kw">GbttDate</span><span class="kw">=</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/make_datetime.html">make_date</a></span>(<span class="kw">year</span><span class="kw">=</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/year.html">year</a></span>(<span class="no">GbttDateTime</span>), <span class="kw">month</span><span class="kw">=</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/month.html">month</a></span>(<span class="no">GbttDateTime</span>), <span class="kw">day</span><span class="kw">=</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/day.html">day</a></span>(<span class="no">GbttDateTime</span>)),
         <span class="kw">GbttMonth</span><span class="kw">=</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/make_datetime.html">make_date</a></span>(<span class="kw">year</span><span class="kw">=</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/year.html">year</a></span>(<span class="no">GbttDateTime</span>), <span class="kw">month</span><span class="kw">=</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/month.html">month</a></span>(<span class="no">GbttDateTime</span>), <span class="kw">day</span><span class="kw">=</span><span class="fl">1</span>),
         <span class="kw">ArrivalDeltaMins</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/difftime.html">difftime</a></span>(<span class="no">ActualArrival</span>, <span class="no">GbttArrival</span>, <span class="kw">units</span><span class="kw">=</span><span class="st">"mins"</span>),
         <span class="kw">ArrivalDelayMins</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="no">ArrivalDeltaMins</span><span class="kw">&lt;</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="no">ArrivalDeltaMins</span>),
         <span class="kw">ArrivalDelayBand</span><span class="kw">=</span><span class="fu">getDelayBands</span>(<span class="no">ArrivalDelayMins</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">Status</span>, <span class="no">TOC</span>, <span class="no">TrainCategory</span>, <span class="no">PowerType</span>, <span class="no">SchedSpeedMPH</span>, <span class="no">Origin</span>, <span class="no">Destination</span>,
         <span class="no">GbttMonth</span>, <span class="no">GbttDate</span>, <span class="no">GbttHourOfDay</span>, <span class="no">ArrivalDeltaMins</span>, <span class="no">ArrivalDelayMins</span>, <span class="no">ArrivalDelayBand</span>)

<span class="no">ui</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span>(

  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/titlePanel.html">titlePanel</a></span>(<span class="st">"Pivottabler Minimal Example Shiny App"</span>),

  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidRow</a></span>(
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html">column</a></span>(<span class="fl">4</span>,
      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput</a></span>(<span class="st">"selectRows"</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="st">"Rows"</span>, <span class="kw">choices</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">""</span>))
    ),
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html">column</a></span>(<span class="fl">4</span>,
      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput</a></span>(<span class="st">"selectCols"</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="st">"Columns"</span>, <span class="kw">choices</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">""</span>))
    ),
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html">column</a></span>(<span class="fl">4</span>,
      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput</a></span>(<span class="st">"selectCalc"</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="st">"Calculation"</span>,
                     <span class="kw">choices</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"Total Trains"</span>, <span class="st">"Total Delay Minutes"</span>), <span class="kw">selected</span> <span class="kw">=</span> <span class="st">"Total Trains"</span>)
    )
  ),

  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/builder.html">hr</a></span>(),

  <span class="fu"><a href="../reference/pivottablerOutput.html">pivottablerOutput</a></span>(<span class="st">'pvt'</span>)
)

<span class="no">server</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">input</span>, <span class="no">output</span>, <span class="no">session</span>) {

  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observe.html">observe</a></span>({
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/isolate.html">isolate</a></span>({
    <span class="no">sr</span> <span class="kw">&lt;-</span> <span class="no">input</span>$<span class="no">selectRows</span>
    <span class="no">sc</span> <span class="kw">&lt;-</span> <span class="no">input</span>$<span class="no">selectCols</span>

    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/updateSelectInput.html">updateSelectInput</a></span>(<span class="no">session</span>, <span class="st">"selectRows"</span>,
      <span class="kw">label</span> <span class="kw">=</span> <span class="st">"Rows"</span>,
      <span class="kw">choices</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">trains</span>)
    )
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/updateSelectInput.html">updateSelectInput</a></span>(<span class="no">session</span>, <span class="st">"selectCols"</span>,
      <span class="kw">label</span> <span class="kw">=</span> <span class="st">"Columns"</span>,
      <span class="kw">choices</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">trains</span>)
    )
    })
  })

  <span class="no">output</span>$<span class="no">pvt</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/renderPivottabler.html">renderPivottabler</a></span>({
   <span class="kw">if</span>((<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">input</span>$<span class="no">selectRows</span>)<span class="kw">&gt;</span><span class="fl">0</span>)<span class="kw">&amp;&amp;</span>(<span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span>(<span class="no">input</span>$<span class="no">selectRows</span>)<span class="kw">&gt;</span><span class="fl">0</span>)) {
   <span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
   <span class="no">trains2</span> <span class="kw">&lt;-</span> <span class="no">trains</span> <span class="kw">%&gt;%</span>
     <span class="fu"><a href="https://dplyr.tidyverse.org/reference/se-deprecated.html">group_by_</a></span>(<span class="no">input</span>$<span class="no">selectCols</span>, <span class="no">input</span>$<span class="no">selectRows</span>) <span class="kw">%&gt;%</span>
     <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(<span class="kw">TotalTrains</span><span class="kw">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/n.html">n</a></span>(), <span class="kw">DelayMinutes</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="no">ArrivalDelayMins</span>, <span class="kw">na.rm</span><span class="kw">=</span><span class="fl">TRUE</span>)) <span class="kw">%&gt;%</span>
     <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span>()
   <span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">trains2</span>)
   <span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="no">input</span>$<span class="no">selectCols</span>)
   <span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="no">input</span>$<span class="no">selectRows</span>)
   <span class="kw">if</span>(<span class="no">input</span>$<span class="no">selectCalc</span><span class="kw">==</span><span class="st">"Total Trains"</span>)
     <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>, <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"sum(TotalTrains)"</span>)
   <span class="kw">else</span> <span class="kw">if</span> (<span class="no">input</span>$<span class="no">selectCalc</span><span class="kw">==</span><span class="st">"Total Delay Minutes"</span>)
     <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"ToalDelayMinutes"</span>,
                          <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"sum(DelayMinutes, na.rm=TRUE)"</span>)
   <span class="no">pt</span>$<span class="fu">evaluatePivot</span>()
   <span class="fu"><a href="../reference/pivottabler.html">pivottabler</a></span>(<span class="no">pt</span>)
   }
  })
}

<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span>(<span class="kw">ui</span> <span class="kw">=</span> <span class="no">ui</span>, <span class="kw">server</span> <span class="kw">=</span> <span class="no">server</span>)</pre></body></html></div>
<div class="figure">
<img src="shiny2.png" alt="Comparing pairs of variables with Shiny and pivottabler"><p class="caption">Comparing pairs of variables with Shiny and pivottabler</p>
</div>
</div>
<div id="example-3-multiple-rows-columns-and-measures" class="section level2">
<h2 class="hasAnchor">
<a href="#example-3-multiple-rows-columns-and-measures" class="anchor"></a>Example 3: Multiple rows, columns and measures</h2>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">shiny</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">htmlwidgets</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">lubridate</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pivottabler</span>)

<span class="co"># START OF DATA PREP</span>

<span class="co"># to be used when getting station names in joins below</span>
<span class="no">tsorigin</span> <span class="kw">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">transmute</a></span>(<span class="no">trainstations</span>, <span class="kw">CrsCode</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="no">CrsCode</span>),
                     <span class="kw">OriginName</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="no">StationName</span>))
<span class="no">tsdestination</span> <span class="kw">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">transmute</a></span>(<span class="no">trainstations</span>, <span class="kw">CrsCode</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="no">CrsCode</span>),
                          <span class="kw">DestinationName</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="no">StationName</span>))

<span class="co"># recode status and join to get station names from CrsCodes</span>
<span class="no">data</span> <span class="kw">&lt;-</span> <span class="no">bhmtrains</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">Status</span> <span class="kw">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/recode.html">recode</a></span>(<span class="no">Status</span>,
                         <span class="st">"A"</span> <span class="kw">=</span> <span class="st">"Active"</span>, <span class="st">"C"</span> <span class="kw">=</span> <span class="st">"Cancelled"</span>, <span class="st">"R"</span> <span class="kw">=</span> <span class="st">"Reinstated"</span>),
         <span class="kw">Origin</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="no">Origin</span>),
         <span class="kw">Destination</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="no">Destination</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(<span class="no">tsorigin</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Origin"</span> <span class="kw">=</span> <span class="st">"CrsCode"</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(<span class="no">tsdestination</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Destination"</span> <span class="kw">=</span> <span class="st">"CrsCode"</span>))

<span class="co"># derive some additional delay data</span>
<span class="no">data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="no">data</span>,
                 <span class="kw">GbttDateTime</span><span class="kw">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="no">GbttArrival</span>), <span class="no">GbttDeparture</span>, <span class="no">GbttArrival</span>),
                 <span class="kw">GbttMonth</span><span class="kw">=</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/make_datetime.html">make_date</a></span>(<span class="kw">year</span><span class="kw">=</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/year.html">year</a></span>(<span class="no">GbttDateTime</span>), <span class="kw">month</span><span class="kw">=</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/month.html">month</a></span>(<span class="no">GbttDateTime</span>), <span class="kw">day</span><span class="kw">=</span><span class="fl">1</span>),
                 <span class="kw">IsArrival</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="no">GbttArrival</span>), <span class="fl">0</span>, <span class="fl">1</span>),
                 <span class="kw">ArrivalDelta</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/difftime.html">difftime</a></span>(<span class="no">ActualArrival</span>, <span class="no">GbttArrival</span>, <span class="kw">units</span><span class="kw">=</span><span class="st">"mins"</span>),
                 <span class="kw">ArrivalDelay</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="no">ArrivalDelta</span><span class="kw">&lt;</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="no">ArrivalDelta</span>),
                 <span class="kw">DelayedByMoreThan5Minutes</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="no">ArrivalDelay</span><span class="kw">&gt;</span><span class="fl">5</span>,<span class="fl">1</span>,<span class="fl">0</span>))

<span class="no">totalTrainCount</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">data</span>)

<span class="co"># END OF DATA PREP</span>

<span class="no">ui</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span>(

  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/titlePanel.html">titlePanel</a></span>(<span class="st">"Pivottabler Multi-Level Example Shiny App"</span>),

  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidRow</a></span>(
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html">column</a></span>(<span class="fl">3</span>,
           <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput</a></span>(<span class="st">"selectRows1"</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/builder.html">h5</a></span>(<span class="st">"Rows 1"</span>),
                       <span class="kw">choices</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"None"</span> <span class="kw">=</span> <span class="st">"None"</span>,
                                      <span class="st">"Status"</span> <span class="kw">=</span> <span class="st">"Status"</span>,
                                      <span class="st">"Train Category"</span> <span class="kw">=</span> <span class="st">"TrainCategory"</span>,
                                      <span class="st">"TOC"</span> <span class="kw">=</span> <span class="st">"TOC"</span>,
                                      <span class="st">"Power Type"</span> <span class="kw">=</span> <span class="st">"PowerType"</span>,
                                      <span class="st">"Scheduled Speed"</span> <span class="kw">=</span> <span class="st">"SchedSpeedMPH"</span>,
                                      <span class="st">"Origin"</span> <span class="kw">=</span> <span class="st">"OriginName"</span>,
                                      <span class="st">"Destination"</span> <span class="kw">=</span> <span class="st">"DestinationName"</span>),
                       <span class="kw">selected</span> <span class="kw">=</span> <span class="st">"TOC"</span>)
    ),
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html">column</a></span>(<span class="fl">3</span>,
           <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput</a></span>(<span class="st">"selectRows2"</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/builder.html">h5</a></span>(<span class="st">"Rows 2"</span>),
                       <span class="kw">choices</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"None"</span> <span class="kw">=</span> <span class="st">"None"</span>,
                                      <span class="st">"Status"</span> <span class="kw">=</span> <span class="st">"Status"</span>,
                                      <span class="st">"Train Category"</span> <span class="kw">=</span> <span class="st">"TrainCategory"</span>,
                                      <span class="st">"TOC"</span> <span class="kw">=</span> <span class="st">"TOC"</span>,
                                      <span class="st">"Power Type"</span> <span class="kw">=</span> <span class="st">"PowerType"</span>,
                                      <span class="st">"Scheduled Speed"</span> <span class="kw">=</span> <span class="st">"SchedSpeedMPH"</span>,
                                      <span class="st">"Origin"</span> <span class="kw">=</span> <span class="st">"OriginName"</span>,
                                      <span class="st">"Destination"</span> <span class="kw">=</span> <span class="st">"DestinationName"</span>),
                       <span class="kw">selected</span> <span class="kw">=</span> <span class="st">"None"</span>)
    ),
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html">column</a></span>(<span class="fl">3</span>,
           <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput</a></span>(<span class="st">"selectCols1"</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/builder.html">h5</a></span>(<span class="st">"Columns 1"</span>),
                       <span class="kw">choices</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"None"</span> <span class="kw">=</span> <span class="st">"None"</span>,
                                      <span class="st">"Status"</span> <span class="kw">=</span> <span class="st">"Status"</span>,
                                      <span class="st">"Train Category"</span> <span class="kw">=</span> <span class="st">"TrainCategory"</span>,
                                      <span class="st">"TOC"</span> <span class="kw">=</span> <span class="st">"TOC"</span>,
                                      <span class="st">"Power Type"</span> <span class="kw">=</span> <span class="st">"PowerType"</span>,
                                      <span class="st">"Scheduled Speed"</span> <span class="kw">=</span> <span class="st">"SchedSpeedMPH"</span>,
                                      <span class="st">"Origin"</span> <span class="kw">=</span> <span class="st">"OriginName"</span>,
                                      <span class="st">"Destination"</span> <span class="kw">=</span> <span class="st">"DestinationName"</span>),
                       <span class="kw">selected</span> <span class="kw">=</span> <span class="st">"TrainCategory"</span>)
    ),
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html">column</a></span>(<span class="fl">3</span>,
           <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput</a></span>(<span class="st">"selectCols2"</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/builder.html">h5</a></span>(<span class="st">"Columns 2"</span>),
                       <span class="kw">choices</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"None"</span> <span class="kw">=</span> <span class="st">"None"</span>,
                                      <span class="st">"Status"</span> <span class="kw">=</span> <span class="st">"Status"</span>,
                                      <span class="st">"Train Category"</span> <span class="kw">=</span> <span class="st">"TrainCategory"</span>,
                                      <span class="st">"TOC"</span> <span class="kw">=</span> <span class="st">"TOC"</span>,
                                      <span class="st">"Power Type"</span> <span class="kw">=</span> <span class="st">"PowerType"</span>,
                                      <span class="st">"Scheduled Speed"</span> <span class="kw">=</span> <span class="st">"SchedSpeedMPH"</span>,
                                      <span class="st">"Origin"</span> <span class="kw">=</span> <span class="st">"OriginName"</span>,
                                      <span class="st">"Destination"</span> <span class="kw">=</span> <span class="st">"DestinationName"</span>),
                       <span class="kw">selected</span> <span class="kw">=</span> <span class="st">"None"</span>)
    )
  ),

  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidRow</a></span>(
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html">column</a></span>(<span class="fl">3</span>,
           <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput</a></span>(<span class="st">"selectMeasure1"</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/builder.html">h5</a></span>(<span class="st">"Measure 1"</span>),
                       <span class="kw">choices</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"Train Count"</span> <span class="kw">=</span> <span class="st">"Train Count"</span>,
                                      <span class="st">"% of Trains"</span> <span class="kw">=</span> <span class="st">"% of Trains"</span>,
                                      <span class="st">"Total Arrival Delay Minutes"</span> <span class="kw">=</span> <span class="st">"Total Arrival Delay Minutes"</span>,
                                      <span class="st">"Average Arrival Delay Minutes"</span> <span class="kw">=</span> <span class="st">"Average Arrival Delay Minutes"</span>,
                                      <span class="st">"Max Arrival Delay Minutes"</span> <span class="kw">=</span> <span class="st">"Max Arrival Delay Minutes"</span>,
                                      <span class="st">"Trains with Arrival Delay &gt;= 5 Minutes"</span>,
                                      <span class="st">"% of Trains with Arrival Delay &gt;= 5 Minutes"</span>),
                       <span class="kw">selected</span> <span class="kw">=</span> <span class="st">"Train Count"</span>)
    ),
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html">column</a></span>(<span class="fl">3</span>,
           <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput</a></span>(<span class="st">"selectMeasure2"</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/builder.html">h5</a></span>(<span class="st">"Measure 2"</span>),
                       <span class="kw">choices</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"None"</span>,
                                      <span class="st">"Train Count"</span> <span class="kw">=</span> <span class="st">"Train Count"</span>,
                                      <span class="st">"% of Trains"</span> <span class="kw">=</span> <span class="st">"% of Trains"</span>,
                                      <span class="st">"Total Arrival Delay Minutes"</span> <span class="kw">=</span> <span class="st">"Total Arrival Delay Minutes"</span>,
                                      <span class="st">"Average Arrival Delay Minutes"</span> <span class="kw">=</span> <span class="st">"Average Arrival Delay Minutes"</span>,
                                      <span class="st">"Max Arrival Delay Minutes"</span> <span class="kw">=</span> <span class="st">"Max Arrival Delay Minutes"</span>,
                                      <span class="st">"Trains with Arrival Delay &gt;= 5 Minutes"</span>,
                                      <span class="st">"% of Trains with Arrival Delay &gt;= 5 Minutes"</span>),
                       <span class="kw">selected</span> <span class="kw">=</span> <span class="st">"None"</span>)
    ),
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html">column</a></span>(<span class="fl">6</span>,
           <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/builder.html">br</a></span>(),
           <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/helpText.html">helpText</a></span>(<span class="st">"Note:  Selecting Origin and/or Destination in rows/columns will result in thousands or
             tens of thousands of cells being calculated, so the pivot table may take a couple of
             minutes to calculate."</span>)
    )
  ),

  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/builder.html">hr</a></span>(),

  <span class="fu"><a href="../reference/pivottablerOutput.html">pivottablerOutput</a></span>(<span class="st">'pvt'</span>)

)

<span class="no">server</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">input</span>, <span class="no">output</span>) {



  <span class="no">output</span>$<span class="no">pvt</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/renderPivottabler.html">renderPivottabler</a></span>({
    <span class="no">pt</span> <span class="kw">&lt;-</span> <span class="no">PivotTable</span>$<span class="fu">new</span>()
    <span class="no">pt</span>$<span class="fu">addData</span>(<span class="no">data</span>)

    <span class="co"># rows and columns</span>
    <span class="kw">if</span> (<span class="no">input</span>$<span class="no">selectCols1</span> <span class="kw">!=</span> <span class="st">"None"</span>) { <span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="no">input</span>$<span class="no">selectCols1</span>) }
    <span class="kw">if</span> (<span class="no">input</span>$<span class="no">selectCols2</span> <span class="kw">!=</span> <span class="st">"None"</span>) { <span class="no">pt</span>$<span class="fu">addColumnDataGroups</span>(<span class="no">input</span>$<span class="no">selectCols2</span>) }
    <span class="kw">if</span> (<span class="no">input</span>$<span class="no">selectRows1</span> <span class="kw">!=</span> <span class="st">"None"</span>) { <span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="no">input</span>$<span class="no">selectRows1</span>) }
    <span class="kw">if</span> (<span class="no">input</span>$<span class="no">selectRows2</span> <span class="kw">!=</span> <span class="st">"None"</span>) { <span class="no">pt</span>$<span class="fu">addRowDataGroups</span>(<span class="no">input</span>$<span class="no">selectRows2</span>) }

    <span class="co"># measure 1</span>
    <span class="kw">if</span> (<span class="no">input</span>$<span class="no">selectMeasure1</span> <span class="kw">==</span> <span class="st">"Train Count"</span>) {
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>,
                           <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>,
                           <span class="kw">caption</span><span class="kw">=</span><span class="st">"Train Count"</span>)
    }
    <span class="kw">else</span> <span class="kw">if</span> (<span class="no">input</span>$<span class="no">selectMeasure1</span> <span class="kw">==</span> <span class="st">"% of Trains"</span>) {
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains"</span>,
                           <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>,
                           <span class="kw">visible</span><span class="kw">=</span><span class="fl">FALSE</span>)
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"PercentageOfTrains"</span>,
                           <span class="kw">caption</span><span class="kw">=</span><span class="st">"% of Trains"</span>,
                           <span class="kw">type</span><span class="kw">=</span><span class="st">"calculation"</span>,
                           <span class="kw">basedOn</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"TotalTrains"</span>),
                           <span class="kw">format</span><span class="kw">=</span><span class="st">"%.2f %%"</span>,
                           <span class="kw">calculationExpression</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"values$TotalTrains/"</span>, <span class="no">totalTrainCount</span>, <span class="st">"*100"</span>))
    }
    <span class="kw">else</span> <span class="kw">if</span> (<span class="no">input</span>$<span class="no">selectMeasure1</span> <span class="kw">==</span> <span class="st">"Total Arrival Delay Minutes"</span>) {
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalArrivalDelayMinutes"</span>,
                           <span class="kw">caption</span><span class="kw">=</span><span class="st">"Total Arrival Delay Minutes"</span>,
                           <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"sum(ArrivalDelay, na.rm = TRUE)"</span>)
    }
    <span class="kw">else</span> <span class="kw">if</span> (<span class="no">input</span>$<span class="no">selectMeasure1</span> <span class="kw">==</span> <span class="st">"Average Arrival Delay Minutes"</span>) {
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalArrivals"</span>,
                           <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"sum(IsArrival, na.rm=TRUE)"</span>, <span class="kw">visible</span><span class="kw">=</span><span class="fl">FALSE</span>)
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalArrivalDelayMinutes"</span>,
                           <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"sum(ArrivalDelay, na.rm = TRUE)"</span>, <span class="kw">visible</span><span class="kw">=</span><span class="fl">FALSE</span>)
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"AverageArrivalDelayMinutes"</span>,
                           <span class="kw">caption</span><span class="kw">=</span><span class="st">"Average Arrival Delay Minutes"</span>,
                           <span class="kw">type</span><span class="kw">=</span><span class="st">"calculation"</span>,
                           <span class="kw">basedOn</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"TotalArrivals"</span>, <span class="st">"TotalArrivalDelayMinutes"</span>),
                           <span class="kw">format</span><span class="kw">=</span><span class="st">"%.2f"</span>,
                           <span class="kw">calculationExpression</span><span class="kw">=</span><span class="st">"values$TotalArrivalDelayMinutes/values$TotalArrivals"</span>)
    }
    <span class="kw">else</span> <span class="kw">if</span> (<span class="no">input</span>$<span class="no">selectMeasure1</span> <span class="kw">==</span> <span class="st">"Max Arrival Delay Minutes"</span>) {
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"MaxArrivalDelayMinutes"</span>,
                           <span class="kw">caption</span><span class="kw">=</span><span class="st">"Max Arrival Delay Minutes"</span>,
                           <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"max(ArrivalDelay, na.rm = TRUE)"</span>)
    }
    <span class="kw">else</span> <span class="kw">if</span> (<span class="no">input</span>$<span class="no">selectMeasure1</span> <span class="kw">==</span> <span class="st">"Trains with Arrival Delay &gt;= 5 Minutes"</span>) {
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"Trains5orMoreMinsLate"</span>,
                           <span class="kw">caption</span><span class="kw">=</span><span class="st">"Trains with Arrival Delay &gt;= 5 Minutes"</span>,
                           <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"sum(DelayedByMoreThan5Minutes, na.rm = TRUE)"</span>)
    }
    <span class="kw">else</span> <span class="kw">if</span> (<span class="no">input</span>$<span class="no">selectMeasure1</span> <span class="kw">==</span> <span class="st">"% of Trains with Arrival Delay &gt;= 5 Minutes"</span>) {
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalArrivals"</span>,
                           <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"sum(IsArrival, na.rm=TRUE)"</span>, <span class="kw">visible</span><span class="kw">=</span><span class="fl">FALSE</span>)
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"Trains5orMoreMinsLate"</span>,
                           <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"sum(DelayedByMoreThan5Minutes, na.rm = TRUE)"</span>,
                           <span class="kw">visible</span><span class="kw">=</span><span class="fl">FALSE</span>)
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"PercentageOfTrainsWithArrivalDelay5orMoreMinutesLate"</span>,
                           <span class="kw">caption</span><span class="kw">=</span><span class="st">"% of Trains with Arrival Delay &gt;= 5 Minutes"</span>,
                           <span class="kw">type</span><span class="kw">=</span><span class="st">"calculation"</span>, <span class="kw">basedOn</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"TotalArrivals"</span>, <span class="st">"Trains5orMoreMinsLate"</span>),
                           <span class="kw">format</span><span class="kw">=</span><span class="st">"%.2f %%"</span>,
                           <span class="kw">calculationExpression</span><span class="kw">=</span><span class="st">"values$Trains5orMoreMinsLate/values$TotalArrivals*100"</span>)
    }

    <span class="co"># measure 2</span>
    <span class="kw">if</span> (<span class="no">input</span>$<span class="no">selectMeasure2</span> <span class="kw">==</span> <span class="st">"Train Count"</span>) {
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains2"</span>,
                           <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>,
                           <span class="kw">caption</span><span class="kw">=</span><span class="st">"Train Count"</span>)
    }
    <span class="kw">else</span> <span class="kw">if</span> (<span class="no">input</span>$<span class="no">selectMeasure2</span> <span class="kw">==</span> <span class="st">"% of Trains"</span>) {
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalTrains2"</span>,
                           <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"n()"</span>,
                           <span class="kw">visible</span><span class="kw">=</span><span class="fl">FALSE</span>)
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"PercentageOfTrains2"</span>,
                           <span class="kw">caption</span><span class="kw">=</span><span class="st">"% of Trains"</span>,
                           <span class="kw">type</span><span class="kw">=</span><span class="st">"calculation"</span>,
                           <span class="kw">basedOn</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"TotalTrains2"</span>),
                           <span class="kw">format</span><span class="kw">=</span><span class="st">"%.2f %%"</span>,
                           <span class="kw">calculationExpression</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"values$TotalTrains2/"</span>, <span class="no">totalTrainCount</span>, <span class="st">"*100"</span>))
    }
    <span class="kw">else</span> <span class="kw">if</span> (<span class="no">input</span>$<span class="no">selectMeasure2</span> <span class="kw">==</span> <span class="st">"Total Arrival Delay Minutes"</span>) {
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalArrivalDelayMinutes2"</span>,
                           <span class="kw">caption</span><span class="kw">=</span><span class="st">"Total Arrival Delay Minutes"</span>,
                           <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"sum(ArrivalDelay, na.rm = TRUE)"</span>)
    }
    <span class="kw">else</span> <span class="kw">if</span> (<span class="no">input</span>$<span class="no">selectMeasure2</span> <span class="kw">==</span> <span class="st">"Average Arrival Delay Minutes"</span>) {
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalArrivals2"</span>,
                           <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"sum(IsArrival, na.rm=TRUE)"</span>, <span class="kw">visible</span><span class="kw">=</span><span class="fl">FALSE</span>)
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalArrivalDelayMinutes2"</span>,
                           <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"sum(ArrivalDelay, na.rm = TRUE)"</span>, <span class="kw">visible</span><span class="kw">=</span><span class="fl">FALSE</span>)
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"AverageArrivalDelayMinutes2"</span>,
                           <span class="kw">caption</span><span class="kw">=</span><span class="st">"Average Arrival Delay Minutes"</span>,
                           <span class="kw">type</span><span class="kw">=</span><span class="st">"calculation"</span>,
                           <span class="kw">basedOn</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"TotalArrivals2"</span>, <span class="st">"TotalArrivalDelayMinutes2"</span>),
                           <span class="kw">format</span><span class="kw">=</span><span class="st">"%.2f"</span>,
                           <span class="kw">calculationExpression</span><span class="kw">=</span><span class="st">"values$TotalArrivalDelayMinutes2/values$TotalArrivals2"</span>)
    }
    <span class="kw">else</span> <span class="kw">if</span> (<span class="no">input</span>$<span class="no">selectMeasure2</span> <span class="kw">==</span> <span class="st">"Max Arrival Delay Minutes"</span>) {
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"MaxArrivalDelayMinutes2"</span>,
                           <span class="kw">caption</span><span class="kw">=</span><span class="st">"Max Arrival Delay Minutes"</span>,
                           <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"max(ArrivalDelay, na.rm = TRUE)"</span>)
    }
    <span class="kw">else</span> <span class="kw">if</span> (<span class="no">input</span>$<span class="no">selectMeasure2</span> <span class="kw">==</span> <span class="st">"Trains with Arrival Delay &gt;= 5 Minutes"</span>) {
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"Trains5orMoreMinsLate2"</span>,
                           <span class="kw">caption</span><span class="kw">=</span><span class="st">"Trains with Arrival Delay &gt;= 5 Minutes"</span>,
                           <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"sum(DelayedByMoreThan5Minutes, na.rm = TRUE)"</span>)
    }
    <span class="kw">else</span> <span class="kw">if</span> (<span class="no">input</span>$<span class="no">selectMeasure2</span> <span class="kw">==</span> <span class="st">"% of Trains with Arrival Delay &gt;= 5 Minutes"</span>) {
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"TotalArrivals2"</span>,
                           <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"sum(IsArrival, na.rm=TRUE)"</span>, <span class="kw">visible</span><span class="kw">=</span><span class="fl">FALSE</span>)
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"Trains5orMoreMinsLate2"</span>,
                           <span class="kw">summariseExpression</span><span class="kw">=</span><span class="st">"sum(DelayedByMoreThan5Minutes, na.rm = TRUE)"</span>,
                           <span class="kw">visible</span><span class="kw">=</span><span class="fl">FALSE</span>)
      <span class="no">pt</span>$<span class="fu">defineCalculation</span>(<span class="kw">calculationName</span><span class="kw">=</span><span class="st">"PercentageOfTrainsWithArrivalDelay5orMoreMinutesLate2"</span>,
                           <span class="kw">caption</span><span class="kw">=</span><span class="st">"% of Trains with Arrival Delay &gt;= 5 Minutes"</span>,
                           <span class="kw">type</span><span class="kw">=</span><span class="st">"calculation"</span>, <span class="kw">basedOn</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"TotalArrivals2"</span>, <span class="st">"Trains5orMoreMinsLate2"</span>),
                           <span class="kw">format</span><span class="kw">=</span><span class="st">"%.2f %%"</span>,
                           <span class="kw">calculationExpression</span><span class="kw">=</span><span class="st">"values$Trains5orMoreMinsLate2/values$TotalArrivals2*100"</span>)
    }

    <span class="co"># generate pivot tabler</span>
    <span class="no">pt</span>$<span class="fu">evaluatePivot</span>()
    <span class="fu"><a href="../reference/pivottabler.html">pivottabler</a></span>(<span class="no">pt</span>)
  })
}

<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span>(<span class="kw">ui</span> <span class="kw">=</span> <span class="no">ui</span>, <span class="kw">server</span> <span class="kw">=</span> <span class="no">server</span>)</pre></body></html></div>
<div class="figure">
<img src="shiny3.png" alt="Multi-Level Example Shiny App"><p class="caption">Multi-Level Example Shiny App</p>
</div>
</div>
<div id="further-reading" class="section level2">
<h2 class="hasAnchor">
<a href="#further-reading" class="anchor"></a>Further Reading</h2>
<p>The full set of vignettes is:</p>
<ol style="list-style-type: decimal">
<li><a href="v01-introduction.html">Introduction</a></li>
<li><a href="v02-datagroups.html">Data Groups</a></li>
<li><a href="v03-calculations.html">Calculations</a></li>
<li><a href="v04-regularlayout.html">Regular Layout</a></li>
<li><a href="v05-outputs.html">Outputs</a></li>
<li><a href="v06-latexoutput.html">Latex Output</a></li>
<li><a href="v07-styling.html">Styling</a></li>
<li><a href="v08-findingandformatting.html">Finding and Formatting</a></li>
<li><a href="v09-cellcontext.html">Cell Context</a></li>
<li><a href="v10-navigatingapivottable.html">Navigating a Pivot Table</a></li>
<li><a href="v11-irregularlayout.html">Irregular Layout</a></li>
<li><a href="v12-performance.html">Performance</a></li>
<li><a href="v13-excelexport.html">Excel Export</a></li>
<li><a href="v14-shiny.html">Shiny</a></li>
<li><a href="vA1-appendix.html">Appendix: Details</a></li>
<li><a href="vA2-appendix.html">Appendix: Calculations</a></li>
<li><a href="vA3-appendix.html">Appendix: Class Overview</a></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Christopher Bailiss.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '16a61fa9a8811ff537cd1a528040a9e1',
    indexName: 'pivottabler',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
